<?xml version="1.0" encoding="ASCII"?>
<ecore:EPackage xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:activities="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities" xmlns:callExpressions="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//calls/callExpressions" xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" xmlns:expressions="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//expressions" xmlns:patternExpressions="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/patternExpressions" name="scope" nsURI="platform:/plugin/org.moflon.sdm.compiler.democles.validation.scope/model/Scope.ecore" nsPrefix="org.moflon.sdm.compiler.democles.validation.scope">
  <eAnnotations source="http://www.eclipse.org/emf/2002/GenModel">
    <details key="basePackage" value="org.moflon.sdm.compiler.democles.validation"/>
  </eAnnotations>
  <eClassifiers xsi:type="ecore:EEnum" name="Errors">
    <eLiterals name="GREEN_BOUND_VAR_FOUND" literal="GREEN_BOUND_VAR_FOUND"/>
    <eLiterals name="BOUND_IS_UNBOUND_IN_SPEC" value="1" literal="BOUND_IS_UNBOUND_IN_SPEC"/>
    <eLiterals name="UNBOUND_IS_BOUND_IN_SPEC" value="2" literal="UNBOUND_IS_BOUND_IN_SPEC"/>
    <eLiterals name="BOUND_VARIABLE_ALREADY_DELETED" value="3" literal="BOUND_VARIABLE_ALREADY_DELETED"/>
    <eLiterals name="RED_BOUND_VAR_IN_LOOP" value="4" literal="RED_BOUND_VAR_IN_LOOP"/>
    <eLiterals name="FREE_VAR_IS_RED" value="5" literal="FREE_VAR_IS_RED"/>
    <eLiterals name="GREEN_VAR_IS_NOT_NEW" value="6" literal="GREEN_VAR_IS_NOT_NEW"/>
    <eLiterals name="BINDING_VAR_NOT_FREE" value="7" literal="BINDING_VAR_NOT_FREE"/>
    <eLiterals name="OPTIONAL_VAR_FOUND" value="8" literal="OPTIONAL_VAR_FOUND"/>
    <eLiterals name="REASSIGNED_METHOD_PARAMETER" value="9" literal="REASSIGNED_METHOD_PARAMETER"/>
    <eLiterals name="MULTIPLE_ATTRIBUTE_ASSIGNMENT" value="10" literal="MULTIPLE_ATTRIBUTE_ASSIGNMENT"/>
    <eLiterals name="EMPTY_COMPOUND_NODE" value="11" literal="EMPTY_COMPOUND_NODE"/>
    <eLiterals name="INFINITE_LOOP" value="12" literal="INFINITE_LOOP"/>
    <eLiterals name="FREE_GREEN_VARIABLE_MARKED_AS_BOUND" value="13" literal="FREE_GREEN_VARIABLE_MARKED_AS_BOUND"/>
    <eLiterals name="GREEN_VARIABLE_WITH_BINDING" value="14" literal="GREEN_VARIABLE_WITH_BINDING"/>
    <eLiterals name="THIS_OBJECT_DELETED" value="15" literal="THIS_OBJECT_DELETED"/>
    <eLiterals name="EMPTY_FOREACH_NODE" value="16" literal="EMPTY_FOREACH_NODE"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="BindingExpressionBuilder" eSuperTypes="//RegularPatternInvocationBuilder">
    <eOperations xsi:type="activities:MoflonEOperation" name="analyzeDependencies">
      <eParameters name="patternInvocationBuilder" eType="//PatternInvocationBuilder"/>
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <activity owningOperation="//BindingExpressionBuilder/analyzeDependencies">
        <ownedActivityEdge source="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.0" target="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.2" target="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.3" target="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.4" target="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.5" guard="EACH_TIME"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.4" target="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.1" guard="END"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.5" target="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.4" guard="FAILURE"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.5" target="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.2" guard="SUCCESS"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupExpressionExplorer" comment="LookupExpressionExplorer" outgoing="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityEdge.0" incoming="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityEdge.2">
          <storyPattern comment="LookupExpressionExplorer">
            <objectVariable type="//ExpressionExplorer" name="expressionExplorer" incomingLink="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0"/>
            <objectVariable type="//BindingExpressionBuilder" name="this" outgoingLink="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="expressionExplorer" target="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0" source="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1" type="//PatternInvocationBuilder/expressionExplorer"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityEdge.4"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HandleBindingExpression" outgoing="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityEdge.1" incoming="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityEdge.6">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ExpressionExplorer/exploreExpression">
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/patternInvocationBuilder">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingExpressionBuilder/analyzeDependencies/patternInvocationBuilder"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingExpressionBuilder/analyzeDependencies/pattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/expression">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityEdge.2"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllObjectVariables" comment="ForAllObjectVariables" outgoing="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityEdge.3 //BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityEdge.4" incoming="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityEdge.0 //BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityEdge.1 //BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityEdge.5" forEach="true">
          <storyPattern comment="ForAllObjectVariables">
            <objectVariable name="objectVariable" incomingLink="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="storyPattern" outgoingLink="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <linkVariable name="objectVariable" target="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0" source="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/objectVariable"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsRelevantObjectVariable" comment="IsRelevantObjectVariable" outgoing="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityEdge.5 //BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityEdge.6" incoming="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityEdge.3">
          <storyPattern comment="IsRelevantObjectVariable">
            <objectVariable name="bindingExpression" incomingLink="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//expressions/Expression"/>
            </objectVariable>
            <objectVariable name="objectVariable" outgoingLink="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="bindingExpression" target="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0" source="//BindingExpressionBuilder/analyzeDependencies/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingExpression"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="createAction">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//BindingPatternInvocation"/>
      <activity owningOperation="//BindingExpressionBuilder/createAction">
        <ownedActivityEdge source="//BindingExpressionBuilder/createAction/@activity/@ownedActivityNode.0" target="//BindingExpressionBuilder/createAction/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/createAction/@activity/@ownedActivityNode.2" target="//BindingExpressionBuilder/createAction/@activity/@ownedActivityNode.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateBindingPatternInvocation" comment="CreateBindingPatternInvocation" outgoing="//BindingExpressionBuilder/createAction/@activity/@ownedActivityEdge.0" incoming="//BindingExpressionBuilder/createAction/@activity/@ownedActivityEdge.1">
          <storyPattern comment="CreateBindingPatternInvocation">
            <objectVariable name="newInvocation" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//BindingPatternInvocation"/>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BindingExpressionBuilder/createAction/@activity/@ownedActivityEdge.0">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingExpressionBuilder/createAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//BindingExpressionBuilder/createAction/@activity/@ownedActivityEdge.1"/>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="validateVariable">
      <eParameters name="action">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
      </eParameters>
      <eParameters name="variable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
      </eParameters>
      <eParameters name="objectVariable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
      </eParameters>
      <activity owningOperation="//BindingExpressionBuilder/validateVariable">
        <ownedActivityEdge source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.0" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.1" guard="FAILURE"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.0" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.8" guard="SUCCESS"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.1" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.10" guard="FAILURE"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.1" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.7" guard="SUCCESS"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.2" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.3" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.11"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.4" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.5" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.6"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.7" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.10" guard="SUCCESS"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.7" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.5" guard="FAILURE"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.9" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.10" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.12" guard="SUCCESS"/>
        <ownedActivityEdge source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.10" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.3" guard="FAILURE"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsVariableFree" comment="IsVariableFree" outgoing="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.0 //BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.1" incoming="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.6">
          <storyPattern comment="IsVariableFree">
            <objectVariable name="variable" outgoingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
            </objectVariable>
            <objectVariable name="action" incomingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <linkVariable name="constructor" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1" source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable/constructor"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsVariableInRootScope" comment="IsVariableInRootScope" outgoing="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.2 //BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.3" incoming="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.0">
          <storyPattern comment="IsVariableInRootScope">
            <objectVariable name="compoundNode" incomingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.1" bindingSemantics="NEGATIVE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CompoundNode"/>
            </objectVariable>
            <objectVariable name="variable" incomingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
            </objectVariable>
            <objectVariable name="rootScope" outgoingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.1 //BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
            </objectVariable>
            <linkVariable name="variables" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1" source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/variables"/>
            </linkVariable>
            <linkVariable name="parent" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0" source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/parent"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="Init" comment="Init" outgoing="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.4" incoming="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.10">
          <storyPattern comment="Init">
            <objectVariable type="//BindingExpressionBuilder" name="this" bindingState="BOUND"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HandleBoundVariableAsError" comment="HandleBoundVariableAsError" outgoing="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.5" incoming="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.12">
          <storyPattern comment="HandleBoundVariableAsError">
            <objectVariable name="report" outgoingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable name="errorVarNotFree" incomingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.1" outgoingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.BINDING_VAR_NOT_FREE"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="objectVariable" incomingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="location" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.2" source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
            <linkVariable name="errorMessages" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupValidationReport" comment="LookupValidationReport" outgoing="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.6" incoming="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.4">
          <storyPattern comment="LookupValidationReport">
            <objectVariable name="report" incomingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable type="//ScopeValidator" name="scopeValidator" outgoingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupScopeValidator">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
            <linkVariable name="validationReport" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0" source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1" type="//ScopeValidator/validationReport"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ReportReassignedMethodParameterError" comment="ReportReassignedMethodParameterError" outgoing="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.7" incoming="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.9">
          <storyPattern comment="ReportReassignedMethodParameterError">
            <objectVariable name="reassignedMethodParameterError" incomingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.1" outgoingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.REASSIGNED_METHOD_PARAMETER"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="report" outgoingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable name="objectVariable" incomingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="location" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.2" source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
            <linkVariable name="errorMessages" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0" source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.7"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HasConstructorAction" comment="HasConstructorAction" outgoing="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.8 //BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.9" incoming="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.3">
          <storyPattern comment="HasConstructorAction">
            <objectVariable name="constructor" incomingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <objectVariable name="variable" outgoingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
            </objectVariable>
            <linkVariable name="constructor" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0" source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable/constructor"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.1"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.10"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ReassignVariable" comment="ReassignVariable" outgoing="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.11 //BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.12" incoming="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.2 //BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.8">
          <storyPattern comment="ReassignVariable">
            <objectVariable name="variable" outgoingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
            </objectVariable>
            <objectVariable name="action" incomingLink="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <linkVariable name="reassignments" target="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.1" source="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable/reassignments"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.5"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BindingExpressionBuilder/validateVariable/@activity/@ownedActivityEdge.11"/>
      </activity>
    </eOperations>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="RedNodeDeletionBuilder" eSuperTypes="//ActionBuilder">
    <eOperations xsi:type="activities:MoflonEOperation" name="buildAction">
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <activity owningOperation="//RedNodeDeletionBuilder/buildAction">
        <ownedActivityEdge source="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.0" target="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.8"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.2" target="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.1" guard="SUCCESS"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.2" target="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.1" guard="FAILURE"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.3" target="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.9"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.4" target="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.5" target="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.6"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.6" target="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.8"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.7" target="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.8" target="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.3" guard="EACH_TIME"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.8" target="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.2" guard="END"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.9" target="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.4"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupStoryNode" comment="LookupStoryNode" outgoing="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.0" incoming="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.7">
          <storyPattern comment="LookupStoryNode">
            <objectVariable name="storyPattern" outgoingLink="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <objectVariable type="//ScopeValidator" name="scopeValidator" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupScopeValidator">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.2"/>
              </bindingExpression>
            </objectVariable>
            <objectVariable type="//RedNodeDeletionBuilder" name="this" bindingState="BOUND"/>
            <objectVariable name="storyNode" incomingLink="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1 //RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/StoryNode"/>
            </objectVariable>
            <objectVariable name="node" outgoingLink="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <linkVariable name="storyNode" target="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.3" source="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/storyNode"/>
            </linkVariable>
            <linkVariable name="origin" target="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.3" source="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.4">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/origin"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.1 //RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.2"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="RemoveResult" comment="RemoveResult" outgoing="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.1 //RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.2" incoming="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.9">
          <storyPattern comment="RemoveResult">
            <objectVariable type="//RedNodeDeletionBuilder" name="this" outgoingLink="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable name="actionResult" incomingLink="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//NodeDeletion"/>
            </objectVariable>
            <linkVariable name="result" target="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1" source="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" type="//ActionBuilder/result" bindingOperator="DESTROY"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupOrCreateAction" comment="LookupOrCreateAction" outgoing="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.3" incoming="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.8">
          <storyPattern comment="LookupOrCreateAction">
            <objectVariable name="action" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//NodeDeletion"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupAction">
                <ownedParameterBindings parameter="//ActionBuilder/lookupAction/node">
                  <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RedNodeDeletionBuilder/buildAction/node"/>
                </ownedParameterBindings>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.2"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupControlFlowVariable" comment="LookupControlFlowVariable" outgoing="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.4" incoming="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.10">
          <storyPattern comment="LookupControlFlowVariable">
            <objectVariable name="variable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupControlFlowVariable">
                <ownedParameterBindings parameter="//ActionBuilder/lookupControlFlowVariable/action">
                  <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
                </ownedParameterBindings>
                <ownedParameterBindings parameter="//ActionBuilder/lookupControlFlowVariable/variableName">
                  <valueExpression xsi:type="patternExpressions:AttributeValueExpression" object="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
                  </valueExpression>
                </ownedParameterBindings>
                <ownedParameterBindings parameter="//ActionBuilder/lookupControlFlowVariable/variableType">
                  <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.1"/>
                </ownedParameterBindings>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="ValidateVariable" outgoing="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.5" incoming="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.4">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/validateVariable">
            <ownedParameterBindings parameter="//ActionBuilder/validateVariable/action">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ActionBuilder/validateVariable/variable">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ActionBuilder/validateVariable/objectVariable">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="MarkDeletion" comment="MarkDeletion" outgoing="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.6" incoming="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.5">
          <storyPattern comment="MarkDeletion">
            <objectVariable name="variable" incomingLink="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
            </objectVariable>
            <objectVariable name="action" outgoingLink="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//NodeDeletion"/>
            </objectVariable>
            <linkVariable name="destructedVariables" target="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0" source="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//NodeDeletion/destructedVariables"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.7"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllRedObjectVariables" comment="ForAllRedObjectVariables" outgoing="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.8 //RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.9" incoming="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.0 //RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.6" forEach="true">
          <storyPattern comment="ForAllRedObjectVariables">
            <objectVariable name="objectVariable" incomingLink="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingOperator.DESTROY"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingOperator"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="storyPattern" outgoingLink="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <linkVariable name="objectVariable" target="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0" source="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/objectVariable"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupVariableType" comment="LookupVariableType" outgoing="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.10" incoming="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityEdge.3">
          <storyPattern comment="LookupVariableType">
            <objectVariable name="objectVariable" outgoingLink="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="eClassifier" incomingLink="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <linkVariable name="type" target="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.1" source="//RedNodeDeletionBuilder/buildAction/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//TypedElement/type"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="lookupAction">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//NodeDeletion"/>
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <activity owningOperation="//RedNodeDeletionBuilder/lookupAction">
        <ownedActivityEdge source="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.0" target="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.5" guard="SUCCESS"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.0" target="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.1" guard="FAILURE"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.1" target="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.3" target="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.4" target="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.2"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ResultAlreadyAvailable" comment="ResultAlreadyAvailable" outgoing="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityEdge.0 //RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityEdge.1" incoming="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityEdge.3">
          <storyPattern comment="ResultAlreadyAvailable">
            <objectVariable name="result" incomingLink="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//NodeDeletion"/>
            </objectVariable>
            <objectVariable type="//RedNodeDeletionBuilder" name="this" outgoingLink="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="result" target="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0" source="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1" type="//ActionBuilder/result"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateNewNodeDeletionResult" comment="CreateNewNodeDeletionResult" outgoing="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityEdge.2" incoming="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityEdge.1">
          <storyPattern comment="CreateNewNodeDeletionResult">
            <objectVariable type="//RedNodeDeletionBuilder" name="this" outgoingLink="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable name="newResult" incomingLink="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//NodeDeletion"/>
            </objectVariable>
            <linkVariable name="result" target="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1" source="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0" type="//ActionBuilder/result" bindingOperator="CREATE"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityEdge.4">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityEdge.3"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="AddNewAction" outgoing="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityEdge.4" incoming="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityEdge.2">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/addAction">
            <ownedParameterBindings parameter="//ActionBuilder/addAction/node">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RedNodeDeletionBuilder/lookupAction/node"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ActionBuilder/addAction/newAction">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityEdge.0">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//RedNodeDeletionBuilder/lookupAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="validateVariable">
      <eParameters name="action">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
      </eParameters>
      <eParameters name="variable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
      </eParameters>
      <eParameters name="objectVariable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
      </eParameters>
      <activity owningOperation="//RedNodeDeletionBuilder/validateVariable">
        <ownedActivityEdge source="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.0" target="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.6" guard="FAILURE"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.0" target="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.1" guard="SUCCESS"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.1" target="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.2" target="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.8"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.5" target="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.9"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.6" target="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.3" guard="FAILURE"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.6" target="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.2" guard="SUCCESS"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.7" target="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.9" target="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsVariableFree" comment="IsVariableFree" outgoing="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.0 //RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.1" incoming="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.8">
          <storyPattern comment="IsVariableFree">
            <objectVariable name="variable" outgoingLink="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
            </objectVariable>
            <objectVariable name="action" incomingLink="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <linkVariable name="constructor" target="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1" source="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable/constructor"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ReportFreeVariableAsError" comment="ReportFreeVariableAsError" outgoing="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.2" incoming="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.1">
          <storyPattern comment="ReportFreeVariableAsError">
            <objectVariable name="objectVariable" incomingLink="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="report" outgoingLink="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable name="freeRedVariableError" incomingLink="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" outgoingLink="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.1" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.FREE_VAR_IS_RED"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <linkVariable name="errorMessages" target="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2" source="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
            <linkVariable name="location" target="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0" source="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ReportThisObjectDeleted" comment="ReportThisObjectDeleted" outgoing="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.3" incoming="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.6">
          <storyPattern comment="ReportThisObjectDeleted">
            <objectVariable name="objectVariable" incomingLink="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="thisObjectDeletedError" incomingLink="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1" outgoingLink="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidatoinResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.THIS_OBJECT_DELETED"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="report" outgoingLink="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <linkVariable name="location" target="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" source="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
            <linkVariable name="errorMessages" target="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1" source="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.5"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.2"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="InitThisObject" comment="InitThisObject" outgoing="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.4" incoming="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.7">
          <storyPattern comment="InitThisObject">
            <objectVariable type="//RedNodeDeletionBuilder" name="this" bindingState="BOUND"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsThisObjectDeleted" comment="IsThisObjectDeleted" outgoing="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.5 //RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.6" incoming="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.0">
          <storyPattern comment="IsThisObjectDeleted">
            <objectVariable name="variable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="&quot;this&quot;"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable/name"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.7"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.3"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="InitValidationReport" comment="InitValidationReport" outgoing="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.8" incoming="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityEdge.4">
          <storyPattern comment="InitValidationReport">
            <objectVariable type="//ScopeValidator" name="scopeValidator" outgoingLink="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupScopeValidator">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
            <objectVariable name="report" incomingLink="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <linkVariable name="validationReport" target="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.1" source="//RedNodeDeletionBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0" type="//ScopeValidator/validationReport"/>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="NacPatternBuilder" eSuperTypes="//RegularPatternInvocationBuilder">
    <eOperations xsi:type="activities:MoflonEOperation" name="analyzeDependencies">
      <eParameters name="invocationBuilder" eType="//PatternInvocationBuilder"/>
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <activity owningOperation="//NacPatternBuilder/analyzeDependencies">
        <ownedActivityEdge source="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.0" target="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.2" guard="EACH_TIME"/>
        <ownedActivityEdge source="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.0" target="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.1" guard="END"/>
        <ownedActivityEdge source="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.2" target="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3" target="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.4" target="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllNegativeObjectVariables" comment="ForAllNegativeObjectVariables" outgoing="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.0 //NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.1" incoming="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.2 //NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.4" forEach="true">
          <storyPattern comment="ForAllNegativeObjectVariables">
            <objectVariable name="storyPattern" outgoingLink="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <objectVariable name="objectVariable" incomingLink="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingOperator.CHECK_ONLY"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingOperator"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingSemantics.NEGATIVE"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingSemantics"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <linkVariable name="objectVariable" target="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/objectVariable"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.1"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HandleAttributeConstraints" outgoing="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.2" incoming="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.0">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/exploreAttributeConstraints">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/invocationBuilder">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//NacPatternBuilder/analyzeDependencies/invocationBuilder"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/expressionExplorer">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.2"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/objectVariable">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//NacPatternBuilder/analyzeDependencies/pattern"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.3"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="Init" comment="Init" outgoing="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.4" incoming="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.3">
          <storyPattern comment="Init">
            <objectVariable type="//NacPatternBuilder" name="this" outgoingLink="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable name="body" outgoingLink="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <objectVariable type="//ExpressionExplorer" name="expressionExplorer" incomingLink="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0"/>
            <objectVariable name="pattern" incomingLink="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <linkVariable name="expressionExplorer" target="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.2" source="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0" type="//PatternInvocationBuilder/expressionExplorer"/>
            <linkVariable name="header" target="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.3" source="//NacPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/header"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="attachToResource">
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <eParameters name="nacPattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="buildPatternContent">
      <eParameters name="invocation">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//RegularPatternInvocation"/>
      </eParameters>
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
      <activity owningOperation="//NacPatternBuilder/buildPatternContent">
        <ownedActivityEdge source="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.0" target="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.1" target="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.2" target="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4" target="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.3" guard="END"/>
        <ownedActivityEdge source="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4" target="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.2" guard="EACH_TIME"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="Init" comment="Init" outgoing="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.1" incoming="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.0">
          <storyPattern comment="Init">
            <objectVariable type="//NacPatternBuilder" name="this" bindingState="BOUND"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="TransformPattern" outgoing="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.2" incoming="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.4">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/transformPattern">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/transformPattern/storyPattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//NacPatternBuilder/buildPatternContent/storyPattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/transformPattern/democlesPattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.2"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.3"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupNacPatterns" comment="LookupNacPatterns" outgoing="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.3 //NacPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.4" incoming="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.1 //NacPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.2" forEach="true">
          <storyPattern comment="LookupNacPatterns">
            <objectVariable name="body" outgoingLink="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0 //NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.3">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <objectVariable name="nacInvocation" incomingLink="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" outgoingLink="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="false"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1">
                    <attribute href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint/positive"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="nacPattern" incomingLink="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="invocation" outgoingLink="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//RegularPatternInvocation"/>
            </objectVariable>
            <objectVariable name="pattern" incomingLink="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.2 //NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.3">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <linkVariable name="constraints" target="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/constraints"/>
            </linkVariable>
            <linkVariable name="invokedPattern" target="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.2" source="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint/invokedPattern"/>
            </linkVariable>
            <linkVariable name="pattern" target="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.4" source="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.3">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation/pattern"/>
            </linkVariable>
            <linkVariable name="header" target="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.4" source="//NacPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/header"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="createAllBoundAdornment">
      <eType xsi:type="ecore:EDataType" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Adornment"/>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="createNacPatternNameAndIncrementCounter">
      <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EString"/>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="embedNacPattern">
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <eParameters name="patternInvocation">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint"/>
      </eParameters>
      <eParameters name="nacPattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <activity owningOperation="//NacPatternBuilder/embedNacPattern">
        <ownedActivityEdge source="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.0" target="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.4" guard="SUCCESS"/>
        <ownedActivityEdge source="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.0" target="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.2" guard="FAILURE"/>
        <ownedActivityEdge source="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.1" target="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.2" target="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.3" target="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.4" target="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.6" guard="END"/>
        <ownedActivityEdge source="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.4" target="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.5" guard="EACH_TIME"/>
        <ownedActivityEdge source="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.5" target="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.4" guard="SUCCESS"/>
        <ownedActivityEdge source="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.5" target="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.0" guard="FAILURE"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HandleLocalVariable" comment="HandleLocalVariable" outgoing="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.0 //NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.1" incoming="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.8">
          <storyPattern comment="HandleLocalVariable">
            <objectVariable name="body" outgoingLink="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <objectVariable name="localVariable" incomingLink="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0 //NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Variable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0">
                    <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
                  </rightExpression>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1">
                    <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="patternInvocation" outgoingLink="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint"/>
            </objectVariable>
            <objectVariable name="localConstraintParameter" incomingLink="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1" outgoingLink="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.2" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//ConstraintParameter"/>
            </objectVariable>
            <linkVariable name="localVariables" target="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/localVariables"/>
            </linkVariable>
            <linkVariable name="parameters" target="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.3" source="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//Constraint/parameters"/>
            </linkVariable>
            <linkVariable name="reference" target="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.3" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//ConstraintParameter/reference"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="Init" comment="Init" outgoing="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.2" incoming="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.4">
          <storyPattern comment="Init">
            <objectVariable name="pattern" incomingLink="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="body" outgoingLink="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <linkVariable name="header" target="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0" source="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/header"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="InvalidPatternInvocation" comment="InvalidPatternInvocation" outgoing="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.3" incoming="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.1">
          <storyPattern comment="InvalidPatternInvocation"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.4"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllSymbolicParametersInNacPattern" comment="ForAllSymbolicParametersInNacPattern" outgoing="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.5 //NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.6" incoming="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.0 //NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.2 //NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.3 //NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.7" forEach="true">
          <storyPattern comment="ForAllSymbolicParametersInNacPattern">
            <objectVariable name="nacVariable" incomingLink="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Variable"/>
            </objectVariable>
            <objectVariable name="nacPattern" outgoingLink="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <linkVariable name="symbolicParameters" target="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0" source="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1">
              <type href="http://gervarro.org/democles/specification.ecore#//Pattern/symbolicParameters"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HandleSymbolicParameter" comment="HandleSymbolicParameter" outgoing="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.7 //NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.8" incoming="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.6">
          <storyPattern comment="HandleSymbolicParameter">
            <objectVariable name="symbolicConstraintParameter" incomingLink="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.1" outgoingLink="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//ConstraintParameter"/>
            </objectVariable>
            <objectVariable name="patternInvocation" outgoingLink="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint"/>
            </objectVariable>
            <objectVariable name="pattern" outgoingLink="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="symbolicParameter" incomingLink="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0 //NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Variable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0">
                    <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
                  </rightExpression>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.3">
                    <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <linkVariable name="reference" target="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.3" source="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//ConstraintParameter/reference"/>
            </linkVariable>
            <linkVariable name="parameters" target="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0" source="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//Constraint/parameters"/>
            </linkVariable>
            <linkVariable name="symbolicParameters" target="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.3" source="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.2">
              <type href="http://gervarro.org/democles/specification.ecore#//Pattern/symbolicParameters"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//NacPatternBuilder/embedNacPattern/@activity/@ownedActivityEdge.5"/>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="exploreNacPatternVariables">
      <eParameters name="objectVariable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
      </eParameters>
      <eParameters name="nacPattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <activity owningOperation="//NacPatternBuilder/exploreNacPatternVariables">
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.0" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.14" guard="FAILURE"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.0" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8" guard="SUCCESS"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.1" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.4" guard="SUCCESS"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.1" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.19" guard="FAILURE"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.10" guard="SUCCESS"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.10" guard="FAILURE"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.3" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.13" guard="END"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.3" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.20" guard="EACH_TIME"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.4" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.19" guard="SUCCESS"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.4" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.19" guard="FAILURE"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.5" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.6" guard="FAILURE"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.5" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2" guard="SUCCESS"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.6" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.15"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.7" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.12"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.12"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.11" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.12" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.7" guard="EACH_TIME"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.12" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.3" guard="END"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.13" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.19"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.14" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.5" guard="FAILURE"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.14" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2" guard="SUCCESS"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.16" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.18"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.17" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.11"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.18" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.19" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.16" guard="EACH_TIME"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.19" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.9" guard="END"/>
        <ownedActivityEdge source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.20" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.3"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsObjectVariableNegative" comment="IsObjectVariableNegative" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.0 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.1" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.15">
          <storyPattern comment="IsObjectVariableNegative">
            <objectVariable name="objectVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingSemantics.NEGATIVE"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingSemantics"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HaveCompatibleTypes" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.2 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.3" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.23">
          <statementExpression xsi:type="callExpressions:MethodCallExpression">
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//BlackAndNacPatternTransformer/areCompatibleTypes/first"/>
            </ownedParameterBindings>
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.18/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//BlackAndNacPatternTransformer/areCompatibleTypes/second"/>
            </ownedParameterBindings>
            <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//BlackAndNacPatternTransformer/areCompatibleTypes"/>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateMandatoryVariable" comment="CreateMandatoryVariable" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.4 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.5" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.11 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.20">
          <storyPattern comment="CreateMandatoryVariable">
            <objectVariable name="objectVariable" outgoingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="mandatoryVariable" incomingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.3" outgoingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/constraint/emf.ecore#//EMFVariable"/>
              <attributeAssignment>
                <valueExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0">
                  <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
                </valueExpression>
                <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="nacPattern" outgoingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.2 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.3" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="eClassifier" incomingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <objectVariable name="knownMandatoryVariable" incomingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.2" bindingSemantics="NEGATIVE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Variable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
                  </rightExpression>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.4">
                    <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <linkVariable name="type" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.3" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//TypedElement/type"/>
            </linkVariable>
            <linkVariable name="eClassifier" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.3" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/constraint/emf.ecore#//EMFVariable/eClassifier"/>
            </linkVariable>
            <linkVariable name="symbolicParameters" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.4" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2">
              <type href="http://gervarro.org/democles/specification.ecore#//Pattern/symbolicParameters"/>
            </linkVariable>
            <linkVariable name="symbolicParameters" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//Pattern/symbolicParameters"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateConstraintForEachTargetLink" comment="CreateConstraintForEachTargetLink" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.6 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.7" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.17 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.26" forEach="true">
          <storyPattern comment="CreateConstraintForEachTargetLink">
            <objectVariable name="source" outgoingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="targetLink" incomingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/LinkVariable"/>
            </objectVariable>
            <objectVariable name="objectVariable" outgoingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="outgoingLink" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/outgoingLink"/>
            </linkVariable>
            <linkVariable name="incomingLink" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/incomingLink"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="AddCrossPatternInjectivityVariable" comment="AddCrossPatternInjectivityVariable" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.8 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.9" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.2">
          <storyPattern comment="AddCrossPatternInjectivityVariable">
            <objectVariable name="positiveClassifier" incomingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <objectVariable name="crossPatternInjectivityVariable" incomingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.2" outgoingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/constraint/emf.ecore#//EMFVariable"/>
              <attributeAssignment>
                <valueExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.1">
                  <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
                </valueExpression>
                <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="existingCrossPatternInjectivityVariable" incomingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.1" bindingSemantics="NEGATIVE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Variable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.1">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
                  </rightExpression>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.2">
                    <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="nacPattern" outgoingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.1 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <linkVariable name="eClassifier" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/constraint/emf.ecore#//EMFVariable/eClassifier"/>
            </linkVariable>
            <linkVariable name="symbolicParameters" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.2" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.3">
              <type href="http://gervarro.org/democles/specification.ecore#//Pattern/symbolicParameters"/>
            </linkVariable>
            <linkVariable name="symbolicParameters" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.3" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//Pattern/symbolicParameters"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsVariableRed" comment="IsVariableRed" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.10 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.11" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.19">
          <storyPattern comment="IsVariableRed">
            <objectVariable name="objectVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingOperator.DESTROY"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingOperator"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="NacAttachedToObjectVariableErroneously" comment="NacAttachedToObjectVariableErroneously" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.12" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.10">
          <storyPattern comment="NacAttachedToObjectVariableErroneously"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="RecursiveCallForTarget" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.13" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.16">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//NacPatternBuilder/exploreNacPatternVariables">
            <ownedParameterBindings parameter="//NacPatternBuilder/exploreNacPatternVariables/objectVariable">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.2"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//NacPatternBuilder/exploreNacPatternVariables/nacPattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateNegativeVariable" comment="CreateNegativeVariable" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.14" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.1">
          <storyPattern comment="CreateNegativeVariable">
            <objectVariable name="nacPatternBody" outgoingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <objectVariable name="nacPattern" incomingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="negativeVariable" incomingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0" outgoingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.2" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/constraint/emf.ecore#//EMFVariable"/>
              <attributeAssignment>
                <valueExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0">
                  <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
                </valueExpression>
                <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="objectVariable" outgoingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.3" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="nacClassifier" incomingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.2 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.3">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <linkVariable name="localVariables" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.2" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/localVariables"/>
            </linkVariable>
            <linkVariable name="header" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/header"/>
            </linkVariable>
            <linkVariable name="eClassifier" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.4" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/constraint/emf.ecore#//EMFVariable/eClassifier"/>
            </linkVariable>
            <linkVariable name="type" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.4" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.3">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//TypedElement/type"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.25"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.4 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.5"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="Init" comment="Init" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.15" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.22">
          <storyPattern comment="Init">
            <objectVariable name="patternTransformer" incomingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.11/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//NacPatternTransformer"/>
            </objectVariable>
            <objectVariable type="//NacPatternBuilder" name="this" outgoingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.11/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="patternTransformer" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.0" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.1" type="//RegularPatternInvocationBuilder/patternTransformer"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateConstraintForEachSourceLink" comment="CreateConstraintForEachSourceLink" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.16 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.17" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.13 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.14" forEach="true">
          <storyPattern comment="CreateConstraintForEachSourceLink">
            <objectVariable name="objectVariable" outgoingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="sourceLink" incomingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.0 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/LinkVariable"/>
            </objectVariable>
            <objectVariable name="target" outgoingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="outgoingLink" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/outgoingLink"/>
            </linkVariable>
            <linkVariable name="incomingLink" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/incomingLink"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupStoryPattern" comment="LookupStoryPattern" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.18" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.6">
          <storyPattern comment="LookupStoryPattern">
            <objectVariable name="storyPattern" outgoingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.13/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <objectVariable name="objectVariable" incomingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.13/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="objectVariable" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.13/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.13/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/objectVariable"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsVariableBlackAndMandatory" comment="IsVariableBlackAndMandatory" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.19 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.20" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.0">
          <storyPattern comment="IsVariableBlackAndMandatory">
            <objectVariable name="objectVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingOperator.CHECK_ONLY"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingOperator"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingSemantics.MANDATORY"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingSemantics"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.12"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupPositiveClassifier" comment="LookupPositiveClassifier" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.21" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.24">
          <storyPattern comment="LookupPositiveClassifier">
            <objectVariable name="positiveClassifier" incomingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.16/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <objectVariable name="injectivityCandidate" outgoingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.16/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="type" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.0" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//TypedElement/type"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.22"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupNegativeClassifier" comment="LookupNegativeClassifier" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.23" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.21">
          <storyPattern comment="LookupNegativeClassifier">
            <objectVariable name="negativeClassifier" incomingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.18/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <objectVariable name="objectVariable" outgoingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.18/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="type" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.18/@storyPattern/@objectVariable.0" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.18/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//TypedElement/type"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllCrossPatternInjectivityCandidates" comment="ForAllCrossPatternInjectivityCandidates" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.24 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.25" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.3 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.8 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.9 //NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.18" forEach="true">
          <storyPattern comment="ForAllCrossPatternInjectivityCandidates">
            <objectVariable name="storyPattern" outgoingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.19/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <objectVariable name="injectivityCandidate" incomingLink="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.19/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingSemantics.MANDATORY"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.19/@storyPattern/@objectVariable.1">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingSemantics"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="UNEQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingOperator.CREATE"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.19/@storyPattern/@objectVariable.1">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingOperator"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="objectVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="objectVariable" target="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.19/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.19/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/objectVariable"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="RecursiveCallForSource" outgoing="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.26" incoming="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityEdge.7">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//NacPatternBuilder/exploreNacPatternVariables">
            <ownedParameterBindings parameter="//NacPatternBuilder/exploreNacPatternVariables/objectVariable">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//NacPatternBuilder/exploreNacPatternVariables/nacPattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/exploreNacPatternVariables/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="handleRelevantObjectVariable">
      <eParameters name="invocation">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
      </eParameters>
      <eParameters name="objectVariable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
      </eParameters>
      <activity owningOperation="//NacPatternBuilder/handleRelevantObjectVariable">
        <ownedActivityEdge source="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.0" target="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1" target="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.4" guard="SUCCESS"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1" target="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3" guard="FAILURE"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.2" target="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3" target="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6" target="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.7" target="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="Init" comment="Init" outgoing="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.0" incoming="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.6">
          <storyPattern comment="Init">
            <objectVariable name="objectVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="pattern" incomingLink="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1 //NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="body" outgoingLink="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <objectVariable name="invocation" outgoingLink="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
            </objectVariable>
            <linkVariable name="header" target="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.2">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/header"/>
            </linkVariable>
            <linkVariable name="pattern" target="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.3">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation/pattern"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="AlreadyExistsAsLocalVariable" comment="AlreadyExistsAsLocalVariable" outgoing="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.1 //NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.2" incoming="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.0">
          <storyPattern comment="AlreadyExistsAsLocalVariable">
            <objectVariable name="body" outgoingLink="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <objectVariable name="existingLocalVariable" incomingLink="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/constraint/emf.ecore#//EMFVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
                  </rightExpression>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1">
                    <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="existingInvocationConstraint" incomingLink="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" outgoingLink="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="false"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2">
                    <attribute href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint/positive"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="existingNacBody" outgoingLink="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.2 //NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.3">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <objectVariable name="existingNacPattern" incomingLink="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.1 //NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.3">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <linkVariable name="constraints" target="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2" source="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/constraints"/>
            </linkVariable>
            <linkVariable name="invokedPattern" target="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.4" source="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint/invokedPattern"/>
            </linkVariable>
            <linkVariable name="localVariables" target="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.3">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/localVariables"/>
            </linkVariable>
            <linkVariable name="header" target="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.4" source="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.3">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/header"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="AttachNacPatternToResource" outgoing="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.3" incoming="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.4">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//NacPatternBuilder/attachToResource">
            <ownedParameterBindings parameter="//NacPatternBuilder/attachToResource/pattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//NacPatternBuilder/attachToResource/nacPattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.3"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateNewNacPattern" comment="CreateNewNacPattern" outgoing="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.4" incoming="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.2">
          <storyPattern comment="CreateNewNacPattern">
            <objectVariable type="//NacPatternBuilder" name="this" bindingState="BOUND"/>
            <objectVariable name="patternInvocation" incomingLink="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.2" outgoingLink="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="false"/>
                <attribute href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint/positive"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="nacPatternBody" outgoingLink="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.1" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <objectVariable name="nacPattern" incomingLink="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0 //NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.1" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//NacPatternBuilder/createNacPatternNameAndIncrementCounter">
                  <ownedParameterBindings parameter="//NacPatternBuilder/createNacPatternNameAndIncrementCounter/pattern">
                    <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
                </valueExpression>
                <attribute href="http://gervarro.org/democles/specification.ecore#//Pattern/name"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="body" outgoingLink="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <linkVariable name="invokedPattern" target="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.3" source="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint/invokedPattern"/>
            </linkVariable>
            <linkVariable name="header" target="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.3" source="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/header"/>
            </linkVariable>
            <linkVariable name="constraints" target="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.4" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/constraints"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.1"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.5"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="ExploreNegativeVariables" outgoing="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.5" incoming="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.3">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//NacPatternBuilder/exploreNacPatternVariables">
            <ownedParameterBindings parameter="//NacPatternBuilder/exploreNacPatternVariables/objectVariable">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//NacPatternBuilder/handleRelevantObjectVariable/objectVariable"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//NacPatternBuilder/exploreNacPatternVariables/nacPattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.3"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//NacPatternBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.6"/>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="handleSimpleNacPattern">
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <activity owningOperation="//NacPatternBuilder/handleSimpleNacPattern">
        <ownedActivityEdge source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.1" guard="EACH_TIME"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.11" guard="END"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.1" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.7"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.3" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.4" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.8"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.5" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.12"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.7" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.10"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.8" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.9" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.10" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.12" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.3"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForEachSimpleNacPattern" comment="ForEachSimpleNacPattern" outgoing="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.0 //NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.1" incoming="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.4 //NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.6" forEach="true">
          <storyPattern comment="ForEachSimpleNacPattern">
            <objectVariable name="source" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingSemantics.MANDATORY"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingSemantics"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="target" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingSemantics.MANDATORY"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingSemantics"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="linkVariable" incomingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.2 //NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0 //NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/LinkVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingSemantics.NEGATIVE"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.2">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/LinkVariable/bindingSemantics"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="storyPattern" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <linkVariable name="incomingLink" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.2" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/incomingLink"/>
            </linkVariable>
            <linkVariable name="outgoingLink" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.2" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/outgoingLink"/>
            </linkVariable>
            <linkVariable name="linkVariable" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.2" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.3">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/linkVariable"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateSimpleNacPattern" comment="CreateSimpleNacPattern" outgoing="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.2" incoming="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.0">
          <storyPattern comment="CreateSimpleNacPattern">
            <objectVariable name="simpleNacPattern" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//NacPatternBuilder/createNacPatternNameAndIncrementCounter">
                  <ownedParameterBindings parameter="//NacPatternBuilder/createNacPatternNameAndIncrementCounter/pattern">
                    <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//NacPatternBuilder/handleSimpleNacPattern/pattern"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0"/>
                </valueExpression>
                <attribute href="http://gervarro.org/democles/specification.ecore#//Pattern/name"/>
              </attributeAssignment>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateSourceVariable" comment="CreateSourceVariable" outgoing="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.3" incoming="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.9">
          <storyPattern comment="CreateSourceVariable">
            <objectVariable name="sourceParameter" incomingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//ConstraintParameter"/>
            </objectVariable>
            <objectVariable name="sourceVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Variable"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression">
                <ownedParameterBindings>
                  <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//NacPatternBuilder/handleSimpleNacPattern/pattern"/>
                  <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternVariableHandler/lookupVariableInPattern/pattern"/>
                </ownedParameterBindings>
                <ownedParameterBindings>
                  <valueExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
                  </valueExpression>
                  <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternVariableHandler/lookupVariableInPattern/variableName"/>
                </ownedParameterBindings>
                <ownedParameterBindings>
                  <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.5"/>
                  <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternVariableHandler/lookupVariableInPattern/variableType"/>
                </ownedParameterBindings>
                <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternVariableHandler/lookupVariableInPattern"/>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
              </bindingExpression>
            </objectVariable>
            <objectVariable name="simpleNacConstraint" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/constraint/emf.ecore#//Reference"/>
            </objectVariable>
            <objectVariable name="simpleNacPattern" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="sourceNacVariable" incomingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0 //NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.2" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.3" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/constraint/emf.ecore#//EMFVariable"/>
              <attributeAssignment>
                <valueExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0">
                  <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
                </valueExpression>
                <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="sourceType" incomingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.3" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <linkVariable name="reference" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.4" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//ConstraintParameter/reference"/>
            </linkVariable>
            <linkVariable name="parameters" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//Constraint/parameters"/>
            </linkVariable>
            <linkVariable name="symbolicParameters" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.4" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.3" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//Pattern/symbolicParameters"/>
            </linkVariable>
            <linkVariable name="eClassifier" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.5" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.4" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/constraint/emf.ecore#//EMFVariable/eClassifier"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="EmbedSimpleNacPattern" outgoing="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.4" incoming="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.12">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//NacPatternBuilder/embedNacPattern">
            <ownedParameterBindings parameter="//NacPatternBuilder/embedNacPattern/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//NacPatternBuilder/handleSimpleNacPattern/pattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//NacPatternBuilder/embedNacPattern/patternInvocation">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//NacPatternBuilder/embedNacPattern/nacPattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupSourceType" comment="LookupSourceType" outgoing="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.5" incoming="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.11">
          <storyPattern comment="LookupSourceType">
            <objectVariable name="source" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="sourceType" incomingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <linkVariable name="type" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//TypedElement/type"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="Init" comment="Init" outgoing="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.6" incoming="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.10">
          <storyPattern comment="Init">
            <objectVariable type="//NacPatternBuilder" name="this" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable name="patternTransformer" incomingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer"/>
            </objectVariable>
            <linkVariable name="patternTransformer" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0" type="//RegularPatternInvocationBuilder/patternTransformer"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateTargetVariable" comment="CreateTargetVariable" outgoing="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.7" incoming="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.3">
          <storyPattern comment="CreateTargetVariable">
            <objectVariable name="targetType" incomingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <objectVariable name="simpleNacConstraint" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/constraint/emf.ecore#//Reference"/>
            </objectVariable>
            <objectVariable name="targetVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Variable"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression">
                <ownedParameterBindings>
                  <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//NacPatternBuilder/handleSimpleNacPattern/pattern"/>
                  <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternVariableHandler/lookupVariableInPattern/pattern"/>
                </ownedParameterBindings>
                <ownedParameterBindings>
                  <valueExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
                  </valueExpression>
                  <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternVariableHandler/lookupVariableInPattern/variableName"/>
                </ownedParameterBindings>
                <ownedParameterBindings>
                  <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0"/>
                  <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternVariableHandler/lookupVariableInPattern/variableType"/>
                </ownedParameterBindings>
                <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternVariableHandler/lookupVariableInPattern"/>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
              </bindingExpression>
            </objectVariable>
            <objectVariable name="targetNacVariable" incomingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.2 //NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.3" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.1" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/constraint/emf.ecore#//EMFVariable"/>
              <attributeAssignment>
                <valueExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1">
                  <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
                </valueExpression>
                <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="targetParameter" incomingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.2" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//ConstraintParameter"/>
            </objectVariable>
            <objectVariable name="simpleNacPattern" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.3" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <linkVariable name="parameters" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.4" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//Constraint/parameters"/>
            </linkVariable>
            <linkVariable name="eClassifier" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.3" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/constraint/emf.ecore#//EMFVariable/eClassifier"/>
            </linkVariable>
            <linkVariable name="reference" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.3" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.4" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//ConstraintParameter/reference"/>
            </linkVariable>
            <linkVariable name="symbolicParameters" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.3" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.5" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//Pattern/symbolicParameters"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="AttachSimpleNacPatternToResource" outgoing="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.8" incoming="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.2">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//NacPatternBuilder/attachToResource">
            <ownedParameterBindings parameter="//NacPatternBuilder/attachToResource/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//NacPatternBuilder/handleSimpleNacPattern/pattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//NacPatternBuilder/attachToResource/nacPattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupTargetType" comment="LookupTargetType" outgoing="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.9" incoming="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.5">
          <storyPattern comment="LookupTargetType">
            <objectVariable name="targetType" incomingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <objectVariable name="target" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="type" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//TypedElement/type"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.10"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateConstraint" comment="CreateConstraint" outgoing="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.11" incoming="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.8">
          <storyPattern comment="CreateConstraint">
            <objectVariable name="simpleNacPattern" incomingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="simpleNacPatternBody" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.1 //NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <objectVariable name="eReference" incomingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EReference"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression">
                <ownedParameterBindings>
                  <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.2"/>
                  <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer/getEReference/linkVariable"/>
                </ownedParameterBindings>
                <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer/getEReference"/>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
              </bindingExpression>
            </objectVariable>
            <objectVariable name="simpleNacConstraint" incomingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.1" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.2" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/constraint/emf.ecore#//Reference"/>
            </objectVariable>
            <linkVariable name="header" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.0" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/header"/>
            </linkVariable>
            <linkVariable name="constraints" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.3" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/constraints"/>
            </linkVariable>
            <linkVariable name="eModelElement" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.2" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.3" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/constraint/emf.ecore#//EMFConstraint/eModelElement"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.1"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreatePatternInvocationConstraint" comment="CreatePatternInvocationConstraint" outgoing="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.12" incoming="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityEdge.7">
          <storyPattern comment="CreatePatternInvocationConstraint">
            <objectVariable name="patternInvocation" incomingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.1" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="false"/>
                <attribute href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint/positive"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="body" outgoingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.1 //NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <objectVariable name="pattern" incomingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="simpleNacPattern" incomingLink="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <linkVariable name="invokedPattern" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.3" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint/invokedPattern"/>
            </linkVariable>
            <linkVariable name="constraints" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/constraints"/>
            </linkVariable>
            <linkVariable name="header" target="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.2" source="//NacPatternBuilder/handleSimpleNacPattern/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.1">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/header"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="lookupAction">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <activity owningOperation="//NacPatternBuilder/lookupAction">
        <ownedActivityEdge source="//NacPatternBuilder/lookupAction/@activity/@ownedActivityNode.0" target="//NacPatternBuilder/lookupAction/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//NacPatternBuilder/lookupAction/@activity/@ownedActivityNode.1" target="//NacPatternBuilder/lookupAction/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//NacPatternBuilder/lookupAction/@activity/@ownedActivityNode.3" target="//NacPatternBuilder/lookupAction/@activity/@ownedActivityNode.2"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//NacPatternBuilder/lookupAction/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupParentBuilder" comment="LookupParentBuilder" outgoing="//NacPatternBuilder/lookupAction/@activity/@ownedActivityEdge.1" incoming="//NacPatternBuilder/lookupAction/@activity/@ownedActivityEdge.0">
          <storyPattern comment="LookupParentBuilder">
            <objectVariable type="//CompoundPatternInvocationBuilder" name="parent" incomingLink="//NacPatternBuilder/lookupAction/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0"/>
            <objectVariable type="//NacPatternBuilder" name="this" outgoingLink="//NacPatternBuilder/lookupAction/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="parentBuilder" target="//NacPatternBuilder/lookupAction/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0" source="//NacPatternBuilder/lookupAction/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1" type="//RegularPatternInvocationBuilder/parentBuilder"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//NacPatternBuilder/lookupAction/@activity/@ownedActivityEdge.2">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/lookupAction/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="DelegateToParent" comment="DelegateToParent" outgoing="//NacPatternBuilder/lookupAction/@activity/@ownedActivityEdge.2" incoming="//NacPatternBuilder/lookupAction/@activity/@ownedActivityEdge.1">
          <storyPattern comment="DelegateToParent">
            <objectVariable name="invocation" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/lookupAction">
                <ownedParameterBindings parameter="//PatternInvocationBuilder/lookupAction/node">
                  <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//NacPatternBuilder/lookupAction/node"/>
                </ownedParameterBindings>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/lookupAction/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="postprocessPatternInterface">
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
      <activity owningOperation="//NacPatternBuilder/postprocessPatternInterface">
        <ownedActivityEdge source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.0" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.1" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.3" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.7"/>
        <ownedActivityEdge source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.6" guard="END"/>
        <ownedActivityEdge source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.7" guard="EACH_TIME"/>
        <ownedActivityEdge source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.5" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.7" guard="FAILURE"/>
        <ownedActivityEdge source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.5" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.3" guard="SUCCESS"/>
        <ownedActivityEdge source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.7" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.5" guard="EACH_TIME"/>
        <ownedActivityEdge source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.7" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.0" guard="END"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="EmbedNacPattern" outgoing="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.0" incoming="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.9">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//NacPatternBuilder/embedNacPattern">
            <ownedParameterBindings parameter="//NacPatternBuilder/embedNacPattern/pattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//NacPatternBuilder/embedNacPattern/patternInvocation">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//NacPatternBuilder/embedNacPattern/nacPattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.3"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.1"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="Init" comment="Init" outgoing="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.2" incoming="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.1">
          <storyPattern comment="Init">
            <objectVariable name="pattern" incomingLink="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable type="//RegularPatternInvocationBuilder" name="invocationBuilder" outgoingLink="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/getPatternInvocationBuilder">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.3"/>
              </bindingExpression>
            </objectVariable>
            <objectVariable name="invocation" incomingLink="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" outgoingLink="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
            </objectVariable>
            <objectVariable type="//NacPatternBuilder" name="this" outgoingLink="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.2" bindingState="BOUND"/>
            <objectVariable type="//ExpressionExplorer" name="expressionExplorer" incomingLink="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.2"/>
            <linkVariable name="result" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2" source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1" type="//ActionBuilder/result"/>
            <linkVariable name="pattern" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation/pattern"/>
            </linkVariable>
            <linkVariable name="expressionExplorer" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.4" source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.3" type="//PatternInvocationBuilder/expressionExplorer"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HandleAttributeConstraints" outgoing="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.3" incoming="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.7">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/exploreAttributeConstraints">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/invocationBuilder">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.3"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/expressionExplorer">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.4"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/objectVariable">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/pattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.3"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllNacPatterns" comment="ForAllNacPatterns" outgoing="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.4 //NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.5" incoming="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.0 //NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.2" forEach="true">
          <storyPattern comment="ForAllNacPatterns">
            <objectVariable name="nacPatternInvocation" incomingLink="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.1" outgoingLink="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="false"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0">
                    <attribute href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint/positive"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="nacPattern" incomingLink="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="body" outgoingLink="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.1 //NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <objectVariable name="pattern" incomingLink="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <linkVariable name="invokedPattern" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1" source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint/invokedPattern"/>
            </linkVariable>
            <linkVariable name="constraints" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0" source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.2">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/constraints"/>
            </linkVariable>
            <linkVariable name="header" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.3" source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.2">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/header"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="BelongsToNacPattern" comment="BelongsToNacPattern" outgoing="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.6 //NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.7" incoming="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.8">
          <storyPattern comment="BelongsToNacPattern">
            <objectVariable name="nacPattern" incomingLink="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="nacBody" outgoingLink="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.1 //NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <objectVariable name="localVariable" incomingLink="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Variable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
                  </rightExpression>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.2">
                    <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <linkVariable name="header" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0" source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/header"/>
            </linkVariable>
            <linkVariable name="localVariables" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.2" source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/localVariables"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.4"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllNegativeObjectVariables" comment="ForAllNegativeObjectVariables" outgoing="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.8 //NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.9" incoming="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.3 //NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.5 //NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.6" forEach="true">
          <storyPattern comment="ForAllNegativeObjectVariables">
            <objectVariable name="objectVariable" incomingLink="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingOperator.CHECK_ONLY"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingOperator"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingSemantics.NEGATIVE"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingSemantics"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="storyPattern" outgoingLink="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <linkVariable name="objectVariable" target="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0" source="//NacPatternBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/objectVariable"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="nacPatternCounter" ordered="false" lowerBound="1">
      <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EInt"/>
    </eStructuralFeatures>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="RedPatternBuilder" eSuperTypes="//RegularPatternInvocationBuilder">
    <eOperations xsi:type="activities:MoflonEOperation" name="validateVariable">
      <eParameters name="action">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
      </eParameters>
      <eParameters name="variable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
      </eParameters>
      <eParameters name="objectVariable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
      </eParameters>
      <activity owningOperation="//RedPatternBuilder/validateVariable">
        <ownedActivityEdge source="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.0" target="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.1" target="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.3" guard="FAILURE"/>
        <ownedActivityEdge source="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.1" target="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.0" guard="SUCCESS"/>
        <ownedActivityEdge source="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.4" target="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.1"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ReportFreeVariablesAsError" comment="ReportFreeVariablesAsError" outgoing="//RedPatternBuilder/validateVariable/@activity/@ownedActivityEdge.0" incoming="//RedPatternBuilder/validateVariable/@activity/@ownedActivityEdge.2">
          <storyPattern comment="ReportFreeVariablesAsError">
            <objectVariable type="//ScopeValidator" name="scopeValidator" outgoingLink="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupScopeValidator">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.2"/>
              </bindingExpression>
            </objectVariable>
            <objectVariable name="objectVariable" incomingLink="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable type="//RedPatternBuilder" name="this" bindingState="BOUND"/>
            <objectVariable name="report" incomingLink="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" outgoingLink="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable name="errorVarNotBound" incomingLink="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1" outgoingLink="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.2" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.FREE_VAR_IS_RED"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <linkVariable name="validationReport" target="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.3" source="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0" type="//ScopeValidator/validationReport"/>
            <linkVariable name="errorMessages" target="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.4" source="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.3" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
            <linkVariable name="location" target="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1" source="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.4" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsVariableFree" comment="IsVariableFree" outgoing="//RedPatternBuilder/validateVariable/@activity/@ownedActivityEdge.1 //RedPatternBuilder/validateVariable/@activity/@ownedActivityEdge.2" incoming="//RedPatternBuilder/validateVariable/@activity/@ownedActivityEdge.3">
          <storyPattern comment="IsVariableFree">
            <objectVariable name="action" incomingLink="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <objectVariable name="variable" outgoingLink="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
            </objectVariable>
            <linkVariable name="constructor" target="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0" source="//RedPatternBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable/constructor"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RedPatternBuilder/validateVariable/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RedPatternBuilder/validateVariable/@activity/@ownedActivityEdge.1"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RedPatternBuilder/validateVariable/@activity/@ownedActivityEdge.3"/>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="analyzeDependencies">
      <eParameters name="patternInvocationBuilder" eType="//PatternInvocationBuilder"/>
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <activity owningOperation="//RedPatternBuilder/analyzeDependencies">
        <ownedActivityEdge source="//RedPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.0" target="//RedPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//RedPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.1" target="//RedPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.2"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RedPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ActivityNode1" comment="ActivityNode1" outgoing="//RedPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.1" incoming="//RedPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.0">
          <storyPattern comment="ActivityNode1"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RedPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.1"/>
      </activity>
    </eOperations>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="BindingAndBlackPatternBuilder" eSuperTypes="//CompoundPatternInvocationBuilder">
    <eOperations xsi:type="activities:MoflonEOperation" name="analyzeDependencies">
      <eParameters name="patternInvocationBuilder" eType="//PatternInvocationBuilder"/>
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <activity owningOperation="//BindingAndBlackPatternBuilder/analyzeDependencies">
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.0" target="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.1" target="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3" target="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.2" guard="END"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3" target="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.0" guard="EACH_TIME"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="DelegateToChildBuilder" outgoing="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.0" incoming="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.3">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/analyzeDependencies">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/analyzeDependencies/patternInvocationBuilder">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/analyzeDependencies/storyPattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/analyzeDependencies/storyPattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/analyzeDependencies/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/analyzeDependencies/pattern"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.1"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.2"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupChildBuilders" comment="LookupChildBuilders" outgoing="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.2 //BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.3" incoming="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.0 //BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.1" forEach="true">
          <storyPattern comment="LookupChildBuilders">
            <objectVariable type="//BindingAndBlackPatternBuilder" name="this" incomingLink="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable type="//RegularPatternInvocationBuilder" name="childBuilder" outgoingLink="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0"/>
            <linkVariable name="parentBuilder" target="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" source="//BindingAndBlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" type="//RegularPatternInvocationBuilder/parentBuilder"/>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="buildAction">
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <activity owningOperation="//BindingAndBlackPatternBuilder/buildAction">
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.0" target="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.2" target="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.9"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.3" target="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.6"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.4" target="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.8"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.5" target="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.3" guard="FAILURE"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.5" target="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.0" guard="SUCCESS"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.8" target="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.5" guard="FAILURE"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.8" target="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.0" guard="SUCCESS"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.9" target="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.7" guard="FAILURE"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.9" target="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.4" guard="SUCCESS"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="InvokeBuildActionInSuperclass" outgoing="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.0" incoming="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.5 //BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.7">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//BindingAndBlackPatternBuilder/buildActionInSuperClass">
            <ownedParameterBindings parameter="//BindingAndBlackPatternBuilder/buildActionInSuperClass/node">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/buildAction/node"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.1"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="BuildBlackPatternWithoutBindingExpression" outgoing="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.2" incoming="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.4">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/buildAction">
            <ownedParameterBindings parameter="//ActionBuilder/buildAction/node">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/buildAction/node"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupBlackPatternBuilder" comment="LookupBlackPatternBuilder" outgoing="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.3" incoming="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.9">
          <storyPattern comment="LookupBlackPatternBuilder">
            <objectVariable type="//BindingAndBlackPatternBuilder" name="this" outgoingLink="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable type="//BlackPatternBuilder" name="blackPatternBuilder" incomingLink="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0"/>
            <linkVariable name="blackPatternBuilder" target="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1" source="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0" type="//BindingAndBlackPatternBuilder/blackPatternBuilder"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HasBindingExpressionInRedVariable" comment="HasBindingExpressionInRedVariable" outgoing="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.4 //BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.5" incoming="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.6">
          <storyPattern comment="HasBindingExpressionInRedVariable">
            <objectVariable name="storyPattern" outgoingLink="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <objectVariable name="redVariable" incomingLink="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" outgoingLink="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingOperator.DESTROY"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingOperator"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="redBindingExpression" incomingLink="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//expressions/Expression"/>
            </objectVariable>
            <linkVariable name="objectVariable" target="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" source="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/objectVariable"/>
            </linkVariable>
            <linkVariable name="bindingExpression" target="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.2" source="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingExpression"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.2"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.8"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HasBindingExpressionInBlackVariable" comment="HasBindingExpressionInBlackVariable" outgoing="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.6 //BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.7" incoming="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.3">
          <storyPattern comment="HasBindingExpressionInBlackVariable">
            <objectVariable name="storyPattern" outgoingLink="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <objectVariable name="blackVariable" incomingLink="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0" outgoingLink="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingOperator.CHECK_ONLY"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingOperator"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="blackBindingExpression" incomingLink="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//expressions/Expression"/>
            </objectVariable>
            <linkVariable name="objectVariable" target="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1" source="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/objectVariable"/>
            </linkVariable>
            <linkVariable name="bindingExpression" target="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.2" source="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingExpression"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupStoryPattern" comment="LookupStoryPattern" outgoing="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.8 //BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.9" incoming="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityEdge.1">
          <storyPattern comment="LookupStoryPattern">
            <objectVariable name="node" outgoingLink="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <objectVariable name="storyPattern" outgoingLink="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <objectVariable name="storyNode" incomingLink="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.0 //BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/StoryNode"/>
            </objectVariable>
            <linkVariable name="origin" target="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.2" source="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/origin"/>
            </linkVariable>
            <linkVariable name="storyNode" target="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.2" source="//BindingAndBlackPatternBuilder/buildAction/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/storyNode"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="buildActionInSuperClass">
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="buildPatternContent">
      <eParameters name="invocation">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//RegularPatternInvocation"/>
      </eParameters>
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="calculateNextAdornment">
      <eType xsi:type="ecore:EDataType" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Adornment"/>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <eParameters name="adornment">
        <eType xsi:type="ecore:EDataType" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Adornment"/>
      </eParameters>
      <eParameters name="patternInvocationConstraint">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint"/>
      </eParameters>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="calculatePatternInvocationAdornment">
      <eType xsi:type="ecore:EDataType" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Adornment"/>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <eParameters name="adornment">
        <eType xsi:type="ecore:EDataType" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Adornment"/>
      </eParameters>
      <eParameters name="patternInvocationConstraint">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint"/>
      </eParameters>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="constructEmbeddedPattern">
      <eParameters name="patternBuilder" eType="//RegularPatternInvocationBuilder"/>
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <activity owningOperation="//BindingAndBlackPatternBuilder/constructEmbeddedPattern">
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.0" target="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.7"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.1" target="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.10"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.2" target="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.3" target="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.4" target="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.5" target="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.6" guard="EACH_TIME"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.5" target="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.4" guard="END"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.6" target="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.5" guard="FAILURE"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.6" target="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.0" guard="SUCCESS"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.7" target="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.8" target="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.9" target="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.8"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupObjectVariableType" comment="LookupObjectVariableType" outgoing="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.0" incoming="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.8">
          <storyPattern comment="LookupObjectVariableType">
            <objectVariable name="type" incomingLink="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <objectVariable name="objectVariable" outgoingLink="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="type" target="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0" source="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//TypedElement/type"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="MergePatternTransformationResult" outgoing="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.1" incoming="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.2">
          <statementExpression xsi:type="callExpressions:MethodCallExpression">
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/merge/otherReport"/>
            </ownedParameterBindings>
            <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/merge"/>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="BuildPatternContent" comment="BuildPatternContent" outgoing="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.2" incoming="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.4">
          <storyPattern comment="BuildPatternContent">
            <objectVariable name="patternTransformationResult" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression">
                <ownedParameterBindings>
                  <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/storyPattern"/>
                  <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer/transform/storyPattern"/>
                </ownedParameterBindings>
                <ownedParameterBindings>
                  <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/pattern"/>
                  <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer/transform/pattern"/>
                </ownedParameterBindings>
                <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer/transform"/>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupPatternTransformer" comment="LookupPatternTransformer" outgoing="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.3" incoming="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.10">
          <storyPattern comment="LookupPatternTransformer">
            <objectVariable name="patternTransformer" incomingLink="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer"/>
            </objectVariable>
            <objectVariable type="//RegularPatternInvocationBuilder" name="patternBuilder" outgoingLink="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="patternTransformer" target="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" source="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" type="//RegularPatternInvocationBuilder/patternTransformer"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="AnalyzeDependencies" outgoing="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.4" incoming="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.6">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/analyzeDependencies">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/analyzeDependencies/patternInvocationBuilder">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/patternBuilder"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/analyzeDependencies/storyPattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/storyPattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/analyzeDependencies/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/pattern"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllObjectVariables" comment="ForAllObjectVariables" outgoing="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.5 //BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.6" incoming="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.3 //BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.7 //BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.9" forEach="true">
          <storyPattern comment="ForAllObjectVariables">
            <objectVariable name="objectVariable" incomingLink="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="storyPattern" outgoingLink="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <linkVariable name="objectVariable" target="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0" source="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/objectVariable"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="IsRelevantVariable" outgoing="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.7 //BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.8" incoming="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.5">
          <statementExpression xsi:type="callExpressions:MethodCallExpression">
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer/isVariableToAdd/objectVariable"/>
            </ownedParameterBindings>
            <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer/isVariableToAdd"/>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="CreatePatternVariable" outgoing="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.9" incoming="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.0">
          <statementExpression xsi:type="callExpressions:MethodCallExpression">
            <ownedParameterBindings>
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/pattern"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternVariableHandler/lookupVariableInPattern/pattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:AttributeValueExpression" object="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0">
                <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
              </valueExpression>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternVariableHandler/lookupVariableInPattern/variableName"/>
            </ownedParameterBindings>
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternVariableHandler/lookupVariableInPattern/variableType"/>
            </ownedParameterBindings>
            <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternVariableHandler/lookupVariableInPattern"/>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupValidationReport" comment="LookupValidationReport" outgoing="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.10" incoming="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.11">
          <storyPattern comment="LookupValidationReport">
            <objectVariable name="report" incomingLink="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable type="//BindingAndBlackPatternBuilder" name="this" bindingState="BOUND"/>
            <objectVariable type="//ScopeValidator" name="scopeValidator" outgoingLink="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/lookupScopeValidator">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1"/>
              </bindingExpression>
            </objectVariable>
            <linkVariable name="validationReport" target="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0" source="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.2" type="//ScopeValidator/validationReport"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.11"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/@activity/@ownedActivityEdge.1"/>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="isVariableToAdd">
      <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
      <eParameters name="objectVariable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
      </eParameters>
      <activity owningOperation="//BindingAndBlackPatternBuilder/isVariableToAdd">
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityNode.0" target="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityNode.2" guard="FAILURE"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityNode.0" target="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityNode.4" guard="SUCCESS"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityNode.1" target="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityNode.3" target="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityNode.0"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="DelegateToBlackPatternBuilder" outgoing="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityEdge.0 //BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityEdge.1" incoming="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityEdge.3">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/isVariableToAdd">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/isVariableToAdd/objectVariable">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/isVariableToAdd/objectVariable"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityEdge.2"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityEdge.0">
          <returnValue xsi:type="expressions:LiteralExpression" value="false"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupBlackPatternBuilder" comment="LookupBlackPatternBuilder" outgoing="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityEdge.3" incoming="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityEdge.2">
          <storyPattern comment="LookupBlackPatternBuilder">
            <objectVariable type="//BlackPatternBuilder" name="blackPatternBuilder" incomingLink="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0"/>
            <objectVariable type="//BindingAndBlackPatternBuilder" name="this" outgoingLink="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="blackPatternBuilder" target="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" source="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" type="//BindingAndBlackPatternBuilder/blackPatternBuilder"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BindingAndBlackPatternBuilder/isVariableToAdd/@activity/@ownedActivityEdge.1">
          <returnValue xsi:type="expressions:LiteralExpression" value="true"/>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="processChildPattern">
      <eType xsi:type="ecore:EDataType" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Adornment"/>
      <eParameters name="childPatternBuilder" eType="//RegularPatternInvocationBuilder"/>
      <eParameters name="invocation">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//RegularPatternInvocation"/>
      </eParameters>
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
      <eParameters name="adornment">
        <eType xsi:type="ecore:EDataType" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Adornment"/>
      </eParameters>
      <activity owningOperation="//BindingAndBlackPatternBuilder/processChildPattern">
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.0" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.6"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.2" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.10"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.3" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.5" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11" guard="EACH_TIME"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.5" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.14" guard="END"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.6" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.7" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.8"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.8" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.12"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.9" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.10" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.9"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.12" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.13" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.7" guard="FAILURE"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.13" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.4" guard="SUCCESS"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.14" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.13"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupPatternBody" comment="LookupPatternBody" outgoing="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.1" incoming="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.0">
          <storyPattern comment="LookupPatternBody">
            <objectVariable type="//BindingAndBlackPatternBuilder" name="this" bindingState="BOUND"/>
            <objectVariable name="node" outgoingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <objectVariable name="patternBody" outgoingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <objectVariable name="invocation" incomingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.1" outgoingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//RegularPatternInvocation"/>
            </objectVariable>
            <objectVariable name="pattern" incomingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0 //BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <linkVariable name="pattern" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.4" source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.3">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation/pattern"/>
            </linkVariable>
            <linkVariable name="actions" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.3" source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/actions"/>
            </linkVariable>
            <linkVariable name="header" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.4" source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/header"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="AttachChildPatternToResource" outgoing="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.2" incoming="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.6">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/attachToResource">
            <ownedParameterBindings parameter="//PatternInvocationBuilder/attachToResource/node">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//PatternInvocationBuilder/attachToResource/pattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="MergePatternMatchingReport" outgoing="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.3" incoming="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.12">
          <statementExpression xsi:type="callExpressions:MethodCallExpression">
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/merge/otherReport"/>
            </ownedParameterBindings>
            <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/merge"/>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.3 //BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.14">
          <returnValue xsi:type="callExpressions:MethodCallExpression" callee="//BindingAndBlackPatternBuilder/calculateNextAdornment">
            <ownedParameterBindings parameter="//BindingAndBlackPatternBuilder/calculateNextAdornment/pattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//BindingAndBlackPatternBuilder/calculateNextAdornment/adornment">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/processChildPattern/adornment"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//BindingAndBlackPatternBuilder/calculateNextAdornment/patternInvocationConstraint">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.2"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
          </returnValue>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllChildParameters" comment="ForAllChildParameters" outgoing="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.4 //BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.5" incoming="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.9 //BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.11" forEach="true">
          <storyPattern comment="ForAllChildParameters">
            <objectVariable name="childPattern" outgoingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="childParameter" incomingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Variable"/>
            </objectVariable>
            <linkVariable name="symbolicParameters" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0">
              <type href="http://gervarro.org/democles/specification.ecore#//Pattern/symbolicParameters"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateChildPattern" comment="CreateChildPattern" outgoing="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.6" incoming="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.1">
          <storyPattern comment="CreateChildPattern">
            <objectVariable name="childPattern" incomingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/calculatePatternName">
                  <ownedParameterBindings parameter="//PatternInvocationBuilder/calculatePatternName/node">
                    <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1"/>
                  </ownedParameterBindings>
                  <target xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/processChildPattern/childPatternBuilder"/>
                </valueExpression>
                <attribute href="http://gervarro.org/democles/specification.ecore#//Pattern/name"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="childPatternBody" outgoingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <linkVariable name="header" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0" source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/header"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="GenerateSearchPlan" comment="GenerateSearchPlan" outgoing="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.7" incoming="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.13">
          <storyPattern comment="GenerateSearchPlan">
            <objectVariable name="patternMatchingReport" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternMatcher/generateSearchPlan">
                <ownedParameterBindings parameter="//PatternMatcher/generateSearchPlan/pattern">
                  <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.1"/>
                </ownedParameterBindings>
                <ownedParameterBindings parameter="//PatternMatcher/generateSearchPlan/adornment">
                  <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//BindingAndBlackPatternBuilder/calculatePatternInvocationAdornment">
                    <ownedParameterBindings parameter="//BindingAndBlackPatternBuilder/calculatePatternInvocationAdornment/pattern">
                      <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.1"/>
                    </ownedParameterBindings>
                    <ownedParameterBindings parameter="//BindingAndBlackPatternBuilder/calculatePatternInvocationAdornment/adornment">
                      <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/processChildPattern/adornment"/>
                    </ownedParameterBindings>
                    <ownedParameterBindings parameter="//BindingAndBlackPatternBuilder/calculatePatternInvocationAdornment/patternInvocationConstraint">
                      <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.2"/>
                    </ownedParameterBindings>
                    <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
                  </valueExpression>
                </ownedParameterBindings>
                <ownedParameterBindings parameter="//PatternMatcher/generateSearchPlan/isMultipleMatch">
                  <valueExpression xsi:type="callExpressions:MethodCallExpression">
                    <callee href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation/isMultipleMatch"/>
                    <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.3"/>
                  </valueExpression>
                </ownedParameterBindings>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HandlePatternMatcherReport" outgoing="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.8" incoming="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.7">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/handlePatternMatcherReport">
            <ownedParameterBindings parameter="//PatternInvocationBuilder/handlePatternMatcherReport/invocation">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/processChildPattern/invocation"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//PatternInvocationBuilder/handlePatternMatcherReport/report">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateChildPatternInvocationConstraint" comment="CreateChildPatternInvocationConstraint" outgoing="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.9" incoming="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.10">
          <storyPattern comment="CreateChildPatternInvocationConstraint">
            <objectVariable name="patternBody" outgoingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <objectVariable name="childPattern" incomingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="childPatternInvocationConstraint" incomingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.0" outgoingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.1" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="true"/>
                <attribute href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint/positive"/>
              </attributeAssignment>
            </objectVariable>
            <linkVariable name="constraints" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.2" source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/constraints"/>
            </linkVariable>
            <linkVariable name="invokedPattern" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.1" source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint/invokedPattern"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="BuildChildPattern" outgoing="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.10" incoming="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.2">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//BindingAndBlackPatternBuilder/constructEmbeddedPattern">
            <ownedParameterBindings parameter="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/patternBuilder">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/processChildPattern/childPatternBuilder"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/storyPattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/processChildPattern/storyPattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//BindingAndBlackPatternBuilder/constructEmbeddedPattern/pattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateConstraintParameter" comment="CreateConstraintParameter" outgoing="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.11" incoming="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.4">
          <storyPattern comment="CreateConstraintParameter">
            <objectVariable name="constraintParameter" incomingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11/@storyPattern/@linkVariable.2" outgoingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//ConstraintParameter"/>
            </objectVariable>
            <objectVariable name="pattern" outgoingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="childPatternInvocationConstraint" outgoingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint"/>
            </objectVariable>
            <objectVariable name="symbolicVariable" incomingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11/@storyPattern/@linkVariable.0 //BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Variable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="patternExpressions:AttributeValueExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1">
                    <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
                  </rightExpression>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.3">
                    <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <linkVariable name="reference" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.3" source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//ConstraintParameter/reference"/>
            </linkVariable>
            <linkVariable name="symbolicParameters" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.3" source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.1">
              <type href="http://gervarro.org/democles/specification.ecore#//Pattern/symbolicParameters"/>
            </linkVariable>
            <linkVariable name="parameters" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.0" source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//Constraint/parameters"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupValidationReport" comment="LookupValidationReport" outgoing="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.12" incoming="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.8">
          <storyPattern comment="LookupValidationReport">
            <objectVariable name="report" incomingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable type="//ScopeValidator" name="scopeValidator" outgoingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupScopeValidator">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
            <linkVariable name="validationReport" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0" source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.1" type="//ScopeValidator/validationReport"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HasErrors" outgoing="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.13 //BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.14" incoming="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.15">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/hasErrors">
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupPatternMatcher" comment="LookupPatternMatcher" outgoing="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.15" incoming="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityEdge.5">
          <storyPattern comment="LookupPatternMatcher">
            <objectVariable type="//PatternMatcher" name="patternMatcher" incomingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.14/@storyPattern/@linkVariable.0"/>
            <objectVariable type="//RegularPatternInvocationBuilder" name="childPatternBuilder" outgoingLink="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.14/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="patternMatcher" target="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.0" source="//BindingAndBlackPatternBuilder/processChildPattern/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.1" type="//PatternInvocationBuilder/patternMatcher"/>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="validateVariable">
      <eParameters name="action">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
      </eParameters>
      <eParameters name="variable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
      </eParameters>
      <eParameters name="objectVariable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
      </eParameters>
      <activity owningOperation="//BindingAndBlackPatternBuilder/validateVariable">
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.0" target="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.2" target="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.3" target="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.4" guard="FAILURE"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.3" target="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.2" guard="SUCCESS"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.4" target="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.3" guard="EACH_TIME"/>
        <ownedActivityEdge source="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.4" target="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.1" guard="END"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityEdge.5"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="InvokeDelegate" outgoing="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityEdge.1" incoming="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityEdge.3">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/validateVariable">
            <ownedParameterBindings parameter="//ActionBuilder/validateVariable/action">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/validateVariable/action"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ActionBuilder/validateVariable/variable">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/validateVariable/variable"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ActionBuilder/validateVariable/objectVariable">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/validateVariable/objectVariable"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="IsVariableRelevant" outgoing="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityEdge.2 //BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityEdge.3" incoming="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityEdge.4">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/isVariableToAdd">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/isVariableToAdd/objectVariable">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BindingAndBlackPatternBuilder/validateVariable/objectVariable"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllChildBuilders" comment="ForAllChildBuilders" outgoing="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityEdge.4 //BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityEdge.5" incoming="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityEdge.0 //BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityEdge.1 //BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityEdge.2" forEach="true">
          <storyPattern comment="ForAllChildBuilders">
            <objectVariable type="//RegularPatternInvocationBuilder" name="childBuilder" outgoingLink="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0"/>
            <objectVariable type="//BindingAndBlackPatternBuilder" name="this" incomingLink="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="parentBuilder" target="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1" source="//BindingAndBlackPatternBuilder/validateVariable/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0" type="//RegularPatternInvocationBuilder/parentBuilder"/>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EReference" name="blackPatternBuilder" lowerBound="1" eType="//BlackPatternBuilder"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="BlackPatternBuilder" eSuperTypes="//CompoundPatternInvocationBuilder">
    <eOperations xsi:type="activities:MoflonEOperation" name="analyzeDependencies">
      <eParameters name="invocationBuilder" eType="//PatternInvocationBuilder"/>
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <activity owningOperation="//BlackPatternBuilder/analyzeDependencies">
        <ownedActivityEdge source="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.0" target="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.1" target="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3" target="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.5" guard="SUCCESS"/>
        <ownedActivityEdge source="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3" target="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.2" guard="FAILURE"/>
        <ownedActivityEdge source="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.4" target="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.5" target="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.2"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="Init" comment="Init" outgoing="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.1" incoming="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.0">
          <storyPattern comment="Init">
            <objectVariable type="//BlackPatternBuilder" name="this" bindingState="BOUND"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.3 //BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.5"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupNacPatternBuilder" comment="LookupNacPatternBuilder" outgoing="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.2 //BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.3" incoming="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.4">
          <storyPattern comment="LookupNacPatternBuilder">
            <objectVariable type="//BlackPatternBuilder" name="this" incomingLink="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable type="//NacPatternBuilder" name="nacPatternBuilder" outgoingLink="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0"/>
            <linkVariable name="parentBuilder" target="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" source="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" type="//RegularPatternInvocationBuilder/parentBuilder"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="AnalyzeDependenciesInSuperclass" outgoing="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.4" incoming="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.1">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//BlackPatternBuilder/analyzeDependenciesInSuperclass">
            <ownedParameterBindings parameter="//BlackPatternBuilder/analyzeDependenciesInSuperclass/invocationBuilder">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BlackPatternBuilder/analyzeDependencies/invocationBuilder"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//BlackPatternBuilder/analyzeDependenciesInSuperclass/storyPattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BlackPatternBuilder/analyzeDependencies/storyPattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//BlackPatternBuilder/analyzeDependenciesInSuperclass/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BlackPatternBuilder/analyzeDependencies/pattern"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="AnalyzeDependenciesInNacPatternBuilder" outgoing="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.5" incoming="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityEdge.2">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/analyzeDependencies">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/analyzeDependencies/patternInvocationBuilder">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/analyzeDependencies/storyPattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BlackPatternBuilder/analyzeDependencies/storyPattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/analyzeDependencies/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BlackPatternBuilder/analyzeDependencies/pattern"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/analyzeDependencies/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="analyzeDependenciesInSuperclass">
      <eParameters name="invocationBuilder" eType="//PatternInvocationBuilder"/>
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="buildPatternContent">
      <eParameters name="invocation">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//RegularPatternInvocation"/>
      </eParameters>
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
      <activity owningOperation="//BlackPatternBuilder/buildPatternContent">
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.0" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.1" guard="SUCCESS"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.0" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.5" guard="FAILURE"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.2" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.11" guard="EACH_TIME"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.2" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.13" guard="END"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.3" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.17"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.5" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.18" guard="FAILURE"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.5" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.14" guard="SUCCESS"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.6" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.7" guard="FAILURE"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.6" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.2" guard="SUCCESS"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.9" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.10" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.8" guard="SUCCESS"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.10" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.6" guard="FAILURE"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.11" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.12"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.12" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.9"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.14" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.15" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.16"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.16" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.17" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.10"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="CheckForErrors" outgoing="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.0 //BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.1" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.4">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/hasErrors">
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllNacPatterns" comment="ForAllNacPatterns" outgoing="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.2 //BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.3" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.9 //BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.10" forEach="true">
          <storyPattern comment="ForAllNacPatterns">
            <objectVariable name="nacPattern" incomingLink="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="body" outgoingLink="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <objectVariable name="nacPatternInvocation" incomingLink="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" outgoingLink="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="false"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2">
                    <attribute href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint/positive"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <linkVariable name="constraints" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2" source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/constraints"/>
            </linkVariable>
            <linkVariable name="invokedPattern" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternInvocationConstraint/invokedPattern"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="BuildBlackPatternContent" outgoing="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.4" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.17">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//BlackPatternBuilder/buildPatternContentInSuperclass">
            <ownedParameterBindings parameter="//BlackPatternBuilder/buildPatternContentInSuperclass/invocation">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BlackPatternBuilder/buildPatternContent/invocation"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//BlackPatternBuilder/buildPatternContentInSuperclass/storyPattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BlackPatternBuilder/buildPatternContent/storyPattern"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.3"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="BuildNacPatternContent" outgoing="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.5" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.15">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/buildPatternContent">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/buildPatternContent/invocation">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BlackPatternBuilder/buildPatternContent/invocation"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/buildPatternContent/storyPattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BlackPatternBuilder/buildPatternContent/storyPattern"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupNacPatternBuilder" comment="LookupNacPatternBuilder" outgoing="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.6 //BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.7" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.1">
          <storyPattern comment="LookupNacPatternBuilder">
            <objectVariable type="//BlackPatternBuilder" name="this" incomingLink="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable type="//NacPatternBuilder" name="nacPatternBuilder" outgoingLink="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0">
              <attributeAssignment attribute="//NacPatternBuilder/nacPatternCounter">
                <valueExpression xsi:type="expressions:LiteralExpression" value="0"/>
              </attributeAssignment>
            </objectVariable>
            <linkVariable name="parentBuilder" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0" source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" type="//RegularPatternInvocationBuilder/parentBuilder"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupPatternMatcher" comment="LookupPatternMatcher" outgoing="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.8 //BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.9" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.12">
          <storyPattern comment="LookupPatternMatcher">
            <objectVariable type="//PatternMatcher" name="patternMatcher" incomingLink="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0"/>
            <objectVariable type="//BlackPatternBuilder" name="this" outgoingLink="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable type="//ScopeValidator" name="scopeValidator" outgoingLink="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/lookupScopeValidator">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
            <objectVariable name="report" incomingLink="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <linkVariable name="patternMatcher" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0" source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.1" type="//PatternInvocationBuilder/patternMatcher"/>
            <linkVariable name="validationReport" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.3" source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.2" type="//ScopeValidator/validationReport"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.8"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.11"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="MergeSearchPlanGenerationResult" outgoing="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.10" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.14">
          <statementExpression xsi:type="callExpressions:MethodCallExpression">
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/merge/otherReport"/>
            </ownedParameterBindings>
            <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/merge"/>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.3"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HasErrors" outgoing="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.11 //BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.12" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.18">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/hasErrors">
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="GenerateSearchPlanForNacPattern" comment="GenerateSearchPlanForNacPattern" outgoing="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.13" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.2">
          <storyPattern comment="GenerateSearchPlanForNacPattern">
            <objectVariable name="searchPlanResult" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternMatcher/generateSearchPlan">
                <ownedParameterBindings parameter="//PatternMatcher/generateSearchPlan/pattern">
                  <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0"/>
                </ownedParameterBindings>
                <ownedParameterBindings parameter="//PatternMatcher/generateSearchPlan/adornment">
                  <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//NacPatternBuilder/createAllBoundAdornment">
                    <ownedParameterBindings parameter="//NacPatternBuilder/createAllBoundAdornment/pattern">
                      <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0"/>
                    </ownedParameterBindings>
                    <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
                  </valueExpression>
                </ownedParameterBindings>
                <ownedParameterBindings parameter="//PatternMatcher/generateSearchPlan/isMultipleMatch">
                  <valueExpression xsi:type="expressions:LiteralExpression" value="false"/>
                </ownedParameterBindings>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HandlePatternMatcherReport" outgoing="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.14" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.13">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/handlePatternMatcherReport">
            <ownedParameterBindings parameter="//PatternInvocationBuilder/handlePatternMatcherReport/invocation">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BlackPatternBuilder/buildPatternContent/invocation"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//PatternInvocationBuilder/handlePatternMatcherReport/report">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.3"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="BuildNacPatternInterface" outgoing="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.15" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.7">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/buildPatternInterface">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/buildPatternInterface/node">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/buildPatternInterface/storyPattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BlackPatternBuilder/buildPatternContent/storyPattern"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.16"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="Init" comment="Init" outgoing="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.17" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.16">
          <storyPattern comment="Init">
            <objectVariable name="body" outgoingLink="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.16/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <objectVariable name="node" outgoingLink="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.16/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <objectVariable name="pattern" incomingLink="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.16/@storyPattern/@linkVariable.1 //BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.16/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable type="//BlackPatternBuilder" name="this" bindingState="BOUND"/>
            <objectVariable name="invocation" incomingLink="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.16/@storyPattern/@linkVariable.2" outgoingLink="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.16/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//RegularPatternInvocation"/>
            </objectVariable>
            <linkVariable name="header" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.2" source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.0">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/header"/>
            </linkVariable>
            <linkVariable name="pattern" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.2" source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.4">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation/pattern"/>
            </linkVariable>
            <linkVariable name="actions" target="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.4" source="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/actions"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="BuildAndEmbedSimpleNacPatterns" outgoing="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.18" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.5">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//NacPatternBuilder/handleSimpleNacPattern">
            <ownedParameterBindings parameter="//NacPatternBuilder/handleSimpleNacPattern/storyPattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//BlackPatternBuilder/buildPatternContent/storyPattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//NacPatternBuilder/handleSimpleNacPattern/pattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.2"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//BlackPatternBuilder/buildPatternContent/@activity/@ownedActivityEdge.6"/>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="buildPatternContentInSuperclass">
      <eParameters name="invocation">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//RegularPatternInvocation"/>
      </eParameters>
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
    </eOperations>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="ActionBuilder" abstract="true">
    <eOperations xsi:type="activities:MoflonEOperation" name="addAction">
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <eParameters name="newAction">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
      </eParameters>
      <activity owningOperation="//ActionBuilder/addAction">
        <ownedActivityEdge source="//ActionBuilder/addAction/@activity/@ownedActivityNode.0" target="//ActionBuilder/addAction/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//ActionBuilder/addAction/@activity/@ownedActivityNode.1" target="//ActionBuilder/addAction/@activity/@ownedActivityNode.2" guard="FAILURE"/>
        <ownedActivityEdge source="//ActionBuilder/addAction/@activity/@ownedActivityNode.1" target="//ActionBuilder/addAction/@activity/@ownedActivityNode.3" guard="SUCCESS"/>
        <ownedActivityEdge source="//ActionBuilder/addAction/@activity/@ownedActivityNode.2" target="//ActionBuilder/addAction/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//ActionBuilder/addAction/@activity/@ownedActivityNode.3" target="//ActionBuilder/addAction/@activity/@ownedActivityNode.4"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//ActionBuilder/addAction/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ExistsAction" comment="ExistsAction" outgoing="//ActionBuilder/addAction/@activity/@ownedActivityEdge.1 //ActionBuilder/addAction/@activity/@ownedActivityEdge.2" incoming="//ActionBuilder/addAction/@activity/@ownedActivityEdge.0">
          <storyPattern comment="ExistsAction">
            <objectVariable name="node" outgoingLink="//ActionBuilder/addAction/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <objectVariable name="action" incomingLink="//ActionBuilder/addAction/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <linkVariable name="actions" target="//ActionBuilder/addAction/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1" source="//ActionBuilder/addAction/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/actions"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="AddAsFirstAction" comment="AddAsFirstAction" outgoing="//ActionBuilder/addAction/@activity/@ownedActivityEdge.3" incoming="//ActionBuilder/addAction/@activity/@ownedActivityEdge.1">
          <storyPattern comment="AddAsFirstAction">
            <objectVariable name="node" outgoingLink="//ActionBuilder/addAction/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <objectVariable name="newAction" incomingLink="//ActionBuilder/addAction/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <linkVariable name="actions" target="//ActionBuilder/addAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1" source="//ActionBuilder/addAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/actions"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="AppendAction" comment="AppendAction" outgoing="//ActionBuilder/addAction/@activity/@ownedActivityEdge.4" incoming="//ActionBuilder/addAction/@activity/@ownedActivityEdge.2">
          <storyPattern comment="AppendAction">
            <objectVariable name="node" outgoingLink="//ActionBuilder/addAction/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0 //ActionBuilder/addAction/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <objectVariable name="lastAction" incomingLink="//ActionBuilder/addAction/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0 //ActionBuilder/addAction/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.3" outgoingLink="//ActionBuilder/addAction/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <objectVariable name="newAction" incomingLink="//ActionBuilder/addAction/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.1" outgoingLink="//ActionBuilder/addAction/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.3" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <objectVariable name="nextAction" incomingLink="//ActionBuilder/addAction/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.2" bindingSemantics="NEGATIVE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <linkVariable name="actions" target="//ActionBuilder/addAction/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" source="//ActionBuilder/addAction/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/actions"/>
            </linkVariable>
            <linkVariable name="actions" target="//ActionBuilder/addAction/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.2" source="//ActionBuilder/addAction/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/actions"/>
            </linkVariable>
            <linkVariable name="next" target="//ActionBuilder/addAction/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.3" source="//ActionBuilder/addAction/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action/next"/>
            </linkVariable>
            <linkVariable name="prev" target="//ActionBuilder/addAction/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" source="//ActionBuilder/addAction/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action/prev"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ActionBuilder/addAction/@activity/@ownedActivityEdge.3 //ActionBuilder/addAction/@activity/@ownedActivityEdge.4"/>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="buildAction">
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="lookupAction">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="lookupControlFlowVariable">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
      <eParameters name="action">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
      </eParameters>
      <eParameters name="variableName">
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EString"/>
      </eParameters>
      <eParameters name="variableType">
        <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
      </eParameters>
      <activity owningOperation="//ActionBuilder/lookupControlFlowVariable">
        <ownedActivityEdge source="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.0" target="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.6" guard="FAILURE"/>
        <ownedActivityEdge source="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.0" target="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.1" guard="SUCCESS"/>
        <ownedActivityEdge source="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.1" target="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.2" target="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.4" target="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.6" target="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.3"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="IsNull" outgoing="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityEdge.0 //ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityEdge.1" incoming="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityEdge.3">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/isNull">
            <ownedParameterBindings parameter="//ScopeValidator/isNull/variable">
              <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupControlFlowVariable">
                <ownedParameterBindings parameter="//ScopeValidator/lookupControlFlowVariable/node">
                  <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1"/>
                </ownedParameterBindings>
                <ownedParameterBindings parameter="//ScopeValidator/lookupControlFlowVariable/variableName">
                  <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ActionBuilder/lookupControlFlowVariable/variableName"/>
                </ownedParameterBindings>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.3"/>
              </valueExpression>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.3"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateNewControlFlowVariable" comment="CreateNewControlFlowVariable" outgoing="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityEdge.2" incoming="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityEdge.1">
          <storyPattern comment="CreateNewControlFlowVariable">
            <objectVariable name="scope" outgoingLink="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression">
                <callee href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/getRelevantScope"/>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1"/>
              </bindingExpression>
            </objectVariable>
            <objectVariable name="variableType" incomingLink="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <objectVariable name="newVariable" incomingLink="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" outgoingLink="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.1 //ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.2" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ActionBuilder/lookupControlFlowVariable/variableName"/>
                <attribute href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable/name"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="false"/>
                <attribute href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable/local"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="action" incomingLink="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <linkVariable name="variables" target="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2" source="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/variables"/>
            </linkVariable>
            <linkVariable name="type" target="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1" source="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable/type"/>
            </linkVariable>
            <linkVariable name="constructor" target="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.3" source="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable/constructor"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupControlFlowNode" comment="LookupControlFlowNode" outgoing="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityEdge.3" incoming="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityEdge.4">
          <storyPattern comment="LookupControlFlowNode">
            <objectVariable name="action" incomingLink="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <objectVariable name="node" outgoingLink="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <objectVariable type="//ActionBuilder" name="this" bindingState="BOUND"/>
            <objectVariable type="//ScopeValidator" name="scopeValidator" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupScopeValidator">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2"/>
              </bindingExpression>
            </objectVariable>
            <linkVariable name="actions" target="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" source="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/actions"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityEdge.5">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityEdge.4"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityEdge.2">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupControlFlowVariableInScope" comment="LookupControlFlowVariableInScope" outgoing="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityEdge.5" incoming="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityEdge.0">
          <storyPattern comment="LookupControlFlowVariableInScope">
            <objectVariable name="variable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupControlFlowVariable">
                <ownedParameterBindings parameter="//ScopeValidator/lookupControlFlowVariable/node">
                  <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1"/>
                </ownedParameterBindings>
                <ownedParameterBindings parameter="//ScopeValidator/lookupControlFlowVariable/variableName">
                  <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ActionBuilder/lookupControlFlowVariable/variableName"/>
                </ownedParameterBindings>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ActionBuilder/lookupControlFlowVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.3"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="lookupScopeValidator" eType="//ScopeValidator">
      <activity owningOperation="//ActionBuilder/lookupScopeValidator">
        <ownedActivityEdge source="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.1" target="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.2" target="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.3" target="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.4" target="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.3" guard="FAILURE"/>
        <ownedActivityEdge source="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.4" target="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.2" guard="SUCCESS"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.1">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupValidatorInParent" comment="LookupValidatorInParent" outgoing="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.1" incoming="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.4">
          <storyPattern comment="LookupValidatorInParent">
            <objectVariable type="//ScopeValidator" name="parentValidator" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupScopeValidator">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupScopeValidator" comment="LookupScopeValidator" outgoing="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.2" incoming="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.3">
          <storyPattern comment="LookupScopeValidator">
            <objectVariable type="//ActionBuilder" name="this" incomingLink="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable type="//ScopeValidator" name="validator" outgoingLink="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0"/>
            <linkVariable name="actionBuilders" target="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" source="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" type="//ScopeValidator/actionBuilders"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HasParentActionBuilder" comment="HasParentActionBuilder" outgoing="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.3 //ActionBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.4" incoming="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.0">
          <storyPattern comment="HasParentActionBuilder">
            <objectVariable type="//CompoundActionBuilder" name="parentBuilder" outgoingLink="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0"/>
            <objectVariable type="//ActionBuilder" name="this" incomingLink="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="children" target="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1" source="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0" type="//CompoundActionBuilder/children"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.2">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//ActionBuilder/lookupScopeValidator/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1"/>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="validateVariable">
      <eParameters name="action">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
      </eParameters>
      <eParameters name="variable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
      </eParameters>
      <eParameters name="objectVariable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
      </eParameters>
      <activity owningOperation="//ActionBuilder/validateVariable">
        <ownedActivityEdge source="//ActionBuilder/validateVariable/@activity/@ownedActivityNode.0" target="//ActionBuilder/validateVariable/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//ActionBuilder/validateVariable/@activity/@ownedActivityNode.1" target="//ActionBuilder/validateVariable/@activity/@ownedActivityNode.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="DoNothing" comment="DoNothing" outgoing="//ActionBuilder/validateVariable/@activity/@ownedActivityEdge.0" incoming="//ActionBuilder/validateVariable/@activity/@ownedActivityEdge.1">
          <storyPattern comment="DoNothing"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//ActionBuilder/validateVariable/@activity/@ownedActivityEdge.1"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ActionBuilder/validateVariable/@activity/@ownedActivityEdge.0"/>
      </activity>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EReference" name="validator" lowerBound="1" eType="//ScopeValidator" eOpposite="//ScopeValidator/actionBuilders"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="parent" eType="//CompoundActionBuilder" eOpposite="//CompoundActionBuilder/children"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="result">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
    </eStructuralFeatures>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="ScopeValidator">
    <eSuperTypes href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//UniformNoOperationVisitor"/>
    <eOperations xsi:type="activities:MoflonEOperation" name="analyzeLinkVariable">
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <eParameters name="linkVariable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/LinkVariable"/>
      </eParameters>
      <activity owningOperation="//ScopeValidator/analyzeLinkVariable">
        <ownedActivityEdge source="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.1" target="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.2" target="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.3" target="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.0" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.3" target="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.0" guard="SUCCESS"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityEdge.2 //ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityEdge.3"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="InitValidationReport" comment="InitValidationReport" outgoing="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityEdge.1" incoming="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityEdge.0">
          <storyPattern comment="InitValidationReport">
            <objectVariable name="report" incomingLink="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable type="//ScopeValidator" name="this" outgoingLink="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="validationReport" target="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" source="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1" type="//ScopeValidator/validationReport"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsOptionalNode" comment="IsOptionalNode" outgoing="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityEdge.2 //ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityEdge.3" incoming="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityEdge.1">
          <storyPattern comment="IsOptionalNode">
            <objectVariable name="report" outgoingLink="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable name="linkVariable" incomingLink="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/LinkVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingSemantics.OPTIONAL"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/LinkVariable/bindingSemantics"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="errorUnboundBoundInSpec" incomingLink="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.1" outgoingLink="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.OPTIONAL_VAR_FOUND"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <linkVariable name="location" target="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" source="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
            <linkVariable name="errorMessages" target="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.2" source="//ScopeValidator/analyzeLinkVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="analyzeObjectVariable">
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <eParameters name="objectVariable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
      </eParameters>
      <activity owningOperation="//ScopeValidator/analyzeObjectVariable">
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.0" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.10" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.0" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.19" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.1" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.23" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.1" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.14" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.4" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.12" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.4" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.1" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.5" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.6" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.7"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.7" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.13" guard="END"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.7" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.6" guard="EACH_TIME"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.8" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.7"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.10" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.21" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.10" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.23" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.11" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.22" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.11" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.8" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.12" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.18" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.12" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.11" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.13" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.20" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.13" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.2" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.15" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.16" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.17" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.18" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.11"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.20" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.17"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.21" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.22" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.9"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.23" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.15" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.23" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.3" guard="FAILURE"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsOptionalNode" comment="IsOptionalNode" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.0 //ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.1" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.6">
          <storyPattern comment="IsOptionalNode">
            <objectVariable name="optionalObjectVariableError" incomingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1" outgoingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.OPTIONAL_VAR_FOUND"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="objectVariable" incomingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingSemantics.OPTIONAL"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingSemantics"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="report" outgoingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <linkVariable name="location" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1" source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
            <linkVariable name="errorMessages" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0" source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HasBindingExpression" comment="HasBindingExpression" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.2 //ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.3" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.5">
          <storyPattern comment="HasBindingExpression">
            <objectVariable name="objectVariable" outgoingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="expression" incomingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//expressions/Expression"/>
            </objectVariable>
            <linkVariable name="bindingExpression" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1" source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingExpression"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.18 //ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.21"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.19 //ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.27"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsVariableUnbound" comment="IsVariableUnbound" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.4 //ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.5" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.24">
          <storyPattern comment="IsVariableUnbound">
            <objectVariable name="action" incomingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.1 //ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <objectVariable name="variable" outgoingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
            </objectVariable>
            <objectVariable name="node" outgoingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <linkVariable name="actions" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0" source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/actions"/>
            </linkVariable>
            <linkVariable name="constructor" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0" source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable/constructor"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="InitValidationReport" comment="InitValidationReport" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.6" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.20">
          <storyPattern comment="InitValidationReport">
            <objectVariable name="report" incomingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable type="//ScopeValidator" name="this" outgoingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="validationReport" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0" source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" type="//ScopeValidator/validationReport"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="CheckWhetherVariableIsAlreadyDeleted" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.7" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.9">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/checkDeletionOfBoundVariable">
            <ownedParameterBindings parameter="//ScopeValidator/checkDeletionOfBoundVariable/objectVariable">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ScopeValidator/analyzeObjectVariable/objectVariable"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ScopeValidator/checkDeletionOfBoundVariable/variable">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ScopeValidator/checkDeletionOfBoundVariable/node">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ScopeValidator/analyzeObjectVariable/node"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ScopeValidator/checkDeletionOfBoundVariable/deletionNode">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.2"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllDeletionPoint" comment="ForAllDeletionPoint" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.8 //ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.9" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.7 //ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.10" forEach="true">
          <storyPattern comment="ForAllDeletionPoint">
            <objectVariable name="variable" incomingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
            </objectVariable>
            <objectVariable name="node" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <objectVariable name="deletionNode" outgoingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <objectVariable name="action" incomingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.1" outgoingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//NodeDeletion"/>
            </objectVariable>
            <linkVariable name="destructedVariables" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0" source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.3">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//NodeDeletion/destructedVariables"/>
            </linkVariable>
            <linkVariable name="actions" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.3" source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/actions"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupDeclarationScope" comment="LookupDeclarationScope" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.10" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.14">
          <storyPattern comment="LookupDeclarationScope">
            <objectVariable name="variable" incomingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
            </objectVariable>
            <objectVariable name="declarationScope" outgoingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
            </objectVariable>
            <linkVariable name="variables" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0" source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/variables"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.25"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsNegativeNode" comment="IsNegativeNode" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.11 //ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.12" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.0">
          <storyPattern comment="IsNegativeNode">
            <objectVariable name="objectVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingSemantics.NEGATIVE"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingSemantics"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="BoundCreateVariableFound" comment="BoundCreateVariableFound" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.13 //ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.14" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.16 //ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.22">
          <storyPattern comment="BoundCreateVariableFound">
            <objectVariable name="objectVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingOperator.CREATE"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingOperator"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CheckBindingInformationOnBoundVariable" comment="CheckBindingInformationOnBoundVariable" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.15 //ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.16" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.4">
          <storyPattern comment="CheckBindingInformationOnBoundVariable">
            <objectVariable name="objectVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingState.UNBOUND"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingState"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="RedBoundVariableFound" comment="RedBoundVariableFound" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.17 //ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.18" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.8">
          <storyPattern comment="RedBoundVariableFound">
            <objectVariable name="objectVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingOperator.DESTROY"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.13/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingOperator"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.3"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="UnboundVariableMarkedAsBoundInSpecification" comment="UnboundVariableMarkedAsBoundInSpecification" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.19" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.26">
          <storyPattern comment="UnboundVariableMarkedAsBoundInSpecification">
            <objectVariable name="objectVariable" incomingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="report" outgoingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable name="errorUnboundBoundInSpec" incomingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.0" outgoingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.1" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.UNBOUND_IS_BOUND_IN_SPEC"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <linkVariable name="errorMessages" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.2" source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
            <linkVariable name="location" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.0" source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.20"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="CheckRedBoundVariable" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.21" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.23">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/checkRedBoundVariable">
            <ownedParameterBindings parameter="//ScopeValidator/checkRedBoundVariable/variable">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ScopeValidator/checkRedBoundVariable/scope">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.20/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ScopeValidator/checkRedBoundVariable/objVar">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ScopeValidator/analyzeObjectVariable/objectVariable"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="BoundVariableMarkedAsUnboundInSpecification" comment="BoundVariableMarkedAsUnboundInSpecification" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.22" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.15">
          <storyPattern comment="BoundVariableMarkedAsUnboundInSpecification">
            <objectVariable name="report" outgoingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.18/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable name="errorBoundUnboundInSpec" incomingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.18/@storyPattern/@linkVariable.1" outgoingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.18/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.BOUND_IS_UNBOUND_IN_SPEC"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="objectVariable" incomingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.18/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="location" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.18/@storyPattern/@objectVariable.2" source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.18/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
            <linkVariable name="errorMessages" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.18/@storyPattern/@objectVariable.1" source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.18/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.1"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupRelevantScope" comment="LookupRelevantScope" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.23" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.17">
          <storyPattern comment="LookupRelevantScope">
            <objectVariable name="scope" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression">
                <callee href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/getRelevantScope"/>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.1"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupControlFlowVariable" comment="LookupControlFlowVariable" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.24" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.11">
          <storyPattern comment="LookupControlFlowVariable">
            <objectVariable name="variable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupControlFlowVariable">
                <ownedParameterBindings parameter="//ScopeValidator/lookupControlFlowVariable/node">
                  <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ScopeValidator/analyzeObjectVariable/node"/>
                </ownedParameterBindings>
                <ownedParameterBindings parameter="//ScopeValidator/lookupControlFlowVariable/variableName">
                  <valueExpression xsi:type="patternExpressions:AttributeValueExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.13/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
                  </valueExpression>
                </ownedParameterBindings>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ReportGreenBoundVar" comment="ReportGreenBoundVar" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.25" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.13">
          <storyPattern comment="ReportGreenBoundVar">
            <objectVariable name="objectVariable" incomingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.22/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="report" outgoingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.22/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable name="errorGreenBoundVar" incomingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.22/@storyPattern/@linkVariable.0" outgoingLink="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.22/@storyPattern/@linkVariable.1" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.GREEN_BOUND_VAR_FOUND"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <linkVariable name="errorMessages" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.22/@storyPattern/@objectVariable.2" source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.22/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
            <linkVariable name="location" target="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.22/@storyPattern/@objectVariable.0" source="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.22/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CheckBindingInformationOnUnboundVariable" comment="CheckBindingInformationOnUnboundVariable" outgoing="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.26 //ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.27" incoming="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.2 //ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityEdge.12">
          <storyPattern comment="CheckBindingInformationOnUnboundVariable">
            <objectVariable name="objectVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingState.BOUND"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//ScopeValidator/analyzeObjectVariable/@activity/@ownedActivityNode.23/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingState"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="checkDeletionOfBoundVariable">
      <eParameters name="objectVariable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
      </eParameters>
      <eParameters name="variable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
      </eParameters>
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <eParameters name="deletionNode">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <activity owningOperation="//ScopeValidator/checkDeletionOfBoundVariable">
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.0" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.11"/>
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.1" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.2" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.13" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.2" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.6" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.3" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.4" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.11"/>
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.5" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.12"/>
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.6" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.7" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.9"/>
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.8" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.7" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.8" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.3" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.9" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.15"/>
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.10" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.11" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.8" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.11" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.5" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.14" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.8"/>
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.15" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.14" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.15" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.8" guard="FAILURE"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupRelevantDeletionScope" comment="LookupRelevantDeletionScope" outgoing="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.0" incoming="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.1">
          <storyPattern comment="LookupRelevantDeletionScope">
            <objectVariable name="relevantScope" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression">
                <callee href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/getRelevantScope"/>
                <target xsi:type="callExpressions:ParameterExpression" parameter="//ScopeValidator/checkDeletionOfBoundVariable/deletionNode"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="Init" comment="Init" outgoing="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.1" incoming="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.12">
          <storyPattern comment="Init">
            <objectVariable name="report" incomingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable type="//ScopeValidator" name="this" outgoingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable name="analyzedNode" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
              <bindingExpression xsi:type="callExpressions:ParameterExpression" parameter="//ScopeValidator/checkDeletionOfBoundVariable/node"/>
            </objectVariable>
            <linkVariable name="validationReport" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0" source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1" type="//ScopeValidator/validationReport"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsDeclarationScopeReachedWithAnalyzedNode" comment="IsDeclarationScopeReachedWithAnalyzedNode" outgoing="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.2 //ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.3" incoming="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.4">
          <storyPattern comment="IsDeclarationScopeReachedWithAnalyzedNode">
            <objectVariable name="analyzedParentScope" outgoingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
            </objectVariable>
            <objectVariable name="variable" incomingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
            </objectVariable>
            <linkVariable name="variables" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1" source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/variables"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupAnalyzedParentScope" comment="LookupAnalyzedParentScope" outgoing="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.4" incoming="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.10">
          <storyPattern comment="LookupAnalyzedParentScope">
            <objectVariable name="analyzedNode" incomingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <objectVariable name="analyzedParentScope" outgoingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
            </objectVariable>
            <linkVariable name="contents" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/contents"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="UpdateAnalyzedNodeAndReinitDeletionNodeScope" comment="UpdateAnalyzedNodeAndReinitDeletionNodeScope" outgoing="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.5" incoming="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.7">
          <storyPattern comment="UpdateAnalyzedNodeAndReinitDeletionNodeScope">
            <objectVariable name="analyzedNode" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
              <bindingExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.1"/>
            </objectVariable>
            <objectVariable name="relevantScope" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression">
                <callee href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/getRelevantScope"/>
                <target xsi:type="callExpressions:ParameterExpression" parameter="//ScopeValidator/checkDeletionOfBoundVariable/deletionNode"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ReportDeletedBoundVariableVertical" comment="ReportDeletedBoundVariableVertical" outgoing="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.6" incoming="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.14">
          <storyPattern comment="ReportDeletedBoundVariableVertical">
            <objectVariable name="report" outgoingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable name="objectVariable" incomingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="deletedBoundVariableErrorVertical" incomingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" outgoingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.1" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.BOUND_VARIABLE_ALREADY_DELETED"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
            </objectVariable>
            <linkVariable name="errorMessages" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.2" source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
            <linkVariable name="location" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupAnalyzedParentNode" comment="LookupAnalyzedParentNode" outgoing="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.7" incoming="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.3">
          <storyPattern comment="LookupAnalyzedParentNode">
            <objectVariable name="analyzedParentScope" outgoingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
            </objectVariable>
            <objectVariable name="analyzedParentNode" incomingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CompoundNode"/>
            </objectVariable>
            <linkVariable name="parent" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.1" source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/parent"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupDeletionParentNode" comment="LookupDeletionParentNode" outgoing="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.8" incoming="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.9">
          <storyPattern comment="LookupDeletionParentNode">
            <objectVariable name="deletionParentScope" outgoingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
            </objectVariable>
            <objectVariable name="deletionParentNode" incomingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.1 //ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CompoundNode"/>
            </objectVariable>
            <objectVariable name="relevantScope" outgoingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
            </objectVariable>
            <linkVariable name="contents" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.1" source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/contents"/>
            </linkVariable>
            <linkVariable name="parent" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.1" source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/parent"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsDeclarationScopeReachedWithDeletionNode" comment="IsDeclarationScopeReachedWithDeletionNode" outgoing="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.9 //ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.10" incoming="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.13 //ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.15 //ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.17">
          <storyPattern comment="IsDeclarationScopeReachedWithDeletionNode">
            <objectVariable name="relevantScope" outgoingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
            </objectVariable>
            <objectVariable name="variable" incomingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
            </objectVariable>
            <linkVariable name="variables" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1" source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/variables"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="UpdateRelevantDeletionScope" comment="UpdateRelevantDeletionScope" outgoing="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.11" incoming="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.8">
          <storyPattern comment="UpdateRelevantDeletionScope">
            <objectVariable name="relevantScope" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
              <bindingExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0"/>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.12"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="RelevantDeletionScopeReached" comment="RelevantDeletionScopeReached" outgoing="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.13 //ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.14" incoming="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.0 //ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.5">
          <storyPattern comment="RelevantDeletionScopeReached">
            <objectVariable name="relevantScope" outgoingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.11/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
            </objectVariable>
            <objectVariable name="analyzedNode" incomingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.11/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <linkVariable name="contents" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.1" source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/contents"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.6"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.2"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ReportDeletedBoundVariableHorizontal" comment="ReportDeletedBoundVariableHorizontal" outgoing="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.15" incoming="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.16">
          <storyPattern comment="ReportDeletedBoundVariableHorizontal">
            <objectVariable name="report" outgoingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.14/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable name="deletedBoundVariableErrorHorizontal" incomingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.14/@storyPattern/@linkVariable.0" outgoingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.14/@storyPattern/@linkVariable.1" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.BOUND_VARIABLE_ALREADY_DELETED"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="objectVariable" incomingLink="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.14/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="errorMessages" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.1" source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
            <linkVariable name="location" target="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.2" source="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="DeletionNodePrecedesAnalyzedNodeInSameScope" outgoing="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.16 //ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.17" incoming="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityEdge.11">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/followsInSameScope">
            <ownedParameterBindings parameter="//ScopeValidator/followsInSameScope/deletionNode">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ScopeValidator/followsInSameScope/node">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/checkDeletionOfBoundVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="checkRedBoundVariable">
      <eParameters name="variable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
      </eParameters>
      <eParameters name="scope">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
      </eParameters>
      <eParameters name="objVar">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
      </eParameters>
      <activity owningOperation="//ScopeValidator/checkRedBoundVariable">
        <ownedActivityEdge source="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.0" target="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.5" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.0" target="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.6" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.1" target="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.2" target="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.3" target="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.7" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.3" target="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.0" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.5" target="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.6" target="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.8" target="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.1"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ContainedInIfStatement" comment="ContainedInIfStatement" outgoing="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.0 //ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.1" incoming="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.5">
          <storyPattern comment="ContainedInIfStatement">
            <objectVariable name="ifStatement" incomingLink="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//IfStatement"/>
            </objectVariable>
            <objectVariable name="currentScope" outgoingLink="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
            </objectVariable>
            <linkVariable name="parent" target="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0" source="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/parent"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="InitializeCurrentScope" comment="InitializeCurrentScope" outgoing="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.2" incoming="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.8">
          <storyPattern comment="InitializeCurrentScope">
            <objectVariable name="currentScope" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
              <bindingExpression xsi:type="callExpressions:ParameterExpression" parameter="//ScopeValidator/checkRedBoundVariable/scope"/>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="UpdateCurrentScope" comment="UpdateCurrentScope" outgoing="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.3" incoming="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.7">
          <storyPattern comment="UpdateCurrentScope">
            <objectVariable name="currentScope" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
              <bindingExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0"/>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="VariableDeclarationScopeReached" comment="VariableDeclarationScopeReached" outgoing="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.4 //ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.5" incoming="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.2 //ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.3">
          <storyPattern comment="VariableDeclarationScopeReached">
            <objectVariable name="variable" incomingLink="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
            </objectVariable>
            <objectVariable name="currentScope" outgoingLink="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
            </objectVariable>
            <linkVariable name="variables" target="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" source="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/variables"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.6"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="RedBoundVariableInLoopContextError" comment="RedBoundVariableInLoopContextError" outgoing="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.6" incoming="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.0">
          <storyPattern comment="RedBoundVariableInLoopContextError">
            <objectVariable name="reportRedBoundInLoop" incomingLink="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" outgoingLink="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.1" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.RED_BOUND_VAR_IN_LOOP"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.2"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="report" incomingLink="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.2" outgoingLink="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable type="//ScopeValidator" name="this" outgoingLink="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.2" bindingState="BOUND"/>
            <objectVariable name="objVar" incomingLink="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="errorMessages" target="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0" source="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
            <linkVariable name="location" target="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.3" source="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
            <linkVariable name="validationReport" target="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" source="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.2" type="//ScopeValidator/validationReport"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupParentScope" comment="LookupParentScope" outgoing="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.7" incoming="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.1">
          <storyPattern comment="LookupParentScope">
            <objectVariable name="parentScope" outgoingLink="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
            </objectVariable>
            <objectVariable name="ifStatement" incomingLink="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//IfStatement"/>
            </objectVariable>
            <linkVariable name="contents" target="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.1" source="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/contents"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.4"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//ScopeValidator/checkRedBoundVariable/@activity/@ownedActivityEdge.8"/>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="followsInSameScope">
      <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
      <eParameters name="deletionNode">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <activity owningOperation="//ScopeValidator/followsInSameScope">
        <ownedActivityEdge source="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.0" target="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.2" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.0" target="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.1" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.2" target="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.3" target="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.5" target="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.7" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.5" target="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.4" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.7" target="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.6" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.7" target="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.3" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.8" target="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="InCommonScope" comment="InCommonScope" outgoing="//ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.0 //ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.1" incoming="//ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.8">
          <storyPattern comment="InCommonScope">
            <objectVariable name="deletionNode" incomingLink="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <objectVariable name="commonScope" outgoingLink="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0 //ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
            </objectVariable>
            <objectVariable name="node" incomingLink="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <linkVariable name="contents" target="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0" source="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/contents"/>
            </linkVariable>
            <linkVariable name="contents" target="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.2" source="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/contents"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.1">
          <returnValue xsi:type="expressions:LiteralExpression" value="false"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="InitializeAnalyzedNode" comment="InitializeAnalyzedNode" outgoing="//ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.2" incoming="//ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.0">
          <storyPattern comment="InitializeAnalyzedNode">
            <objectVariable name="analyzedNode" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
              <bindingExpression xsi:type="callExpressions:ParameterExpression" parameter="//ScopeValidator/followsInSameScope/node"/>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="UpdateAnalyzedNode" comment="UpdateAnalyzedNode" outgoing="//ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.3" incoming="//ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.7">
          <storyPattern comment="UpdateAnalyzedNode">
            <objectVariable name="analyzedNode" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
              <bindingExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0"/>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.5">
          <returnValue xsi:type="expressions:LiteralExpression" value="true"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsAnalyzedNodeDirectlyAfterDeletionNode" comment="IsAnalyzedNodeDirectlyAfterDeletionNode" outgoing="//ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.4 //ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.5" incoming="//ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.2 //ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.3">
          <storyPattern comment="IsAnalyzedNodeDirectlyAfterDeletionNode">
            <objectVariable name="analyzedNode" outgoingLink="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <objectVariable name="deletionNode" incomingLink="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <linkVariable name="prev" target="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" source="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/prev"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.6">
          <returnValue xsi:type="expressions:LiteralExpression" value="false"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupPreviousNode" comment="LookupPreviousNode" outgoing="//ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.6 //ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.7" incoming="//ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.4">
          <storyPattern comment="LookupPreviousNode">
            <objectVariable name="previousNode" incomingLink="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <objectVariable name="analyzedNode" outgoingLink="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <linkVariable name="prev" target="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0" source="//ScopeValidator/followsInSameScope/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/prev"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//ScopeValidator/followsInSameScope/@activity/@ownedActivityEdge.8"/>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="isNull">
      <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
      <eParameters name="variable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
      </eParameters>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="lookupControlFlowVariable">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <eParameters name="variableName">
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EString"/>
      </eParameters>
      <activity owningOperation="//ScopeValidator/lookupControlFlowVariable">
        <ownedActivityEdge source="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.1" target="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.7"/>
        <ownedActivityEdge source="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.2" target="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.3" target="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.7"/>
        <ownedActivityEdge source="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.5" target="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.6" target="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.4" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.6" target="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.3" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.7" target="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.6" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.7" target="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.0" guard="SUCCESS"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityEdge.7">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="InitializeCurrentScope" comment="InitializeCurrentScope" outgoing="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityEdge.0" incoming="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityEdge.1">
          <storyPattern comment="InitializeCurrentScope">
            <objectVariable name="currentScope" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
              <bindingExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0"/>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupRelevantScope" comment="LookupRelevantScope" outgoing="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityEdge.1" incoming="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityEdge.3">
          <storyPattern comment="LookupRelevantScope">
            <objectVariable name="scope" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression">
                <callee href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/getRelevantScope"/>
                <target xsi:type="callExpressions:ParameterExpression" parameter="//ScopeValidator/lookupControlFlowVariable/node"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="UpdateCurrentScope" comment="UpdateCurrentScope" outgoing="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityEdge.2" incoming="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityEdge.5">
          <storyPattern comment="UpdateCurrentScope">
            <objectVariable name="currentScope" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
              <bindingExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.1"/>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityEdge.4">
          <returnValue xsi:type="expressions:LiteralExpression" value="null"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityEdge.3"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupParentScope" comment="LookupParentScope" outgoing="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityEdge.4 //ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityEdge.5" incoming="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityEdge.6">
          <storyPattern comment="LookupParentScope">
            <objectVariable name="compoundNode" incomingLink="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.1 //ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CompoundNode"/>
            </objectVariable>
            <objectVariable name="parentScope" outgoingLink="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
            </objectVariable>
            <objectVariable name="currentScope" outgoingLink="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
            </objectVariable>
            <linkVariable name="contents" target="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0" source="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/contents"/>
            </linkVariable>
            <linkVariable name="parent" target="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0" source="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/parent"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CheckVariableInScope" comment="CheckVariableInScope" outgoing="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityEdge.6 //ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityEdge.7" incoming="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityEdge.0 //ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityEdge.2">
          <storyPattern comment="CheckVariableInScope">
            <objectVariable name="variable" incomingLink="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="callExpressions:ParameterExpression" parameter="//ScopeValidator/lookupControlFlowVariable/variableName"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable/name"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="currentScope" outgoingLink="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
            </objectVariable>
            <linkVariable name="variables" target="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0" source="//ScopeValidator/lookupControlFlowVariable/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/variables"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="lookupErrorMessage">
      <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EString"/>
      <eParameters name="errorID" eType="//Errors"/>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="visitNode">
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <activity owningOperation="//ScopeValidator/visitNode">
        <ownedActivityEdge source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.2" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.2" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.12" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.5" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.10"/>
        <ownedActivityEdge source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.6" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.9" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.6" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.7" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.10"/>
        <ownedActivityEdge source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.8" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.13" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.8" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.11" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.9" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.10" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.8" guard="END"/>
        <ownedActivityEdge source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.10" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.5" guard="EACH_TIME"/>
        <ownedActivityEdge source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.12" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.6" guard="SUCCESS"/>
        <ownedActivityEdge source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.12" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.4" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.13" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.11" guard="FAILURE"/>
        <ownedActivityEdge source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.13" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.2" guard="SUCCESS"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.2"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.9"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsIfStatement" comment="IsIfStatement" outgoing="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.0 //ScopeValidator/visitNode/@activity/@ownedActivityEdge.1" incoming="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.15">
          <storyPattern comment="IsIfStatement">
            <objectVariable name="ifStatement" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//IfStatement"/>
              <bindingExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/visitNode/@activity/@ownedActivityNode.13/@storyPattern/@objectVariable.0"/>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ReportEmptyCompoundNode" comment="ReportEmptyCompoundNode" outgoing="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.2" incoming="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.0 //ScopeValidator/visitNode/@activity/@ownedActivityEdge.5">
          <storyPattern comment="ReportEmptyCompoundNode">
            <objectVariable name="compoundActivityNode" incomingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0 //ScopeValidator/visitNode/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/ActivityNode"/>
            </objectVariable>
            <objectVariable name="emptyCompoundNodeWarning" incomingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.3" outgoingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.WARNING"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.EMPTY_COMPOUND_NODE"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/visitNode/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.1"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable type="//ScopeValidator" name="this" outgoingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.1" bindingState="BOUND"/>
            <objectVariable name="compoundNode" outgoingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CompoundNode"/>
            </objectVariable>
            <objectVariable name="report1" incomingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.1" outgoingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.3">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <linkVariable name="location" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
            <linkVariable name="validationReport" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.4" source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.2" type="//ScopeValidator/validationReport"/>
            <linkVariable name="origin" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.3">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/origin"/>
            </linkVariable>
            <linkVariable name="errorMessages" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.4" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.13"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="InvokeActionBuilder" outgoing="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.3" incoming="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.11">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/buildAction">
            <ownedParameterBindings parameter="//ActionBuilder/buildAction/node">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ScopeValidator/visitNode/node"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/visitNode/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsPossibleInfiniteLoop" comment="IsPossibleInfiniteLoop" outgoing="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.4 //ScopeValidator/visitNode/@activity/@ownedActivityEdge.5" incoming="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.12">
          <storyPattern comment="IsPossibleInfiniteLoop">
            <objectVariable name="loop" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Loop"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="true"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//ScopeValidator/visitNode/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Loop/loopAlongTrue"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.6"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsCompoundNode" comment="IsCompoundNode" outgoing="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.7 //ScopeValidator/visitNode/@activity/@ownedActivityEdge.8" incoming="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.10">
          <storyPattern comment="IsCompoundNode">
            <objectVariable name="compoundNode" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CompoundNode"/>
              <bindingExpression xsi:type="callExpressions:ParameterExpression" parameter="//ScopeValidator/visitNode/node"/>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ReportPossibleInfiniteLoop" comment="ReportPossibleInfiniteLoop" outgoing="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.9" incoming="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.4">
          <storyPattern comment="ReportPossibleInfiniteLoop">
            <objectVariable name="report2" incomingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.1" outgoingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable name="loopActivityNode" incomingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.2 //ScopeValidator/visitNode/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.3">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/ActivityNode"/>
            </objectVariable>
            <objectVariable type="//ScopeValidator" name="this" outgoingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.1" bindingState="BOUND"/>
            <objectVariable name="possibleInfiniteLoopError" incomingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.0" outgoingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.2" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.INFINITE_LOOP"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/visitNode/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.1"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="loop" outgoingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.3" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Loop"/>
            </objectVariable>
            <linkVariable name="errorMessages" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.3" source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
            <linkVariable name="validationReport" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0" source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.2" type="//ScopeValidator/validationReport"/>
            <linkVariable name="location" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.1" source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.3" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
            <linkVariable name="origin" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.1" source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.4">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/origin"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllActionBuilders" comment="ForAllActionBuilders" outgoing="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.10 //ScopeValidator/visitNode/@activity/@ownedActivityEdge.11" incoming="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.3 //ScopeValidator/visitNode/@activity/@ownedActivityEdge.6" forEach="true">
          <storyPattern comment="ForAllActionBuilders">
            <objectVariable type="//ActionBuilder" name="actionBuilder" incomingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.0"/>
            <objectVariable type="//ScopeValidator" name="this" outgoingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="actionBuilders" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.0" source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.1" type="//ScopeValidator/actionBuilders"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.8 //ScopeValidator/visitNode/@activity/@ownedActivityEdge.14"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsLoop" comment="IsLoop" outgoing="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.12 //ScopeValidator/visitNode/@activity/@ownedActivityEdge.13" incoming="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.1">
          <storyPattern comment="IsLoop">
            <objectVariable name="loop" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Loop"/>
              <bindingExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ScopeValidator/visitNode/@activity/@ownedActivityNode.13/@storyPattern/@objectVariable.0"/>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsEmptyCompoundNode" comment="IsEmptyCompoundNode" outgoing="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.14 //ScopeValidator/visitNode/@activity/@ownedActivityEdge.15" incoming="//ScopeValidator/visitNode/@activity/@ownedActivityEdge.7">
          <storyPattern comment="IsEmptyCompoundNode">
            <objectVariable name="compoundNode" outgoingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.13/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CompoundNode"/>
            </objectVariable>
            <objectVariable name="action" incomingLink="//ScopeValidator/visitNode/@activity/@ownedActivityNode.13/@storyPattern/@linkVariable.0" bindingSemantics="NEGATIVE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <linkVariable name="actions" target="//ScopeValidator/visitNode/@activity/@ownedActivityNode.13/@storyPattern/@objectVariable.1" source="//ScopeValidator/visitNode/@activity/@ownedActivityNode.13/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/actions"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="visitScope">
      <eParameters name="scope">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
      </eParameters>
      <activity owningOperation="//ScopeValidator/visitScope">
        <ownedActivityEdge source="//ScopeValidator/visitScope/@activity/@ownedActivityNode.1" target="//ScopeValidator/visitScope/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//ScopeValidator/visitScope/@activity/@ownedActivityNode.2" target="//ScopeValidator/visitScope/@activity/@ownedActivityNode.1"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ScopeValidator/visitScope/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="DoNothing" comment="DoNothing" outgoing="//ScopeValidator/visitScope/@activity/@ownedActivityEdge.0" incoming="//ScopeValidator/visitScope/@activity/@ownedActivityEdge.1">
          <storyPattern comment="DoNothing"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//ScopeValidator/visitScope/@activity/@ownedActivityEdge.1"/>
      </activity>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EReference" name="validationReport" containment="true">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
    </eStructuralFeatures>
    <eStructuralFeatures xsi:type="ecore:EReference" name="actionBuilders" upperBound="-1" eType="//ActionBuilder" containment="true" eOpposite="//ActionBuilder/validator"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="CompoundPatternInvocationBuilder" eSuperTypes="//RegularPatternInvocationBuilder">
    <eStructuralFeatures xsi:type="ecore:EReference" name="childBuilders" upperBound="-1" eType="//RegularPatternInvocationBuilder" containment="true" eOpposite="//RegularPatternInvocationBuilder/parentBuilder"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="RegularPatternInvocationBuilder" eSuperTypes="//PatternInvocationBuilder">
    <eOperations xsi:type="activities:MoflonEOperation" name="analyzeDependencies">
      <eParameters name="patternInvocationBuilder" eType="//PatternInvocationBuilder"/>
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <activity owningOperation="//RegularPatternInvocationBuilder/analyzeDependencies">
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.0" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.10"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.1" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.5" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.1" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.10" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.2" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.6"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.3" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.11"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.4" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.8" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.4" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.2" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.5" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.9" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.5" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.4" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.6" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.10" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.6" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.15" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.7" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.10"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.8" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.10" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.8" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.3" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.9" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.10" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.14" guard="END"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.10" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.1" guard="EACH_TIME"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.11" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.10" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.11" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.7" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.12" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.10"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.13" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.12"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.15" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.10"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="ExploreBlackAttributeAssignments" outgoing="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.0" incoming="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.14">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/exploreAttributeAssignments">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeAssignments/invocationBuilder">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/analyzeDependencies/patternInvocationBuilder"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeAssignments/expressionExplorer">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeAssignments/objectVariable">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeAssignments/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/analyzeDependencies/pattern"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="IsRelevantObjectVariable" outgoing="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.1 //RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.2" incoming="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.16">
          <statementExpression xsi:type="callExpressions:MethodCallExpression">
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer/isVariableToAdd/objectVariable"/>
            </ownedParameterBindings>
            <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer/isVariableToAdd"/>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HandleRedAttributeConstraints" outgoing="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.3" incoming="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.6">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/exploreAttributeConstraints">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/invocationBuilder">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/analyzeDependencies/patternInvocationBuilder"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/expressionExplorer">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/objectVariable">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/analyzeDependencies/pattern"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HandleGreenAttributeAssignments" outgoing="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.4" incoming="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.13">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/exploreAttributeAssignments">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeAssignments/invocationBuilder">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/analyzeDependencies/patternInvocationBuilder"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeAssignments/expressionExplorer">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeAssignments/objectVariable">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeAssignments/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/analyzeDependencies/pattern"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsVariableRed" comment="IsVariableRed" outgoing="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.5 //RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.6" incoming="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.8">
          <storyPattern comment="IsVariableRed">
            <objectVariable name="objectVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingOperator.DESTROY"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingOperator"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsVariableBlack" comment="IsVariableBlack" outgoing="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.7 //RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.8" incoming="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.1">
          <storyPattern comment="IsVariableBlack">
            <objectVariable name="objectVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingOperator.CHECK_ONLY"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingOperator"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="RedAssignmentExists" comment="RedAssignmentExists" outgoing="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.9 //RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.10" incoming="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.3">
          <storyPattern comment="RedAssignmentExists">
            <objectVariable name="objectVariable" outgoingLink="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="redAssignment" incomingLink="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/AttributeAssignment"/>
            </objectVariable>
            <linkVariable name="attributeAssignment" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.1" source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/attributeAssignment"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="GreenConstraintForbidden" comment="GreenConstraintForbidden" outgoing="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.11" incoming="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.18">
          <storyPattern comment="GreenConstraintForbidden"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsVariableGreen" comment="IsVariableGreen" outgoing="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.12 //RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.13" incoming="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.5">
          <storyPattern comment="IsVariableGreen">
            <objectVariable name="objectVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingOperator.CREATE"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingOperator"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="ExploreBlackAttributeConstraints" outgoing="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.14" incoming="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.7">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/exploreAttributeConstraints">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/invocationBuilder">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/analyzeDependencies/patternInvocationBuilder"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/expressionExplorer">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/objectVariable">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/analyzeDependencies/pattern"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllObjectVariables" comment="ForAllObjectVariables" outgoing="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.15 //RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.16" incoming="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.0 //RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.2 //RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.9 //RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.11 //RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.12 //RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.17 //RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.19 //RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.21" forEach="true">
          <storyPattern comment="ForAllObjectVariables">
            <objectVariable name="storyPattern" outgoingLink="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <objectVariable name="objectVariable" incomingLink="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="objectVariable" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.1" source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/objectVariable"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="GreenConstraintExists" comment="GreenConstraintExists" outgoing="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.17 //RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.18" incoming="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.4">
          <storyPattern comment="GreenConstraintExists">
            <objectVariable name="greenConstraint" incomingLink="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.11/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/Constraint"/>
            </objectVariable>
            <objectVariable name="objectVariable" outgoingLink="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.11/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="constraint" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.0" source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/constraint"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="Init" comment="Init" outgoing="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.19" incoming="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.20">
          <storyPattern comment="Init">
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" outgoingLink="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable type="//ExpressionExplorer" name="expressionExplorer" incomingLink="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.0"/>
            <linkVariable name="expressionExplorer" target="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.1" source="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0" type="//PatternInvocationBuilder/expressionExplorer"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.20"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.15"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="RedAssignmentForbidden" comment="RedAssignmentForbidden" outgoing="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.21" incoming="//RegularPatternInvocationBuilder/analyzeDependencies/@activity/@ownedActivityEdge.10">
          <storyPattern comment="RedAssignmentForbidden"/>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="buildAction">
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <activity owningOperation="//RegularPatternInvocationBuilder/buildAction">
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.1" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.2" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.2" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.3" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.3" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.7" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.0" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.5" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.10" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.5" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.3" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.7" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.2" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.7" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.2" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.12"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.9" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.11"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.10" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.9"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.11" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.12" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.3 //RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.5"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupPatternMatcher" comment="LookupPatternMatcher" outgoing="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.1 //RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.2" incoming="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.9 //RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.10">
          <storyPattern comment="LookupPatternMatcher">
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" outgoingLink="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable type="//PatternMatcher" name="patternMatcher" incomingLink="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0"/>
            <linkVariable name="patternMatcher" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1" source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" type="//PatternInvocationBuilder/patternMatcher"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="RemoveResultLink" comment="RemoveResultLink" outgoing="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.3" incoming="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.2 //RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.7 //RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.14">
          <storyPattern comment="RemoveResultLink">
            <objectVariable name="invocationResult" incomingLink="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//RegularPatternInvocation"/>
            </objectVariable>
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" outgoingLink="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="result" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" type="//ActionBuilder/result" bindingOperator="DESTROY"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HasInvocationResult" comment="HasInvocationResult" outgoing="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.4 //RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.5" incoming="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.15">
          <storyPattern comment="HasInvocationResult">
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" outgoingLink="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable name="democlesPattern" incomingLink="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="invocationResult" incomingLink="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" outgoingLink="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//RegularPatternInvocation"/>
            </objectVariable>
            <linkVariable name="result" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.2" source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0" type="//ActionBuilder/result"/>
            <linkVariable name="pattern" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1" source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation/pattern"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HasErrors" outgoing="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.6 //RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.7" incoming="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.8">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/hasErrors">
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="BuildPatternContent" outgoing="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.8" incoming="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.1">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/buildPatternContent">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/buildPatternContent/invocation">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/buildPatternContent/storyPattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HandleMainAction" comment="HandleMainAction" outgoing="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.9 //RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.10" incoming="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.4">
          <storyPattern comment="HandleMainAction">
            <objectVariable name="otherMainAction" incomingLink="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.1" bindingSemantics="NEGATIVE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" bindingState="BOUND">
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="true"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.1" attribute="//RegularPatternInvocationBuilder/mainActionBuilder"/>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="invocationResult" incomingLink="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//RegularPatternInvocation"/>
            </objectVariable>
            <objectVariable name="node" outgoingLink="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.0 //RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.7/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <linkVariable name="mainAction" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.2" source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.3" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/mainAction"/>
            </linkVariable>
            <linkVariable name="mainAction" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0" source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.3">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/mainAction"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupActivityNode" comment="LookupActivityNode" outgoing="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.11" incoming="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.0">
          <storyPattern comment="LookupActivityNode">
            <objectVariable name="report" incomingLink="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable name="storyPattern" outgoingLink="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <objectVariable name="storyNode" incomingLink="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.1 //RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/StoryNode"/>
            </objectVariable>
            <objectVariable name="node" outgoingLink="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" bindingState="BOUND"/>
            <objectVariable type="//ScopeValidator" name="scopeValidator" outgoingLink="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupScopeValidator">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
            <linkVariable name="storyNode" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.2" source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/storyNode"/>
            </linkVariable>
            <linkVariable name="origin" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.2" source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.3">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/origin"/>
            </linkVariable>
            <linkVariable name="validationReport" target="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0" source="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.5" type="//ScopeValidator/validationReport"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HandlePatternMatchingReport" outgoing="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.12" incoming="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.13">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/handlePatternMatcherReport">
            <ownedParameterBindings parameter="//PatternInvocationBuilder/handlePatternMatcherReport/invocation">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//PatternInvocationBuilder/handlePatternMatcherReport/report">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="GenerateSearchPlan" comment="GenerateSearchPlan" outgoing="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.13" incoming="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.6">
          <storyPattern comment="GenerateSearchPlan">
            <objectVariable name="patternMatchingReport" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternMatcher/generateSearchPlan">
                <ownedParameterBindings parameter="//PatternMatcher/generateSearchPlan/pattern">
                  <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1"/>
                </ownedParameterBindings>
                <ownedParameterBindings parameter="//PatternMatcher/generateSearchPlan/adornment">
                  <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/calculateAdornment">
                    <ownedParameterBindings parameter="//PatternInvocationBuilder/calculateAdornment/invocation">
                      <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
                    </ownedParameterBindings>
                    <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
                  </valueExpression>
                </ownedParameterBindings>
                <ownedParameterBindings parameter="//PatternMatcher/generateSearchPlan/isMultipleMatch">
                  <valueExpression xsi:type="callExpressions:MethodCallExpression">
                    <callee href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation/isMultipleMatch"/>
                    <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
                  </valueExpression>
                </ownedParameterBindings>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="MergePatternMatchingResult" outgoing="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.14" incoming="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.12">
          <statementExpression xsi:type="callExpressions:MethodCallExpression">
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/merge/otherReport"/>
            </ownedParameterBindings>
            <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/merge"/>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="BuildPatternInterface" outgoing="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.15" incoming="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.11">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/buildPatternInterface">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/buildPatternInterface/node">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/buildAction/node"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/buildPatternInterface/storyPattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="buildPatternContent">
      <eParameters name="invocation">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//RegularPatternInvocation"/>
      </eParameters>
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
      <activity owningOperation="//RegularPatternInvocationBuilder/buildPatternContent">
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityNode.0" target="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityNode.1" target="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityNode.2" target="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityNode.3" target="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityNode.1"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="TransformPattern" outgoing="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityEdge.0" incoming="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityEdge.1">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/transformPattern">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/transformPattern/storyPattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/buildPatternContent/storyPattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/transformPattern/democlesPattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupDemoclesPattern" comment="LookupDemoclesPattern" outgoing="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityEdge.1" incoming="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityEdge.3">
          <storyPattern comment="LookupDemoclesPattern">
            <objectVariable name="democlesPattern" incomingLink="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="invocation" outgoingLink="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//RegularPatternInvocation"/>
            </objectVariable>
            <linkVariable name="pattern" target="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0" source="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation/pattern"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityEdge.2"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="Init" comment="Init" outgoing="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityEdge.3" incoming="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityEdge.2">
          <storyPattern comment="Init">
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" bindingState="BOUND"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/buildPatternContent/@activity/@ownedActivityEdge.0"/>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="buildPatternInterface">
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
      <activity owningOperation="//RegularPatternInvocationBuilder/buildPatternInterface">
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.0" target="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.1" target="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.2" target="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.7"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.3" target="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.5" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.3" target="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.1" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.4" target="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.5" target="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.3" guard="EACH_TIME"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.5" target="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.2" guard="END"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.6" target="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupThisObject" comment="LookupThisObject" outgoing="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.0" incoming="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.8">
          <storyPattern comment="LookupThisObject">
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" bindingState="BOUND"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupOrCreateAction" comment="LookupOrCreateAction" outgoing="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.1" incoming="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.4">
          <storyPattern comment="LookupOrCreateAction">
            <objectVariable name="invocation" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupAction">
                <ownedParameterBindings parameter="//ActionBuilder/lookupAction/node">
                  <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/buildPatternInterface/node"/>
                </ownedParameterBindings>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="PostprocessPatternInterface" outgoing="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.2" incoming="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.7">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/postprocessPatternInterface">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/postprocessPatternInterface/storyPattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/buildPatternInterface/storyPattern"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="IsRelevantObjectVariable" outgoing="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.3 //RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.4" incoming="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.6">
          <statementExpression xsi:type="callExpressions:MethodCallExpression">
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer/isVariableToAdd/objectVariable"/>
            </ownedParameterBindings>
            <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer/isVariableToAdd"/>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HandleRelevantObjectVariable" outgoing="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.5" incoming="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.1">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/handleRelevantObjectVariable">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/invocation">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/objectVariable">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllObjectVariables" comment="ForAllObjectVariables" outgoing="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.6 //RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.7" incoming="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.0 //RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.3 //RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.5" forEach="true">
          <storyPattern comment="ForAllObjectVariables">
            <objectVariable name="storyPattern" outgoingLink="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <objectVariable name="objectVariable" incomingLink="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="objectVariable" target="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" source="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/objectVariable"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.8"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/buildPatternInterface/@activity/@ownedActivityEdge.2"/>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="createAction">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//RegularPatternInvocation"/>
      <activity owningOperation="//RegularPatternInvocationBuilder/createAction">
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/createAction/@activity/@ownedActivityNode.0" target="//RegularPatternInvocationBuilder/createAction/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/createAction/@activity/@ownedActivityNode.1" target="//RegularPatternInvocationBuilder/createAction/@activity/@ownedActivityNode.2"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RegularPatternInvocationBuilder/createAction/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateRegularPatternInvocation" comment="CreateRegularPatternInvocation" outgoing="//RegularPatternInvocationBuilder/createAction/@activity/@ownedActivityEdge.1" incoming="//RegularPatternInvocationBuilder/createAction/@activity/@ownedActivityEdge.0">
          <storyPattern comment="CreateRegularPatternInvocation">
            <objectVariable name="newInvocation" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//RegularPatternInvocation"/>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/createAction/@activity/@ownedActivityEdge.1">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/createAction/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="exploreAttributeAssignments">
      <eParameters name="invocationBuilder" eType="//PatternInvocationBuilder"/>
      <eParameters name="expressionExplorer" eType="//ExpressionExplorer"/>
      <eParameters name="objectVariable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
      </eParameters>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <activity owningOperation="//RegularPatternInvocationBuilder/exploreAttributeAssignments">
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityNode.0" target="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityNode.2" guard="EACH_TIME"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityNode.0" target="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityNode.3" guard="END"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityNode.1" target="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityNode.2" target="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityNode.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllAttributeAssignments" comment="ForAllAttributeAssignments" outgoing="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityEdge.0 //RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityEdge.1" incoming="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityEdge.2 //RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityEdge.3" forEach="true">
          <storyPattern comment="ForAllAttributeAssignments">
            <objectVariable name="assignment" incomingLink="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1" outgoingLink="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/AttributeAssignment"/>
            </objectVariable>
            <objectVariable name="expression" incomingLink="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//expressions/Expression"/>
            </objectVariable>
            <objectVariable name="objectVariable" outgoingLink="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="valueExpression" target="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1" source="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/AttributeAssignment/valueExpression"/>
            </linkVariable>
            <linkVariable name="attributeAssignment" target="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0" source="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/attributeAssignment"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityEdge.2"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HandleAssignmentExpression" outgoing="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityEdge.3" incoming="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityEdge.0">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ExpressionExplorer/exploreExpression">
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/patternInvocationBuilder">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/exploreAttributeAssignments/invocationBuilder"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/exploreAttributeAssignments/pattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/expression">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <target xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/exploreAttributeAssignments/expressionExplorer"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/exploreAttributeAssignments/@activity/@ownedActivityEdge.1"/>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="exploreAttributeConstraints">
      <eParameters name="invocationBuilder" eType="//PatternInvocationBuilder"/>
      <eParameters name="expressionExplorer" eType="//ExpressionExplorer"/>
      <eParameters name="objectVariable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
      </eParameters>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <activity owningOperation="//RegularPatternInvocationBuilder/exploreAttributeConstraints">
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.0" target="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.1" target="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.2" target="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.3" guard="END"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.2" target="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.0" guard="EACH_TIME"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="ExploreConstraintExpression" outgoing="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityEdge.0" incoming="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityEdge.3">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ExpressionExplorer/exploreExpression">
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/patternInvocationBuilder">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/invocationBuilder"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/pattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/expression">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2"/>
            </ownedParameterBindings>
            <target xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/exploreAttributeConstraints/expressionExplorer"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityEdge.1"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllAttributeConstraints" comment="ForAllAttributeConstraints" outgoing="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityEdge.2 //RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityEdge.3" incoming="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityEdge.0 //RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityEdge.1" forEach="true">
          <storyPattern comment="ForAllAttributeConstraints">
            <objectVariable name="constraint" incomingLink="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1" outgoingLink="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/Constraint"/>
            </objectVariable>
            <objectVariable name="objectVariable" outgoingLink="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="constraintExpression" incomingLink="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//expressions/Expression"/>
            </objectVariable>
            <objectVariable name="binaryExpression" incomingLink="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" outgoingLink="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//expressions/BinaryExpression"/>
            </objectVariable>
            <linkVariable name="constraintExpression" target="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.3" source="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/Constraint/constraintExpression"/>
            </linkVariable>
            <linkVariable name="constraint" target="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" source="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/constraint"/>
            </linkVariable>
            <linkVariable name="rightExpression" target="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2" source="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.3">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//expressions/BinaryExpression/rightExpression"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/exploreAttributeConstraints/@activity/@ownedActivityEdge.2"/>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="getPatternInvocationBuilder" eType="//RegularPatternInvocationBuilder">
      <activity owningOperation="//RegularPatternInvocationBuilder/getPatternInvocationBuilder">
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.0" target="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.1" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.0" target="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.4" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.1" target="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.2" target="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.4" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.2" target="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.0" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.3" target="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.2"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HasParentBuilder" comment="HasParentBuilder" outgoing="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityEdge.0 //RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityEdge.1" incoming="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityEdge.4">
          <storyPattern comment="HasParentBuilder">
            <objectVariable type="//CompoundPatternInvocationBuilder" name="parentBuilder" incomingLink="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0"/>
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" outgoingLink="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="parentBuilder" target="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0" source="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1" type="//RegularPatternInvocationBuilder/parentBuilder"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="DelegateToParentBuilder" comment="DelegateToParentBuilder" outgoing="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityEdge.2" incoming="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityEdge.0">
          <storyPattern comment="DelegateToParentBuilder">
            <objectVariable type="//RegularPatternInvocationBuilder" name="result" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/getPatternInvocationBuilder">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HasResult" comment="HasResult" outgoing="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityEdge.3 //RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityEdge.4" incoming="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityEdge.5">
          <storyPattern comment="HasResult">
            <objectVariable name="invocation" incomingLink="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
            </objectVariable>
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" outgoingLink="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="result" target="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" source="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1" type="//ActionBuilder/result"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityEdge.5"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityEdge.1 //RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityEdge.3">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityEdge.2">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/getPatternInvocationBuilder/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="handleRelevantObjectVariable">
      <eParameters name="invocation">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
      </eParameters>
      <eParameters name="objectVariable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
      </eParameters>
      <activity owningOperation="//RegularPatternInvocationBuilder/handleRelevantObjectVariable">
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1" target="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.7"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.2" target="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3" target="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3" target="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.4" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.5" target="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6" target="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.7" target="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.0"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.6"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateVariableReference" comment="CreateVariableReference" outgoing="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.0" incoming="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.5">
          <storyPattern comment="CreateVariableReference">
            <objectVariable name="controlFlowVariable" incomingLink="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
            </objectVariable>
            <objectVariable name="newVarRef" outgoingLink="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//VariableReference"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/handleVariableReference">
                <ownedParameterBindings parameter="//PatternInvocationBuilder/handleVariableReference/variable">
                  <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.3"/>
                </ownedParameterBindings>
                <ownedParameterBindings parameter="//PatternInvocationBuilder/handleVariableReference/variableType">
                  <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.1"/>
                </ownedParameterBindings>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
            <linkVariable name="from" target="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0" source="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//VariableReference/from"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.1"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ExistsAsSymbolicParameter" comment="ExistsAsSymbolicParameter" outgoing="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.2 //RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.3" incoming="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.4">
          <storyPattern comment="ExistsAsSymbolicParameter">
            <objectVariable name="variable" incomingLink="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Variable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="patternExpressions:AttributeValueExpression" object="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
                  </rightExpression>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0">
                    <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="pattern" outgoingLink="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <linkVariable name="symbolicParameters" target="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" source="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1">
              <type href="http://gervarro.org/democles/specification.ecore#//Pattern/symbolicParameters"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.3"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupPattern" comment="LookupPattern" outgoing="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.4" incoming="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.1">
          <storyPattern comment="LookupPattern">
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" bindingState="BOUND"/>
            <objectVariable name="pattern" incomingLink="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="invocation" outgoingLink="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
            </objectVariable>
            <linkVariable name="pattern" target="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" source="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation/pattern"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreatePatternVariable" comment="CreatePatternVariable" outgoing="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.5" incoming="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.2">
          <storyPattern comment="CreatePatternVariable">
            <objectVariable name="objectVariable" outgoingLink="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="eClassifier" incomingLink="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0 //RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <objectVariable name="pattern" outgoingLink="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="newVariable" incomingLink="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.1" outgoingLink="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.2" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/constraint/emf.ecore#//EMFVariable"/>
              <attributeAssignment>
                <valueExpression xsi:type="patternExpressions:AttributeValueExpression" object="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0">
                  <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
                </valueExpression>
                <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
              </attributeAssignment>
            </objectVariable>
            <linkVariable name="type" target="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.1" source="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//TypedElement/type"/>
            </linkVariable>
            <linkVariable name="symbolicParameters" target="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.3" source="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//Pattern/symbolicParameters"/>
            </linkVariable>
            <linkVariable name="eClassifier" target="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.1" source="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.3" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/constraint/emf.ecore#//EMFVariable/eClassifier"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="ValidateVariable" outgoing="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.6" incoming="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityEdge.0">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/validateVariable">
            <ownedParameterBindings parameter="//ActionBuilder/validateVariable/action">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/invocation"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ActionBuilder/validateVariable/variable">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ActionBuilder/validateVariable/objectVariable">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/objectVariable"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/handleRelevantObjectVariable/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="handleVariableReference">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//VariableReference"/>
      <eParameters name="variable">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Variable"/>
      </eParameters>
      <eParameters name="variableType">
        <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
      </eParameters>
      <activity owningOperation="//RegularPatternInvocationBuilder/handleVariableReference">
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.1" target="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.3" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.1" target="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.2" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.3" target="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4" target="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.1"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityEdge.2">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsCurrentBuilderResponsible" comment="IsCurrentBuilderResponsible" outgoing="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityEdge.0 //RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityEdge.1" incoming="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityEdge.3">
          <storyPattern comment="IsCurrentBuilderResponsible">
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" outgoingLink="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable name="democlesPattern" incomingLink="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.2" outgoingLink="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="variable" incomingLink="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Variable"/>
            </objectVariable>
            <objectVariable name="invocation" incomingLink="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" outgoingLink="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//RegularPatternInvocation"/>
            </objectVariable>
            <linkVariable name="result" target="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.3" source="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0" type="//ActionBuilder/result"/>
            <linkVariable name="symbolicParameters" target="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2" source="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1">
              <type href="http://gervarro.org/democles/specification.ecore#//Pattern/symbolicParameters"/>
            </linkVariable>
            <linkVariable name="pattern" target="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1" source="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.3">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation/pattern"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityEdge.1">
          <returnValue xsi:type="expressions:LiteralExpression" value="null"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="DelegateToSuperclass" comment="DelegateToSuperclass" outgoing="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityEdge.2" incoming="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityEdge.0">
          <storyPattern comment="DelegateToSuperclass">
            <objectVariable name="reference" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//VariableReference"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/handleVariableReferenceInSuperclass">
                <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/handleVariableReferenceInSuperclass/variable">
                  <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/handleVariableReference/variable"/>
                </ownedParameterBindings>
                <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/handleVariableReferenceInSuperclass/variableType">
                  <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/handleVariableReference/variableType"/>
                </ownedParameterBindings>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RegularPatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityEdge.3"/>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="handleVariableReferenceInSuperclass">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//VariableReference"/>
      <eParameters name="variable">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Variable"/>
      </eParameters>
      <eParameters name="variableType">
        <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
      </eParameters>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="isVariableToAdd">
      <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
      <eParameters name="objectVariable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
      </eParameters>
      <activity owningOperation="//RegularPatternInvocationBuilder/isVariableToAdd">
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityNode.0" target="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityNode.4" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityNode.0" target="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityNode.3" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityNode.2" target="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityNode.4" target="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityNode.3" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityNode.4" target="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityNode.1" guard="SUCCESS"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HasPatternTransformer" comment="HasPatternTransformer" outgoing="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityEdge.0 //RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityEdge.1" incoming="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityEdge.2">
          <storyPattern comment="HasPatternTransformer">
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" outgoingLink="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable name="patternTransformer" incomingLink="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer"/>
            </objectVariable>
            <linkVariable name="patternTransformer" target="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1" source="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0" type="//RegularPatternInvocationBuilder/patternTransformer"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityEdge.4">
          <returnValue xsi:type="expressions:LiteralExpression" value="true"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityEdge.2"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityEdge.1 //RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityEdge.3">
          <returnValue xsi:type="expressions:LiteralExpression" value="false"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="DelegatingDecision" outgoing="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityEdge.3 //RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityEdge.4" incoming="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityEdge.0">
          <statementExpression xsi:type="callExpressions:MethodCallExpression">
            <ownedParameterBindings>
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/isVariableToAdd/objectVariable"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer/isVariableToAdd/objectVariable"/>
            </ownedParameterBindings>
            <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer/isVariableToAdd"/>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/isVariableToAdd/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="lookupScopeValidator" eType="//ScopeValidator">
      <activity owningOperation="//RegularPatternInvocationBuilder/lookupScopeValidator">
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.0" target="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.1" target="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.7"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.4" target="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.5" target="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.8"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.6" target="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.1" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.6" target="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.0" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.8" target="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.6" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.8" target="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.4" guard="SUCCESS"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupParentActionScopeValidator" comment="LookupParentActionScopeValidator" outgoing="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.0" incoming="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.5">
          <storyPattern comment="LookupParentActionScopeValidator">
            <objectVariable type="//ScopeValidator" name="parentActionScopeValidator" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupScopeValidator">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupScopeValidator" comment="LookupScopeValidator" outgoing="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.1" incoming="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.4">
          <storyPattern comment="LookupScopeValidator">
            <objectVariable type="//ScopeValidator" name="validator" outgoingLink="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0"/>
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" incomingLink="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="actionBuilders" target="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1" source="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0" type="//ScopeValidator/actionBuilders"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.0">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.2">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupPatternInvocationScopeValidator" comment="LookupPatternInvocationScopeValidator" outgoing="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.2" incoming="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.7">
          <storyPattern comment="LookupPatternInvocationScopeValidator">
            <objectVariable type="//ScopeValidator" name="parentPatternInvocationScopeValidator" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupScopeValidator">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.3"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HasParentActionBuilder" comment="HasParentActionBuilder" outgoing="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.4 //RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.5" incoming="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.6">
          <storyPattern comment="HasParentActionBuilder">
            <objectVariable type="//CompoundActionBuilder" name="parentActionBuilder" outgoingLink="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0"/>
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" incomingLink="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="children" target="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.1" source="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0" type="//CompoundActionBuilder/children"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.1">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HasBindingPatternBuilder" comment="HasBindingPatternBuilder" outgoing="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.6 //RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.7" incoming="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityEdge.3">
          <storyPattern comment="HasBindingPatternBuilder">
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" outgoingLink="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable type="//CompoundPatternInvocationBuilder" name="parentPatternInvocationBuilder" incomingLink="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0"/>
            <linkVariable name="parentBuilder" target="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1" source="//RegularPatternInvocationBuilder/lookupScopeValidator/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0" type="//RegularPatternInvocationBuilder/parentBuilder"/>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="postprocessPatternInterface">
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
      <activity owningOperation="//RegularPatternInvocationBuilder/postprocessPatternInterface">
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.0" target="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.1" guard="FAILURE"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.0" target="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4" guard="SUCCESS"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.3" target="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.4" target="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.5" target="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.3"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupPattern" comment="LookupPattern" outgoing="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.0 //RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.1" incoming="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.2">
          <storyPattern comment="LookupPattern">
            <objectVariable name="invocationResult" incomingLink="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1" outgoingLink="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
            </objectVariable>
            <objectVariable name="pattern" incomingLink="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable type="//RegularPatternInvocationBuilder" name="invocationBuilder" outgoingLink="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/getPatternInvocationBuilder">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
            <linkVariable name="pattern" target="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1" source="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation/pattern"/>
            </linkVariable>
            <linkVariable name="result" target="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0" source="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.2" type="//ActionBuilder/result"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.3"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="Init" comment="Init" outgoing="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.2" incoming="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.4">
          <storyPattern comment="Init">
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" bindingState="BOUND"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="AnalyzeDependencies" outgoing="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.3" incoming="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.1">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/analyzeDependencies">
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/analyzeDependencies/patternInvocationBuilder">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/analyzeDependencies/storyPattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/postprocessPatternInterface/storyPattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//RegularPatternInvocationBuilder/analyzeDependencies/pattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RegularPatternInvocationBuilder/postprocessPatternInterface/@activity/@ownedActivityEdge.4"/>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="transformPattern">
      <eParameters name="storyPattern">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
      </eParameters>
      <eParameters name="democlesPattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <activity owningOperation="//RegularPatternInvocationBuilder/transformPattern">
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.0" target="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.1" target="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.2" target="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.3" target="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.5" target="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.2"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="MergeTransformationResult" outgoing="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityEdge.1" incoming="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityEdge.2">
          <statementExpression xsi:type="callExpressions:MethodCallExpression">
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/merge/otherReport"/>
            </ownedParameterBindings>
            <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/merge"/>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="PatternToDemoclesTransformation" comment="PatternToDemoclesTransformation" outgoing="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityEdge.2" incoming="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityEdge.4">
          <storyPattern comment="PatternToDemoclesTransformation">
            <objectVariable name="patternToDemoclesReport" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression">
                <ownedParameterBindings>
                  <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/transformPattern/storyPattern"/>
                  <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer/transform/storyPattern"/>
                </ownedParameterBindings>
                <ownedParameterBindings>
                  <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//RegularPatternInvocationBuilder/transformPattern/democlesPattern"/>
                  <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer/transform/pattern"/>
                </ownedParameterBindings>
                <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer/transform"/>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.2"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupPatternTransformer" comment="LookupPatternTransformer" outgoing="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityEdge.3" incoming="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityEdge.0">
          <storyPattern comment="LookupPatternTransformer">
            <objectVariable name="expressionTransformer" incomingLink="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//DefaultExpressionTransformer"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="0"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//DefaultExpressionTransformer/calleeETypeNameCounter"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable type="//RegularPatternInvocationBuilder" name="this" outgoingLink="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable name="patternTransformer" incomingLink="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" outgoingLink="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer"/>
            </objectVariable>
            <linkVariable name="patternTransformer" target="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.2" source="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" type="//RegularPatternInvocationBuilder/patternTransformer"/>
            <linkVariable name="expressionTransformer" target="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" source="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer/expressionTransformer"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityEdge.1"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupValidationResult" comment="LookupValidationResult" outgoing="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityEdge.4" incoming="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityEdge.3">
          <storyPattern comment="LookupValidationResult">
            <objectVariable name="report" incomingLink="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable type="//ScopeValidator" name="scopeValidator" outgoingLink="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupScopeValidator">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1"/>
              </bindingExpression>
            </objectVariable>
            <linkVariable name="validationReport" target="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0" source="//RegularPatternInvocationBuilder/transformPattern/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" type="//ScopeValidator/validationReport"/>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EReference" name="parentBuilder" eType="//CompoundPatternInvocationBuilder" eOpposite="//CompoundPatternInvocationBuilder/childBuilders"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="patternTransformer" lowerBound="1" containment="true">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternTransformer"/>
    </eStructuralFeatures>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="mainActionBuilder" ordered="false" lowerBound="1">
      <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
    </eStructuralFeatures>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="PatternMatcher" abstract="true">
    <eOperations xsi:type="activities:MoflonEOperation" name="generateSearchPlan">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <eParameters name="adornment">
        <eType xsi:type="ecore:EDataType" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Adornment"/>
      </eParameters>
      <eParameters name="isMultipleMatch">
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
      </eParameters>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EReference" name="validationReport">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
    </eStructuralFeatures>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="SingleResultPatternInvocationBuilder" eSuperTypes="//PatternInvocationBuilder">
    <eOperations xsi:type="activities:MoflonEOperation" name="buildAction">
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <activity owningOperation="//SingleResultPatternInvocationBuilder/buildAction">
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.0" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.1" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.2" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.3" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.16" guard="SUCCESS"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.18" guard="FAILURE"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.12" guard="FAILURE"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.7" guard="SUCCESS"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.7" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.15"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.13" guard="FAILURE"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.2" guard="SUCCESS"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.12" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.9"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.13" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.9"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.14" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.11"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.15" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.9" guard="SUCCESS"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.15" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.9" guard="FAILURE"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.16" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.17" guard="FAILURE"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.16" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.8" guard="SUCCESS"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.17" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.14" guard="SUCCESS"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.17" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.13" guard="FAILURE"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.18" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.10" guard="FAILURE"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.18" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.0" guard="SUCCESS"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CastToReturnStatement" comment="CastToReturnStatement" outgoing="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.0" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.21">
          <storyPattern comment="CastToReturnStatement">
            <objectVariable name="returnNode" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//ReturnStatement"/>
              <bindingExpression xsi:type="callExpressions:ParameterExpression" parameter="//SingleResultPatternInvocationBuilder/buildAction/node"/>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupThisObject" comment="LookupThisObject" outgoing="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.1" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.3">
          <storyPattern comment="LookupThisObject">
            <objectVariable type="//SingleResultPatternInvocationBuilder" name="this" bindingState="BOUND"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ErrorHandling1" comment="ErrorHandling1" outgoing="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.2" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.10">
          <storyPattern comment="ErrorHandling1"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.3"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupStatementNode" comment="LookupStatementNode" outgoing="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.4 //SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.5" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.1">
          <storyPattern comment="LookupStatementNode">
            <objectVariable name="eOperation" incomingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EOperation"/>
            </objectVariable>
            <objectVariable name="statementExpression" incomingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.1" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//calls/callExpressions/MethodCallExpression"/>
            </objectVariable>
            <objectVariable name="statementNode" incomingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.2" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/StatementNode"/>
            </objectVariable>
            <objectVariable name="node" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <linkVariable name="callee" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0" source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//calls/Invocation/callee"/>
            </linkVariable>
            <linkVariable name="statementExpression" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1" source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/StatementNode/statementExpression"/>
            </linkVariable>
            <linkVariable name="origin" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.2" source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.3">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/origin"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.2"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HasReturnValueExpression" comment="HasReturnValueExpression" outgoing="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.6 //SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.7" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.0">
          <storyPattern comment="HasReturnValueExpression">
            <objectVariable name="activity" incomingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.2" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/Activity"/>
            </objectVariable>
            <objectVariable name="stopNode" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.1 //SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/StopNode"/>
            </objectVariable>
            <objectVariable name="returnValueExpression" incomingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//expressions/Expression"/>
            </objectVariable>
            <objectVariable name="method" incomingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EOperation"/>
            </objectVariable>
            <linkVariable name="owningOperation" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.3" source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/Activity/owningOperation"/>
            </linkVariable>
            <linkVariable name="returnValue" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.2" source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/StopNode/returnValue"/>
            </linkVariable>
            <linkVariable name="owningActivity" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0" source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/ActivityNode/owningActivity"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="ExploreAndTransformReturnExpression" outgoing="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.8" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.7">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//SingleResultPatternInvocationBuilder/buildAction.1">
            <ownedParameterBindings parameter="//SingleResultPatternInvocationBuilder/buildAction.1/node">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//SingleResultPatternInvocationBuilder/buildAction.1/expression">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.2"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//SingleResultPatternInvocationBuilder/buildAction.1/eOperation">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.2"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsForEach" comment="IsForEach" outgoing="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.9 //SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.10" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.17">
          <storyPattern comment="IsForEach">
            <objectVariable name="forEach" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//ForEach"/>
              <bindingExpression xsi:type="callExpressions:ParameterExpression" parameter="//SingleResultPatternInvocationBuilder/buildAction/node"/>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.11 //SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.12 //SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.14 //SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.15"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.20"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.13"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateEmptyAction" comment="CreateEmptyAction" outgoing="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.11" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.6">
          <storyPattern comment="CreateEmptyAction">
            <objectVariable name="emptyAction" incomingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.0 //SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.1" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <objectVariable name="returnNode" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.0 //SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//ReturnStatement"/>
            </objectVariable>
            <linkVariable name="actions" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0" source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/actions"/>
            </linkVariable>
            <linkVariable name="mainAction" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0" source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/mainAction"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="ExploreAndTransformExpression" outgoing="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.12" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.9 //SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.19">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//SingleResultPatternInvocationBuilder/buildAction.1">
            <ownedParameterBindings parameter="//SingleResultPatternInvocationBuilder/buildAction.1/node">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//SingleResultPatternInvocationBuilder/buildAction/node"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//SingleResultPatternInvocationBuilder/buildAction.1/expression">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//SingleResultPatternInvocationBuilder/buildAction.1/eOperation">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ErrorHandling2" comment="ErrorHandling2" outgoing="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.13" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.18">
          <storyPattern comment="ErrorHandling2"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HandleReturnType" comment="HandleReturnType" outgoing="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.14 //SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.15" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.8">
          <storyPattern comment="HandleReturnType">
            <objectVariable name="mainAction" incomingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.1" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//SingleResultPatternInvocation"/>
            </objectVariable>
            <objectVariable name="returnNode" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//ReturnStatement"/>
            </objectVariable>
            <objectVariable name="method" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EOperation"/>
            </objectVariable>
            <objectVariable name="returnType" incomingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.0 //SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <linkVariable name="returnType" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.3" source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//SingleResultPatternInvocation/returnType"/>
            </linkVariable>
            <linkVariable name="mainAction" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.0" source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/mainAction"/>
            </linkVariable>
            <linkVariable name="eType" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.3" source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.2">
              <type href="http://www.eclipse.org/emf/2002/Ecore#//ETypedElement/eType"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ReturnsBoolean" comment="ReturnsBoolean" outgoing="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.16 //SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.17" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.4">
          <storyPattern comment="ReturnsBoolean">
            <objectVariable name="ecorePackage" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.16/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EPackage"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="&quot;ecore&quot;"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.0">
                    <attribute href="http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="&quot;ecore&quot;"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.0">
                    <attribute href="http://www.eclipse.org/emf/2002/Ecore#//EPackage/nsPrefix"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="&quot;http://www.eclipse.org/emf/2002/Ecore&quot;"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.0">
                    <attribute href="http://www.eclipse.org/emf/2002/Ecore#//EPackage/nsURI"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="eOperation" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.16/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EOperation"/>
            </objectVariable>
            <objectVariable name="booleanDataType" incomingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.16/@storyPattern/@linkVariable.0 //SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.16/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EDataType"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="&quot;EBoolean&quot;"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.2">
                    <attribute href="http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <linkVariable name="eType" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.2" source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.1">
              <type href="http://www.eclipse.org/emf/2002/Ecore#//ETypedElement/eType"/>
            </linkVariable>
            <linkVariable name="eClassifiers" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.2" source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.0">
              <type href="http://www.eclipse.org/emf/2002/Ecore#//EPackage/eClassifiers"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsCompoundNode" comment="IsCompoundNode" outgoing="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.18 //SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.19" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.16">
          <storyPattern comment="IsCompoundNode">
            <objectVariable name="compoundNode" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CompoundNode"/>
              <bindingExpression xsi:type="callExpressions:ParameterExpression" parameter="//SingleResultPatternInvocationBuilder/buildAction/node"/>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupStopNode" comment="LookupStopNode" outgoing="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.20 //SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.21" incoming="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityEdge.5">
          <storyPattern comment="LookupStopNode">
            <objectVariable name="stopNode" incomingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.18/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/StopNode"/>
            </objectVariable>
            <objectVariable name="node" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.18/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <linkVariable name="origin" target="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.18/@storyPattern/@objectVariable.0" source="//SingleResultPatternInvocationBuilder/buildAction/@activity/@ownedActivityNode.18/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/origin"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="buildAction">
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <eParameters name="expression">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//expressions/Expression"/>
      </eParameters>
      <eParameters name="eOperation">
        <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EOperation"/>
      </eParameters>
      <activity owningOperation="//SingleResultPatternInvocationBuilder/buildAction.1">
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.14"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.2" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.7"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.3" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.10" guard="SUCCESS"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.3" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11" guard="FAILURE"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.4" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.5" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.6" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.7" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.9" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.10" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.13" guard="FAILURE"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.10" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11" guard="SUCCESS"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.0" guard="FAILURE"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.0" guard="SUCCESS"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.12" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8" guard="SUCCESS"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.12" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.5" guard="FAILURE"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.13" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.16"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.14" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.12"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.15" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.9"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.16" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.6"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.12 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.13"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupPatternTransformer" comment="LookupPatternTransformer" outgoing="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.0" incoming="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.9">
          <storyPattern comment="LookupPatternTransformer">
            <objectVariable name="patternVariableHandler" incomingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternVariableHandler"/>
            </objectVariable>
            <objectVariable type="//ExpressionExplorer" name="expressionExplorer" incomingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.1" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0"/>
            <objectVariable name="expressionTransformer" incomingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//DefaultExpressionTransformer"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="0"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//DefaultExpressionTransformer/calleeETypeNameCounter"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable type="//SingleResultPatternInvocationBuilder" name="this" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.1 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.2" bindingState="BOUND"/>
            <linkVariable name="expressionTransformer" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1" type="//ExpressionExplorer/expressionTransformer"/>
            <linkVariable name="expressionExplorer" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.3" type="//PatternInvocationBuilder/expressionExplorer"/>
            <linkVariable name="patternVariableHandler" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.3" type="//SingleResultPatternInvocationBuilder/patternVariableHandler"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="ExploreExpressionInterface" outgoing="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.1" incoming="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.8">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ExpressionExplorer/exploreExpression">
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/patternInvocationBuilder">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/pattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/expression">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//SingleResultPatternInvocationBuilder/buildAction.1/expression"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupPatternMatcher" comment="LookupPatternMatcher" outgoing="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.2 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.3" incoming="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.4 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.7">
          <storyPattern comment="LookupPatternMatcher">
            <objectVariable type="//SingleResultPatternInvocationBuilder" name="this" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable type="//PatternMatcher" name="patternMatcher" incomingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0"/>
            <linkVariable name="patternMatcher" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" type="//PatternInvocationBuilder/patternMatcher"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="ExploreExpressionPatternWithoutReturn" outgoing="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.4" incoming="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.5">
          <statementExpression xsi:type="callExpressions:MethodCallExpression">
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//ExpressionTransformer/transformExpression/report"/>
            </ownedParameterBindings>
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//ExpressionTransformer/transformExpression/patternVariableHandler"/>
            </ownedParameterBindings>
            <ownedParameterBindings>
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//SingleResultPatternInvocationBuilder/buildAction.1/expression"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//ExpressionTransformer/transformExpression/expression"/>
            </ownedParameterBindings>
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//ExpressionTransformer/transformExpression/pattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings>
              <valueExpression xsi:type="expressions:LiteralExpression" value="null"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//ExpressionTransformer/transformExpression/expectedType"/>
            </ownedParameterBindings>
            <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//ExpressionTransformer/transformExpression"/>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="ExploreExpressionInterfaceWithoutReturn" outgoing="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.5" incoming="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.15">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ExpressionExplorer/exploreExpression">
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/patternInvocationBuilder">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/pattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/expression">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//SingleResultPatternInvocationBuilder/buildAction.1/expression"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="MergePatternMatchingReport" outgoing="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.6" incoming="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.19">
          <statementExpression xsi:type="callExpressions:MethodCallExpression">
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.13/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/merge/otherReport"/>
            </ownedParameterBindings>
            <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/merge"/>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="ExploreExpression" outgoing="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.7" incoming="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.1">
          <statementExpression xsi:type="callExpressions:MethodCallExpression">
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//ExpressionTransformer/transformAndAssignExpression/report"/>
            </ownedParameterBindings>
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//ExpressionTransformer/transformAndAssignExpression/patternVariableHandler"/>
            </ownedParameterBindings>
            <ownedParameterBindings>
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//SingleResultPatternInvocationBuilder/buildAction.1/expression"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//ExpressionTransformer/transformAndAssignExpression/expression"/>
            </ownedParameterBindings>
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//ExpressionTransformer/transformAndAssignExpression/pattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//ExpressionTransformer/transformAndAssignExpression/variable"/>
            </ownedParameterBindings>
            <ownedParameterBindings>
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.5"/>
              <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//ExpressionTransformer/transformAndAssignExpression/expectedType"/>
            </ownedParameterBindings>
            <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//ExpressionTransformer/transformAndAssignExpression"/>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateControlFlowVariableAndReference" comment="CreateControlFlowVariableAndReference" outgoing="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.8" incoming="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.14">
          <storyPattern comment="CreateControlFlowVariableAndReference">
            <objectVariable name="returnVariable" incomingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.4 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.8" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/constraint/emf.ecore#//EMFVariable"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="&quot;_result&quot;"/>
                <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="scope" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.1 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.2">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope"/>
            </objectVariable>
            <objectVariable name="node" incomingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <objectVariable name="newReference" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.3 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.4 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.7" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//VariableReference"/>
            </objectVariable>
            <objectVariable name="controlFlowVariable" incomingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.1 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.3" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.5 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.6" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression">
                  <ownedParameterBindings>
                    <valueExpression xsi:type="patternExpressions:AttributeValueExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.5">
                      <attribute href="http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name"/>
                    </valueExpression>
                    <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternVariableHandler/concat/first"/>
                  </ownedParameterBindings>
                  <ownedParameterBindings>
                    <valueExpression xsi:type="expressions:LiteralExpression" value="&quot;_0&quot;"/>
                    <parameter href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternVariableHandler/concat/second"/>
                  </ownedParameterBindings>
                  <callee href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternVariableHandler/concat"/>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable/name"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="true"/>
                <attribute href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable/local"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="returnType" incomingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.6" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <objectVariable name="invocation" incomingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.5 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.7" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//SingleResultPatternInvocation"/>
            </objectVariable>
            <objectVariable name="pattern" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.8" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <linkVariable name="eClassifier" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.5" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/constraint/emf.ecore#//EMFVariable/eClassifier"/>
            </linkVariable>
            <linkVariable name="variables" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.4" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/variables"/>
            </linkVariable>
            <linkVariable name="contents" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.2" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Scope/contents"/>
            </linkVariable>
            <linkVariable name="from" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.4" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.3" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//VariableReference/from"/>
            </linkVariable>
            <linkVariable name="to" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.3" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//VariableReference/to"/>
            </linkVariable>
            <linkVariable name="constructor" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.6" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.4" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable/constructor"/>
            </linkVariable>
            <linkVariable name="type" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.5" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.4" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable/type"/>
            </linkVariable>
            <linkVariable name="invocation" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.6" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.3" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//VariableReference/invocation"/>
            </linkVariable>
            <linkVariable name="symbolicParameters" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.7" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//Pattern/symbolicParameters"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupValidationReport" comment="LookupValidationReport" outgoing="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.9" incoming="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.18">
          <storyPattern comment="LookupValidationReport">
            <objectVariable name="report" incomingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable type="//SingleResultPatternInvocationBuilder" name="this" bindingState="BOUND"/>
            <objectVariable type="//ScopeValidator" name="scopeValidator" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupScopeValidator">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
            <linkVariable name="validationReport" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.2" type="//ScopeValidator/validationReport"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HasErrors" outgoing="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.10 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.11" incoming="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.2">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/hasErrors">
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HandleMainAction" comment="HandleMainAction" outgoing="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.12 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.13" incoming="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.3 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.6 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.11">
          <storyPattern comment="HandleMainAction">
            <objectVariable type="//SingleResultPatternInvocationBuilder" name="this" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable name="node" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <objectVariable name="mainAction" incomingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11/@storyPattern/@linkVariable.0 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
            </objectVariable>
            <linkVariable name="result" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.2" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.0" type="//ActionBuilder/result" bindingOperator="DESTROY"/>
            <linkVariable name="mainAction" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.2" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/mainAction"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HasReturnValue" comment="HasReturnValue" outgoing="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.14 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.15" incoming="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.17">
          <storyPattern comment="HasReturnValue">
            <objectVariable name="eOperation" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EOperation"/>
            </objectVariable>
            <objectVariable name="returnType" incomingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.0 //SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <objectVariable name="invocation" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//SingleResultPatternInvocation"/>
            </objectVariable>
            <linkVariable name="eType" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.1" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0">
              <type href="http://www.eclipse.org/emf/2002/Ecore#//ETypedElement/eType"/>
            </linkVariable>
            <linkVariable name="returnType" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.1" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//SingleResultPatternInvocation/returnType"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="GenerateSearchPlan" comment="GenerateSearchPlan" outgoing="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.16" incoming="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.10">
          <storyPattern comment="GenerateSearchPlan">
            <objectVariable name="patternMatchingReport" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternMatcher/generateSearchPlan">
                <ownedParameterBindings parameter="//PatternMatcher/generateSearchPlan/pattern">
                  <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.0"/>
                </ownedParameterBindings>
                <ownedParameterBindings parameter="//PatternMatcher/generateSearchPlan/adornment">
                  <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/calculateAdornment">
                    <ownedParameterBindings parameter="//PatternInvocationBuilder/calculateAdornment/invocation">
                      <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.1"/>
                    </ownedParameterBindings>
                    <target xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.0"/>
                  </valueExpression>
                </ownedParameterBindings>
                <ownedParameterBindings parameter="//PatternMatcher/generateSearchPlan/isMultipleMatch">
                  <valueExpression xsi:type="expressions:LiteralExpression" value="false"/>
                </ownedParameterBindings>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupOrCreateAction" comment="LookupOrCreateAction" outgoing="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.17" incoming="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.0">
          <storyPattern comment="LookupOrCreateAction">
            <objectVariable name="pattern" incomingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.14/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="invocation" outgoingLink="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.14/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//SingleResultPatternInvocation"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupAction">
                <ownedParameterBindings parameter="//ActionBuilder/lookupAction/node">
                  <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//SingleResultPatternInvocationBuilder/buildAction.1/node"/>
                </ownedParameterBindings>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
            <linkVariable name="pattern" target="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.0" source="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation/pattern"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.18"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HandlePatternMatcherReport" outgoing="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.19" incoming="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityEdge.16">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/handlePatternMatcherReport">
            <ownedParameterBindings parameter="//PatternInvocationBuilder/handlePatternMatcherReport/invocation">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//PatternInvocationBuilder/handlePatternMatcherReport/report">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.13/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/buildAction.1/@activity/@ownedActivityNode.11/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="createAction">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//SingleResultPatternInvocation"/>
      <activity owningOperation="//SingleResultPatternInvocationBuilder/createAction">
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/createAction/@activity/@ownedActivityNode.0" target="//SingleResultPatternInvocationBuilder/createAction/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//SingleResultPatternInvocationBuilder/createAction/@activity/@ownedActivityNode.2" target="//SingleResultPatternInvocationBuilder/createAction/@activity/@ownedActivityNode.1"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//SingleResultPatternInvocationBuilder/createAction/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//SingleResultPatternInvocationBuilder/createAction/@activity/@ownedActivityEdge.1">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//SingleResultPatternInvocationBuilder/createAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreatePatternInvocation" comment="CreatePatternInvocation" outgoing="//SingleResultPatternInvocationBuilder/createAction/@activity/@ownedActivityEdge.1" incoming="//SingleResultPatternInvocationBuilder/createAction/@activity/@ownedActivityEdge.0">
          <storyPattern comment="CreatePatternInvocation">
            <objectVariable name="newPatternInvocation" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//SingleResultPatternInvocation"/>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EReference" name="patternVariableHandler" lowerBound="1" containment="true">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//PatternVariableHandler"/>
    </eStructuralFeatures>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="PatternInvocationBuilder" abstract="true" eSuperTypes="//ActionBuilder">
    <eOperations xsi:type="activities:MoflonEOperation" name="attachToResource">
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="calculateAdornment">
      <eType xsi:type="ecore:EDataType" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Adornment"/>
      <eParameters name="invocation">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
      </eParameters>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="calculatePatternName">
      <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EString"/>
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="createAction">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="handlePatternMatcherReport">
      <eParameters name="invocation">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
      </eParameters>
      <eParameters name="report">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
      </eParameters>
      <activity owningOperation="//PatternInvocationBuilder/handlePatternMatcherReport">
        <ownedActivityEdge source="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.1" target="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.2" guard="SUCCESS"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.1" target="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.0" guard="FAILURE"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.2" target="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.0" guard="END"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.3" target="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.1"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityEdge.1 //PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityEdge.2"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupActivityNode" comment="LookupActivityNode" outgoing="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityEdge.0 //PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityEdge.1" incoming="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityEdge.3">
          <storyPattern comment="LookupActivityNode">
            <objectVariable name="activity" incomingLink="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/ActivityNode"/>
            </objectVariable>
            <objectVariable name="invocation" incomingLink="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
            </objectVariable>
            <objectVariable name="node" outgoingLink="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.1 //PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <linkVariable name="actions" target="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1" source="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/actions"/>
            </linkVariable>
            <linkVariable name="origin" target="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0" source="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/origin"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="SetErrorMessageLocation" comment="SetErrorMessageLocation" outgoing="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityEdge.2" incoming="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityEdge.0" forEach="true">
          <storyPattern comment="SetErrorMessageLocation">
            <objectVariable name="message" incomingLink="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1" outgoingLink="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
            </objectVariable>
            <objectVariable name="activity" incomingLink="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/ActivityNode"/>
            </objectVariable>
            <objectVariable name="report" outgoingLink="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <linkVariable name="location" target="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1" source="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
            <linkVariable name="errorMessages" target="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" source="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//PatternInvocationBuilder/handlePatternMatcherReport/@activity/@ownedActivityEdge.3"/>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="handleVariableReference">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//VariableReference"/>
      <eParameters name="variable">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Variable"/>
      </eParameters>
      <eParameters name="variableType">
        <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
      </eParameters>
      <activity owningOperation="//PatternInvocationBuilder/handleVariableReference">
        <ownedActivityEdge source="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.1" target="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.2" target="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.3" target="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4" target="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.0"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityEdge.3">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.2"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupOrCreateControlFlowVariable" comment="LookupOrCreateControlFlowVariable" outgoing="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityEdge.1" incoming="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityEdge.2">
          <storyPattern comment="LookupOrCreateControlFlowVariable">
            <objectVariable name="cfVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupControlFlowVariable">
                <ownedParameterBindings parameter="//ActionBuilder/lookupControlFlowVariable/action">
                  <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
                </ownedParameterBindings>
                <ownedParameterBindings parameter="//ActionBuilder/lookupControlFlowVariable/variableName">
                  <valueExpression xsi:type="patternExpressions:AttributeValueExpression" object="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1">
                    <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
                  </valueExpression>
                </ownedParameterBindings>
                <ownedParameterBindings parameter="//ActionBuilder/lookupControlFlowVariable/variableType">
                  <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//PatternInvocationBuilder/handleVariableReference/variableType"/>
                </ownedParameterBindings>
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupPatternInvocation" comment="LookupPatternInvocation" outgoing="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityEdge.2" incoming="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityEdge.0">
          <storyPattern comment="LookupPatternInvocation">
            <objectVariable type="//PatternInvocationBuilder" name="this" outgoingLink="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable name="invocation" incomingLink="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
            </objectVariable>
            <linkVariable name="result" target="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1" source="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" type="//ActionBuilder/result"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateVariableReference" comment="CreateVariableReference" outgoing="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityEdge.3" incoming="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityEdge.1">
          <storyPattern comment="CreateVariableReference">
            <objectVariable name="invocation" incomingLink="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
            </objectVariable>
            <objectVariable name="variable" incomingLink="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Variable"/>
            </objectVariable>
            <objectVariable name="newReference" outgoingLink="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.1 //PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.2 //PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//VariableReference"/>
            </objectVariable>
            <objectVariable name="cfVariable" incomingLink="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
            </objectVariable>
            <linkVariable name="invocation" target="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0" source="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//VariableReference/invocation"/>
            </linkVariable>
            <linkVariable name="from" target="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.3" source="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//VariableReference/from"/>
            </linkVariable>
            <linkVariable name="to" target="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1" source="//PatternInvocationBuilder/handleVariableReference/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//VariableReference/to"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="hasErrors">
      <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
      <activity owningOperation="//PatternInvocationBuilder/hasErrors">
        <ownedActivityEdge source="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.0" target="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.2" target="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.7" guard="FAILURE"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.2" target="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.1" guard="SUCCESS"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.3" target="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.5" target="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.6"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.6" target="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.4" guard="SUCCESS"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.6" target="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.2" guard="FAILURE"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityEdge.2">
          <returnValue xsi:type="expressions:LiteralExpression" value="true"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HasError" comment="HasError" outgoing="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityEdge.1 //PatternInvocationBuilder/hasErrors/@activity/@ownedActivityEdge.2" incoming="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityEdge.6">
          <storyPattern comment="HasError">
            <objectVariable name="report" outgoingLink="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable name="error" incomingLink="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1">
                    <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <linkVariable name="errorMessages" target="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1" source="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="Init" comment="Init" outgoing="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityEdge.3" incoming="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityEdge.0">
          <storyPattern comment="Init">
            <objectVariable type="//PatternInvocationBuilder" name="this" bindingState="BOUND"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityEdge.5">
          <returnValue xsi:type="expressions:LiteralExpression" value="true"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupValidationReport" comment="LookupValidationReport" outgoing="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityEdge.4" incoming="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityEdge.3">
          <storyPattern comment="LookupValidationReport">
            <objectVariable name="report" incomingLink="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable type="//ScopeValidator" name="scopeValidator" outgoingLink="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupScopeValidator">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
            <linkVariable name="validationReport" target="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0" source="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" type="//ScopeValidator/validationReport"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="HasFatal" comment="HasFatal" outgoing="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityEdge.5 //PatternInvocationBuilder/hasErrors/@activity/@ownedActivityEdge.6" incoming="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityEdge.4">
          <storyPattern comment="HasFatal">
            <objectVariable name="fatal" incomingLink="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.FATAL"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="report" outgoingLink="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.6/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <linkVariable name="errorMessages" target="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0" source="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//PatternInvocationBuilder/hasErrors/@activity/@ownedActivityEdge.1">
          <returnValue xsi:type="expressions:LiteralExpression" value="false"/>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="lookupAction">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <activity owningOperation="//PatternInvocationBuilder/lookupAction">
        <ownedActivityEdge source="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.0" target="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.1" target="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.6"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.2" target="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.1"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.4" target="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.5" guard="FAILURE"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.4" target="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.3" guard="SUCCESS"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.5" target="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.6" target="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.7"/>
        <ownedActivityEdge source="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.8" target="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.4"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="AttachPatternToResource" outgoing="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityEdge.0" incoming="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityEdge.5">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/attachToResource">
            <ownedParameterBindings parameter="//PatternInvocationBuilder/attachToResource/node">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//PatternInvocationBuilder/lookupAction/node"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//PatternInvocationBuilder/attachToResource/pattern">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="InitializePatternBody" comment="InitializePatternBody" outgoing="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityEdge.1" incoming="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityEdge.2">
          <storyPattern comment="InitializePatternBody">
            <objectVariable name="newPattern" incomingLink="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="newBody" outgoingLink="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//PatternBody"/>
            </objectVariable>
            <linkVariable name="header" target="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0" source="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//PatternBody/header"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="InitializePattern" comment="InitializePattern" outgoing="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityEdge.2" incoming="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityEdge.0">
          <storyPattern comment="InitializePattern">
            <objectVariable name="newPattern" incomingLink="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="newPatternInvocation" outgoingLink="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
            </objectVariable>
            <linkVariable name="pattern" target="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" source="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation/pattern"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityEdge.4">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ResultAlreadyAvailable" comment="ResultAlreadyAvailable" outgoing="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityEdge.3 //PatternInvocationBuilder/lookupAction/@activity/@ownedActivityEdge.4" incoming="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityEdge.7">
          <storyPattern comment="ResultAlreadyAvailable">
            <objectVariable name="patternInvocation" incomingLink="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
            </objectVariable>
            <objectVariable type="//PatternInvocationBuilder" name="this" outgoingLink="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <linkVariable name="result" target="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0" source="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1" type="//ActionBuilder/result"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreatePatternInvocation" comment="CreatePatternInvocation" outgoing="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityEdge.5" incoming="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityEdge.3">
          <storyPattern comment="CreatePatternInvocation">
            <objectVariable name="newPatternInvocation" incomingLink="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//PatternInvocation"/>
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/createAction">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
              </bindingExpression>
            </objectVariable>
            <objectVariable type="//PatternInvocationBuilder" name="this" outgoingLink="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable name="newPattern" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/calculatePatternName">
                  <ownedParameterBindings parameter="//PatternInvocationBuilder/calculatePatternName/node">
                    <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//PatternInvocationBuilder/lookupAction/node"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
                </valueExpression>
                <attribute href="http://gervarro.org/democles/specification.ecore#//Pattern/name"/>
              </attributeAssignment>
            </objectVariable>
            <linkVariable name="result" target="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0" source="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" type="//ActionBuilder/result" bindingOperator="CREATE"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="AddPatternInvocation" outgoing="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityEdge.6" incoming="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityEdge.1">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/addAction">
            <ownedParameterBindings parameter="//ActionBuilder/addAction/node">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//PatternInvocationBuilder/lookupAction/node"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ActionBuilder/addAction/newAction">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityEdge.6">
          <returnValue xsi:type="patternExpressions:ObjectVariableExpression" object="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//PatternInvocationBuilder/lookupAction/@activity/@ownedActivityEdge.7"/>
      </activity>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EReference" name="expressionExplorer" eType="//ExpressionExplorer"/>
    <eStructuralFeatures xsi:type="ecore:EReference" name="patternMatcher" eType="//PatternMatcher"/>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="suffix" ordered="false" lowerBound="1">
      <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EString"/>
    </eStructuralFeatures>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="StoryNodeActionBuilder" eSuperTypes="//CompoundActionBuilder">
    <eOperations xsi:type="activities:MoflonEOperation" name="buildAction">
      <eParameters name="node">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
      </eParameters>
      <activity owningOperation="//StoryNodeActionBuilder/buildAction">
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.0" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.1" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.4" guard="FAILURE"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.1" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.13" guard="SUCCESS"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.2" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.7" guard="END"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.2" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.3" guard="EACH_TIME"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.3" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.2"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.5" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.6" guard="FAILURE"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.5" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.2" guard="SUCCESS"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.7" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.10" guard="SUCCESS"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.7" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.6" guard="FAILURE"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.8" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.11" guard="EACH_TIME"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.8" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.1" guard="END"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.9" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.10" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.12" guard="EACH_TIME"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.10" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.8" guard="END"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.11" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.8"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.12" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.10"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.13" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.0" guard="FAILURE"/>
        <ownedActivityEdge source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.13" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.4" guard="SUCCESS"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="EmptyForEachNodeError" comment="EmptyForEachNodeError" outgoing="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.0" incoming="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.17">
          <storyPattern comment="EmptyForEachNodeError">
            <objectVariable type="//ScopeValidator" name="scopeValidator" outgoingLink="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable name="report" incomingLink="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.0" outgoingLink="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable name="emptyForEachNode" incomingLink="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.1" outgoingLink="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.2" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.EMPTY_FOREACH_NODE"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="storyNode" incomingLink="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/StoryNode"/>
            </objectVariable>
            <linkVariable name="validationReport" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1" source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0" type="//ScopeValidator/validationReport"/>
            <linkVariable name="errorMessages" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.2" source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
            <linkVariable name="location" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.3" source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsForEachActionBuilder" comment="IsForEachActionBuilder" outgoing="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.1 //StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.2" incoming="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.11">
          <storyPattern comment="IsForEachActionBuilder">
            <objectVariable type="//StoryNodeActionBuilder" name="this" bindingState="BOUND">
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="true"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0" attribute="//StoryNodeActionBuilder/requiresForEach"/>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="forEachNode" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//ForEach"/>
              <bindingExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0"/>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllActionBuilders" comment="ForAllActionBuilders" outgoing="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.3 //StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.4" incoming="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.5 //StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.7" forEach="true">
          <storyPattern comment="ForAllActionBuilders">
            <objectVariable type="//StoryNodeActionBuilder" name="this" outgoingLink="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND"/>
            <objectVariable type="//ActionBuilder" name="childBuilder" incomingLink="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0"/>
            <linkVariable name="children" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1" source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" type="//CompoundActionBuilder/children"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="InvokeActionBuilder" outgoing="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.5" incoming="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.4">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/buildAction">
            <ownedParameterBindings parameter="//ActionBuilder/buildAction/node">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//StoryNodeActionBuilder/buildAction/node"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.0 //StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.1 //StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.18"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupStoryPattern" comment="LookupStoryPattern" outgoing="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.6 //StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.7" incoming="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.12">
          <storyPattern comment="LookupStoryPattern">
            <objectVariable name="node" outgoingLink="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode"/>
            </objectVariable>
            <objectVariable name="storyNode" incomingLink="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0 //StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/StoryNode"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="patternExpressions:AttributeValueExpression" object="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" attribute="//StoryNodeActionBuilder/requiresForEach"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//activities/StoryNode/forEach"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <objectVariable name="storyPattern" outgoingLink="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <linkVariable name="origin" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/origin"/>
            </linkVariable>
            <linkVariable name="storyNode" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/storyNode"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.6 //StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.9"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupScopeValidator" comment="LookupScopeValidator" outgoing="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.8 //StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.9" incoming="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.3">
          <storyPattern comment="LookupScopeValidator">
            <objectVariable type="//ScopeValidator" name="scopeValidator" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//ActionBuilder/lookupScopeValidator">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllLinkVariables" comment="ForAllLinkVariables" outgoing="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.10 //StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.11" incoming="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.14 //StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.15" forEach="true">
          <storyPattern comment="ForAllLinkVariables">
            <objectVariable name="storyPattern" outgoingLink="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <objectVariable name="linkVariable" incomingLink="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/LinkVariable"/>
            </objectVariable>
            <linkVariable name="linkVariable" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1" source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/linkVariable"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.12"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllObjectVariables" comment="ForAllObjectVariables" outgoing="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.13 //StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.14" incoming="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.8 //StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.16" forEach="true">
          <storyPattern comment="ForAllObjectVariables">
            <objectVariable name="objectVariable" incomingLink="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="storyPattern" outgoingLink="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern"/>
            </objectVariable>
            <linkVariable name="objectVariable" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.0" source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/StoryPattern/objectVariable"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="LinkVariableAnalysis" outgoing="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.15" incoming="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.10">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/analyzeLinkVariable">
            <ownedParameterBindings parameter="//ScopeValidator/analyzeLinkVariable/node">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ScopeValidator/analyzeLinkVariable/linkVariable">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.8/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="ObjectVariableAnalysis" outgoing="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.16" incoming="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.13">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/analyzeObjectVariable">
            <ownedParameterBindings parameter="//ScopeValidator/analyzeObjectVariable/node">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//StoryNodeActionBuilder/buildAction/node"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ScopeValidator/analyzeObjectVariable/objectVariable">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.7/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="MainActionInForEachNode" comment="MainActionInForEachNode" outgoing="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.17 //StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.18" incoming="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityEdge.2">
          <storyPattern comment="MainActionInForEachNode">
            <objectVariable name="forEachNode" outgoingLink="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.13/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//ForEach"/>
            </objectVariable>
            <objectVariable name="mainAction" incomingLink="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.13/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <linkVariable name="mainAction" target="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.13/@storyPattern/@objectVariable.1" source="//StoryNodeActionBuilder/buildAction/@activity/@ownedActivityNode.13/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFNode/mainAction"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EAttribute" name="requiresForEach" ordered="false" lowerBound="1">
      <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EBoolean"/>
    </eStructuralFeatures>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="CompoundActionBuilder" abstract="true" eSuperTypes="//ActionBuilder">
    <eStructuralFeatures xsi:type="ecore:EReference" name="children" upperBound="-1" eType="//ActionBuilder" containment="true" eOpposite="//ActionBuilder/parent"/>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="GreenPatternBuilder" eSuperTypes="//RegularPatternInvocationBuilder">
    <eOperations xsi:type="activities:MoflonEOperation" name="validateVariable">
      <eParameters name="action">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
      </eParameters>
      <eParameters name="variable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
      </eParameters>
      <eParameters name="objectVariable">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
      </eParameters>
      <activity owningOperation="//GreenPatternBuilder/validateVariable">
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.0" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.11"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.1" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.9" guard="SUCCESS"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.1" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.17" guard="FAILURE"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10" guard="SUCCESS"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.4" guard="FAILURE"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.4" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.14" guard="FAILURE"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.4" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.6" guard="SUCCESS"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.5" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.6" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.15" guard="FAILURE"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.6" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.1" guard="SUCCESS"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.8" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.16"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.9" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.17"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.11" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.12" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.13"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.14" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.8" guard="FAILURE"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.14" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.2" guard="SUCCESS"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.15" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.7"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.17" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.13" guard="FAILURE"/>
        <ownedActivityEdge source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.17" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.12" guard="SUCCESS"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="Init" comment="Init" outgoing="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.0" incoming="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.7">
          <storyPattern comment="Init">
            <objectVariable type="//GreenPatternBuilder" name="this" bindingState="BOUND"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="GreenVariableWithBinding" comment="GreenVariableWithBinding" outgoing="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.1 //GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.2" incoming="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.9">
          <storyPattern comment="GreenVariableWithBinding">
            <objectVariable name="objectVariable" outgoingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="binding" incomingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//expressions/Expression"/>
            </objectVariable>
            <linkVariable name="bindingExpression" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.1" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.1/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingExpression"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.16"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="MultipleAttributeAssignment" comment="MultipleAttributeAssignment" outgoing="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.3 //GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.4" incoming="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.13">
          <storyPattern comment="MultipleAttributeAssignment">
            <objectVariable name="assignment2" incomingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.2" outgoingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/AttributeAssignment"/>
            </objectVariable>
            <objectVariable name="objectVariable" outgoingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.1 //GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="attribute" incomingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.0 //GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.3">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EAttribute"/>
            </objectVariable>
            <objectVariable name="assignment1" incomingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.1" outgoingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@linkVariable.3">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/AttributeAssignment"/>
            </objectVariable>
            <linkVariable name="attribute" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.2" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/AttributeAssignment/attribute"/>
            </linkVariable>
            <linkVariable name="attributeAssignment" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.3" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/attributeAssignment"/>
            </linkVariable>
            <linkVariable name="attributeAssignment" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.0" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/attributeAssignment"/>
            </linkVariable>
            <linkVariable name="attribute" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.2" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.3/@storyPattern/@objectVariable.3">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/AttributeAssignment/attribute"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsVariableFree" comment="IsVariableFree" outgoing="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.5 //GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.6" incoming="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.4 //GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.12">
          <storyPattern comment="IsVariableFree">
            <objectVariable name="variable" outgoingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable"/>
            </objectVariable>
            <objectVariable name="action" incomingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.4/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//Action"/>
            </objectVariable>
            <linkVariable name="constructor" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.1" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.4/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/org.moflon.sdm.runtime.democles/model/Democles.ecore#//CFVariable/constructor"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.7"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsGreenVariable" comment="IsGreenVariable" outgoing="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.8 //GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.9" incoming="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.6">
          <storyPattern comment="IsGreenVariable">
            <objectVariable name="objectVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingOperator.CREATE"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.6/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingOperator"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.17"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ReportErrorByNonBlackBoundVariables" comment="ReportErrorByNonBlackBoundVariables" outgoing="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.10" incoming="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.15">
          <storyPattern comment="ReportErrorByNonBlackBoundVariables"/>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ReportGreenVariableWithBinding" comment="ReportGreenVariableWithBinding" outgoing="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.11" incoming="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.1">
          <storyPattern comment="ReportGreenVariableWithBinding">
            <objectVariable name="report4" incomingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.2" outgoingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable name="objectVariable" incomingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="greenVariableWithBindingError" incomingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.0" outgoingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.1" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.GREEN_VARIABLE_WITH_BINDING"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.1"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable type="//ScopeValidator" name="scopeValidator" outgoingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.2" bindingState="BOUND"/>
            <linkVariable name="errorMessages" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.2" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
            <linkVariable name="location" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.1" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
            <linkVariable name="validationReport" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.3" type="//ScopeValidator/validationReport"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ReportMultipleAttributeAssignment" comment="ReportMultipleAttributeAssignment" outgoing="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.12" incoming="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.3">
          <storyPattern comment="ReportMultipleAttributeAssignment">
            <objectVariable name="report2" incomingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.1" outgoingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable type="//ScopeValidator" name="scopeValidator" outgoingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.1" bindingState="BOUND"/>
            <objectVariable name="objectVariable" incomingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.2" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="errorMultipleAttributeAssignment" incomingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.0" outgoingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@linkVariable.2" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.MULTIPLE_ATTRIBUTE_ASSIGNMENT"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.1"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <linkVariable name="errorMessages" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.3" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
            <linkVariable name="validationReport" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.0" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.1" type="//ScopeValidator/validationReport"/>
            <linkVariable name="location" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.2" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.3" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="LookupScopeValidator" comment="LookupScopeValidator" outgoing="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.13" incoming="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.0">
          <storyPattern comment="LookupScopeValidator">
            <objectVariable type="//ScopeValidator" name="scopeValidator" bindingState="BOUND">
              <bindingExpression xsi:type="callExpressions:MethodCallExpression" callee="//RegularPatternInvocationBuilder/lookupScopeValidator">
                <target xsi:type="patternExpressions:ObjectVariableExpression" object="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
              </bindingExpression>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ReportFreeGreenVariableMarkedAsBound" comment="ReportFreeGreenVariableMarkedAsBound" outgoing="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.14" incoming="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.19">
          <storyPattern comment="ReportFreeGreenVariableMarkedAsBound">
            <objectVariable name="report3" incomingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.2" outgoingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable name="freeGreenVariableMarkedAsBoundError" incomingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.0" outgoingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.1" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.FREE_GREEN_VARIABLE_MARKED_AS_BOUND"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.1"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable name="objectVariable" incomingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable type="//ScopeValidator" name="scopeValidator" outgoingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.2" bindingState="BOUND"/>
            <linkVariable name="errorMessages" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.1" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
            <linkVariable name="location" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.2" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.1" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
            <linkVariable name="validationReport" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.3" type="//ScopeValidator/validationReport"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.14 //GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.18"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsBlackVariable" comment="IsBlackVariable" outgoing="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.15 //GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.16" incoming="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.5">
          <storyPattern comment="IsBlackVariable">
            <objectVariable name="objectVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingOperator.CHECK_ONLY"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.14/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingOperator"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ReportErrorByNonGreenFreeVariables" comment="ReportErrorByNonGreenFreeVariables" outgoing="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.17" incoming="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.8">
          <storyPattern comment="ReportErrorByNonGreenFreeVariables">
            <objectVariable name="report" incomingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.2" outgoingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport"/>
            </objectVariable>
            <objectVariable name="objectVariable" incomingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="errorGreenNotFree" incomingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.1" outgoingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.0" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage"/>
              <attributeAssignment>
                <valueExpression xsi:type="expressions:LiteralExpression" value="ValidationResult.Severity.ERROR"/>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/severity"/>
              </attributeAssignment>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:MethodCallExpression" callee="//ScopeValidator/lookupErrorMessage">
                  <ownedParameterBindings parameter="//ScopeValidator/lookupErrorMessage/errorID">
                    <valueExpression xsi:type="expressions:LiteralExpression" value="ScopeValidation.Errors.GREEN_VAR_IS_NOT_NEW"/>
                  </ownedParameterBindings>
                  <target xsi:type="patternExpressions:ObjectVariableExpression" object="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.10/@storyPattern/@objectVariable.1"/>
                </valueExpression>
                <attribute href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/id"/>
              </attributeAssignment>
            </objectVariable>
            <objectVariable type="//ScopeValidator" name="scopeValidator" outgoingLink="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.2" bindingState="BOUND"/>
            <linkVariable name="location" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.1" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ErrorMessage/location"/>
            </linkVariable>
            <linkVariable name="errorMessages" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.2" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="platform:/plugin/org.moflon.sdm.compiler.democles.validation.result/model/Result.ecore#//ValidationReport/errorMessages"/>
            </linkVariable>
            <linkVariable name="validationReport" target="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.0" source="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.3" type="//ScopeValidator/validationReport"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.10"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="IsFreeGreenVariableMarkedAsBound" comment="IsFreeGreenVariableMarkedAsBound" outgoing="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.18 //GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.19" incoming="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.2 //GreenPatternBuilder/validateVariable/@activity/@ownedActivityEdge.11">
          <storyPattern comment="IsFreeGreenVariableMarkedAsBound">
            <objectVariable name="objectVariable" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="expressions:LiteralExpression" value="SDMLanguage.patterns.BindingState.BOUND"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//GreenPatternBuilder/validateVariable/@activity/@ownedActivityNode.17/@storyPattern/@objectVariable.0">
                    <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable/bindingState"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
  </eClassifiers>
  <eClassifiers xsi:type="ecore:EClass" name="ExpressionExplorer">
    <eOperations xsi:type="activities:MoflonEOperation" name="exploreExpression">
      <eParameters name="patternInvocationBuilder" eType="//PatternInvocationBuilder"/>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <eParameters name="expression">
        <eType xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//expressions/Expression"/>
      </eParameters>
      <activity owningOperation="//ExpressionExplorer/exploreExpression">
        <ownedActivityEdge source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.0" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.9"/>
        <ownedActivityEdge source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.1" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.6"/>
        <ownedActivityEdge source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.2" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.15" guard="FAILURE"/>
        <ownedActivityEdge source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.2" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.8" guard="SUCCESS"/>
        <ownedActivityEdge source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.3" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.12"/>
        <ownedActivityEdge source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.4" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.11"/>
        <ownedActivityEdge source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.5" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.12"/>
        <ownedActivityEdge source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.8" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.10"/>
        <ownedActivityEdge source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.9" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.2" guard="FAILURE"/>
        <ownedActivityEdge source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.9" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.1" guard="SUCCESS"/>
        <ownedActivityEdge source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.12" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.13" guard="END"/>
        <ownedActivityEdge source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.12" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.5" guard="EACH_TIME"/>
        <ownedActivityEdge source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.14" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.0"/>
        <ownedActivityEdge source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.15" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.16" guard="FAILURE"/>
        <ownedActivityEdge source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.15" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.3" guard="SUCCESS"/>
        <ownedActivityEdge source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.16" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.7" guard="FAILURE"/>
        <ownedActivityEdge source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.16" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.4" guard="SUCCESS"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="Init" comment="Init" outgoing="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.0" incoming="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.12">
          <storyPattern comment="Init">
            <objectVariable type="//ExpressionExplorer" name="this" bindingState="BOUND"/>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HandleSymbolicParameter1" outgoing="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.1" incoming="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.9">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ExpressionExplorer/handleSymbolicParameter">
            <ownedParameterBindings parameter="//ExpressionExplorer/handleSymbolicParameter/patternInvocationBuilder">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/exploreExpression/patternInvocationBuilder"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/handleSymbolicParameter/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/exploreExpression/pattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/handleSymbolicParameter/variableName">
              <valueExpression xsi:type="patternExpressions:AttributeValueExpression" object="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0">
                <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
              </valueExpression>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/handleSymbolicParameter/variableType">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.1"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ObjectVariableExpressionFound" comment="ObjectVariableExpressionFound" outgoing="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.2 //ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.3" incoming="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.8">
          <storyPattern comment="ObjectVariableExpressionFound">
            <objectVariable name="objectVariableType" incomingLink="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <objectVariable name="objectVariableExpression" outgoingLink="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/patternExpressions/ObjectVariableExpression"/>
              <bindingExpression xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/exploreExpression/expression"/>
            </objectVariable>
            <objectVariable name="objectVariable" incomingLink="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" outgoingLink="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <linkVariable name="object" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2" source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/patternExpressions/ObjectRefExpression/object"/>
            </linkVariable>
            <linkVariable name="type" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//TypedElement/type"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="ExploreMethodOwnerExpression" outgoing="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.4" incoming="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.14">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ExpressionExplorer/exploreExpression">
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/patternInvocationBuilder">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/exploreExpression/patternInvocationBuilder"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/exploreExpression/pattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/expression">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HandleSymbolicParameter3" outgoing="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.5" incoming="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.16">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ExpressionExplorer/handleSymbolicParameter">
            <ownedParameterBindings parameter="//ExpressionExplorer/handleSymbolicParameter/patternInvocationBuilder">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/exploreExpression/patternInvocationBuilder"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/handleSymbolicParameter/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/exploreExpression/pattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/handleSymbolicParameter/variableName">
              <valueExpression xsi:type="patternExpressions:AttributeValueExpression" object="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.1">
                <attribute href="http://www.eclipse.org/emf/2002/Ecore#//ENamedElement/name"/>
              </valueExpression>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/handleSymbolicParameter/variableType">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.2"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="ExploreParameterValueExpression" outgoing="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.6" incoming="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.11">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ExpressionExplorer/exploreExpression">
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/patternInvocationBuilder">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/exploreExpression/patternInvocationBuilder"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/exploreExpression/pattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/exploreExpression/expression">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.2"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.1"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.15"/>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HandleSymbolicParameter2" outgoing="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.7" incoming="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.3">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//ExpressionExplorer/handleSymbolicParameter">
            <ownedParameterBindings parameter="//ExpressionExplorer/handleSymbolicParameter/patternInvocationBuilder">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/exploreExpression/patternInvocationBuilder"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/handleSymbolicParameter/pattern">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/exploreExpression/pattern"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/handleSymbolicParameter/variableName">
              <valueExpression xsi:type="patternExpressions:AttributeValueExpression" object="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2">
                <attribute href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//NamedElement/name"/>
              </valueExpression>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//ExpressionExplorer/handleSymbolicParameter/variableType">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0"/>
            </ownedParameterBindings>
            <target xsi:type="patternExpressions:ObjectVariableExpression" object="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.0/@storyPattern/@objectVariable.0"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="AttributeValueExpressionFound" comment="AttributeValueExpressionFound" outgoing="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.8 //ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.9" incoming="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.0">
          <storyPattern comment="AttributeValueExpressionFound">
            <objectVariable name="attributeOwner" incomingLink="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.1" outgoingLink="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/ObjectVariable"/>
            </objectVariable>
            <objectVariable name="attributeOwnerType" incomingLink="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <objectVariable name="attributeValueExpression" outgoingLink="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.9/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/patternExpressions/AttributeValueExpression"/>
              <bindingExpression xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/exploreExpression/expression"/>
            </objectVariable>
            <linkVariable name="type" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.1" source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//TypedElement/type"/>
            </linkVariable>
            <linkVariable name="object" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.0" source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.9/@storyPattern/@objectVariable.2">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//patterns/patternExpressions/ObjectRefExpression/object"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.7"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.5"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ForAllParameters" comment="ForAllParameters" outgoing="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.10 //ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.11" incoming="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.4 //ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.6" forEach="true">
          <storyPattern comment="ForAllParameters">
            <objectVariable name="parameterBinding" outgoingLink="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.0 //ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//calls/ParameterBinding"/>
            </objectVariable>
            <objectVariable name="methodCallExpression" incomingLink="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//calls/callExpressions/MethodCallExpression"/>
            </objectVariable>
            <objectVariable name="parameterValueExpression" incomingLink="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.12/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//expressions/Expression"/>
            </objectVariable>
            <linkVariable name="valueExpression" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.2" source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//calls/ParameterBinding/valueExpression"/>
            </linkVariable>
            <linkVariable name="invocation" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.1" source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.12/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//calls/ParameterBinding/invocation"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.10"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.12"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="MethodCallExpressionFound" comment="MethodCallExpressionFound" outgoing="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.13 //ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.14" incoming="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.2">
          <storyPattern comment="MethodCallExpressionFound">
            <objectVariable name="methodOwnerExpression" incomingLink="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//expressions/Expression"/>
            </objectVariable>
            <objectVariable name="methodCallExpression" outgoingLink="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.15/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//calls/callExpressions/MethodCallExpression"/>
              <bindingExpression xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/exploreExpression/expression"/>
            </objectVariable>
            <linkVariable name="target" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.0" source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.15/@storyPattern/@objectVariable.1">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//calls/callExpressions/MethodCallExpression/target"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StoryNode" name="ParameterExpressionFound" comment="ParameterExpressionFound" outgoing="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.15 //ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.16" incoming="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityEdge.13">
          <storyPattern comment="ParameterExpressionFound">
            <objectVariable name="parameterExpression" outgoingLink="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.16/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//calls/callExpressions/ParameterExpression"/>
              <bindingExpression xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/exploreExpression/expression"/>
            </objectVariable>
            <objectVariable name="eParameter" incomingLink="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.16/@storyPattern/@linkVariable.0" outgoingLink="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.16/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EParameter"/>
            </objectVariable>
            <objectVariable name="parameterType" incomingLink="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.16/@storyPattern/@linkVariable.1">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <linkVariable name="parameter" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.1" source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.0">
              <type href="platform:/plugin/SDMLanguage/model/SDMLanguage.ecore#//calls/callExpressions/ParameterExpression/parameter"/>
            </linkVariable>
            <linkVariable name="eType" target="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.2" source="//ExpressionExplorer/exploreExpression/@activity/@ownedActivityNode.16/@storyPattern/@objectVariable.1">
              <type href="http://www.eclipse.org/emf/2002/Ecore#//ETypedElement/eType"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eOperations xsi:type="activities:MoflonEOperation" name="handleSymbolicParameter">
      <eParameters name="patternInvocationBuilder" eType="//PatternInvocationBuilder"/>
      <eParameters name="pattern">
        <eType xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
      </eParameters>
      <eParameters name="variableName">
        <eType xsi:type="ecore:EDataType" href="http://www.eclipse.org/emf/2002/Ecore#//EString"/>
      </eParameters>
      <eParameters name="variableType">
        <eType xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
      </eParameters>
      <activity owningOperation="//ExpressionExplorer/handleSymbolicParameter">
        <ownedActivityEdge source="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.0" target="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.5"/>
        <ownedActivityEdge source="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.2" target="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.3"/>
        <ownedActivityEdge source="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.3" target="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.4"/>
        <ownedActivityEdge source="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.5" target="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.2" guard="FAILURE"/>
        <ownedActivityEdge source="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.5" target="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.1" guard="SUCCESS"/>
        <ownedActivityNode xsi:type="activities:StartNode" outgoing="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityEdge.0"/>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityEdge.4"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="CreateSymbolicParameter" comment="CreateSymbolicParameter" outgoing="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityEdge.1" incoming="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityEdge.3">
          <storyPattern comment="CreateSymbolicParameter">
            <objectVariable name="pattern" outgoingLink="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="variableType" incomingLink="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://www.eclipse.org/emf/2002/Ecore#//EClassifier"/>
            </objectVariable>
            <objectVariable name="newVariable" incomingLink="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.0" outgoingLink="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.2/@storyPattern/@linkVariable.1" bindingOperator="CREATE">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/constraint/emf.ecore#//EMFVariable"/>
              <attributeAssignment>
                <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/handleSymbolicParameter/variableName"/>
                <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
              </attributeAssignment>
            </objectVariable>
            <linkVariable name="symbolicParameters" target="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2" source="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.0" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/specification.ecore#//Pattern/symbolicParameters"/>
            </linkVariable>
            <linkVariable name="eClassifier" target="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.1" source="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2" bindingOperator="CREATE">
              <type href="http://gervarro.org/democles/constraint/emf.ecore#//EMFVariable/eClassifier"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StatementNode" name="HandleVariableReference" outgoing="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityEdge.2" incoming="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityEdge.1">
          <statementExpression xsi:type="callExpressions:MethodCallExpression" callee="//PatternInvocationBuilder/handleVariableReference">
            <ownedParameterBindings parameter="//PatternInvocationBuilder/handleVariableReference/variable">
              <valueExpression xsi:type="patternExpressions:ObjectVariableExpression" object="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.2/@storyPattern/@objectVariable.2"/>
            </ownedParameterBindings>
            <ownedParameterBindings parameter="//PatternInvocationBuilder/handleVariableReference/variableType">
              <valueExpression xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/handleSymbolicParameter/variableType"/>
            </ownedParameterBindings>
            <target xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/handleSymbolicParameter/patternInvocationBuilder"/>
          </statementExpression>
        </ownedActivityNode>
        <ownedActivityNode xsi:type="activities:StopNode" incoming="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityEdge.2"/>
        <ownedActivityNode xsi:type="activities:StoryNode" name="SymbolicParameterExists" comment="SymbolicParameterExists" outgoing="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityEdge.3 //ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityEdge.4" incoming="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityEdge.0">
          <storyPattern comment="SymbolicParameterExists">
            <objectVariable name="pattern" outgoingLink="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0" bindingState="BOUND">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Pattern"/>
            </objectVariable>
            <objectVariable name="variable" incomingLink="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.5/@storyPattern/@linkVariable.0">
              <type xsi:type="ecore:EClass" href="http://gervarro.org/democles/specification.ecore#//Variable"/>
              <constraint>
                <constraintExpression xsi:type="expressions:ComparisonExpression" operator="EQUAL">
                  <rightExpression xsi:type="callExpressions:ParameterExpression" parameter="//ExpressionExplorer/handleSymbolicParameter/variableName"/>
                  <leftExpression xsi:type="patternExpressions:AttributeValueExpression" object="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1">
                    <attribute href="http://gervarro.org/democles/specification.ecore#//Variable/name"/>
                  </leftExpression>
                </constraintExpression>
              </constraint>
            </objectVariable>
            <linkVariable name="symbolicParameters" target="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.1" source="//ExpressionExplorer/handleSymbolicParameter/@activity/@ownedActivityNode.5/@storyPattern/@objectVariable.0">
              <type href="http://gervarro.org/democles/specification.ecore#//Pattern/symbolicParameters"/>
            </linkVariable>
          </storyPattern>
        </ownedActivityNode>
      </activity>
    </eOperations>
    <eStructuralFeatures xsi:type="ecore:EReference" name="expressionTransformer">
      <eType xsi:type="ecore:EClass" href="platform:/plugin/org.moflon.sdm.compiler.democles.pattern/model/Pattern.ecore#//ExpressionTransformer"/>
    </eStructuralFeatures>
  </eClassifiers>
</ecore:EPackage>
